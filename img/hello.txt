/**REXX**/
MASTER_BATTRX="'E7440TS.SSSSS.BATTRX.N444444'"
NEW_BATTRX ="'E7470TS.BSK.BATTRX.N123456'"
ADDRESS TSO "DEL "NEW_BATTRX""
"ALLOC FI(OUTDD) DA("NEW_BATTRX") SHR REUSE",
"NEW SPACE (100,200) DSORG(PS) RECFM(F B) LRECL(20476) BLKSIZE(20476)"
"FREE FI(OUTDD)"
SAY "ENTER THE CURRENT DATE"
PULL CDATE
ADDRESS TSO
"ALLOC F(INFILE) DSN("MASTER_BATTRX") SHR REUSE"
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
I=1
DO WHILE I <= MYFILE.0
MF.I = SUBSTR(MYFILE.I,01,25)||CDATE||,
     SUBSTR(MYFILE.I,32,08)||CDATE||SUBSTR(MYFILE.I,46,19885)||,
     CDATE||SUBSTR(MYFILE.I,19937,540)
"ALLOC DA("NEW_BATTRX") FI(OUTPUT) SHR REUSE"
  /*PUTTING DATA TO STEAM*/
  MYSTEM.I = MF.I
  /*WRITING STEM DATA FILE*/
  "EXECIO * DISKW OUTPUT (FINIS STEM MYSTEM."
  "FREE FI(OUTPUT)"
   I = I + 1
END
EXIT 0
/**REXX**/
MASTER_FILE="'E7440TS.SSSSS.BATTRX.N444444'"
NEW_FILE ="'E7470TS.BSK.BATTRX.N123456'"
ADDRESS TSO "DEL "NEW_FILE""
"ALLOC FI(INDD) DA("MASTER_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("NEW_FILE") SHR REUSE",
"NEW SPACE (100,200) DSORG(PS) RECFM(F B) LRECL(20476) BLKSIZE(20476)"
ADDRESS TSO "REPRO INFILE(INDD) OUTFILE(OUTDD) "
"FREE FI(INDD)"
"FREE FI(OUTDD)"

SAY "ENTER THE CURRENT DATE"
PULL CDATE
ADDRESS TSO
"ALLOC F(INFILE) DSN("MASTER_FILE") SHR REUSE"
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
I=1
DO WHILE I <= MYFILE.0
MF.I = SUBSTR(MYFILE.I,01,25)||CDATE||,
     SUBSTR(MYFILE.I,32,08)||CDATE||SUBSTR(MYFILE.I,46,2430)
"ALLOC DA("NEW_FILE") FI(OUTPUT) SHR REUSE"
  /*PUTTING DATA TO STEAM*/
  MYSTEM.I = MF.I
  /*WRITING STEM DATA FILE*/
  "EXECIO * DISKW OUTPUT (FINIS STEM MYSTEM."
  "FREE FI(OUTPUT)"
   I = I + 1
END
EXIT 0
//E7470CPT JOB ('TES3'),TIME=(,30),MSGCLASS=O,NOTIFY=&SYSUID            00010001
/*JOBPARM SYSAFF=A090                                                   00020000
// SET NAME=PO113    <- NAME FILE                                       00020105
//E744112P PROC PARMLST=,                   ** PROGRAM PARAMETER LIST   00030000
//         RESOLVE='PMPFILES',              ** SPACE ALLOCATION         00040000
//         LIB01='E7440PS.VAN30.LOADLIB',   ** LOADLIB LVCSCLUS         00050000
//         LIB01A='E7440PS.VAN30.LOADLIB',  ** LOADLIB LVCSCLUS         00060000
//         LIB02='E7440PS.VAN30.LOADLIB',   ** LOADLIB LVCSCPX          00070000
//         LIB02A='E7440PS.VAN30.LOADLIB',  ** LOADLIB LVCSCPX          00080000
//         PRODLIB='E7440PS.VAN30.LOADLIB', ** PRODUCTION LOADLIB       00090000
//         RUNLIB='SYSCMN.PROD.CCLIB.VTGI', ** RUNLIB LIBRARY           00100000
//         PARMLIB='SYSCMN.PROD.CCLIB.VTGI', ** DEL/DEF LIBRARY         00110000
//         LVCSCPX='LVCSCPX',               ** FILE COMPRESS/DECOMPRESS 00120000
//         VAN30I=VAN30,                    ** INPUT DSN QUALIFIER      00130000
//         VAN30O=VAN30,                    ** OUTPUT DSN QUALIFIER     00140000
//         VFLIDI=E7440PS0,                 ** VSAM FILE INPUT          00150000
//         VFLIDO=E7440PS0,                 ** VSAM FILE OUTPUT         00160000
//         DSKUNIT='SYSDA',                 ** DASD UNIT                00170000
//         DNAME='XXXX',                    ** FILE NODE QUALIFIER      00180000
//         VSAMFLE='XXXX',                  ** VSAM FILE PARAMETERS     00190000
//         TIME1='30',                      ** TIME PARAMETER           00200000
//         JCLCLS='O',                      ** JCL OUTPUT CLASS         00210000
//         DUMPCLS='O',                     ** ABEND OUTPUT CLASS       00220000
//         RUNLOG='O'                       ** RUNLOG OUTPUT CLASS      00230000
//*                                                                     00240000
//*                                                                     00250000
//*******************************************************************   00260000
//******** RESOLVE SYMBOLICS FOR VSAM DEL/DEF FOR THE COMP FILE:        00270000
//*******************************************************************   00280000
//STEP01A  EXEC PGM=LVCSCLUS,                                           00290000
//         PARM='&VFLIDO..&VAN30O..COMP,NODASD'                         00300000
//STEPLIB  DD DSN=&LIB01,DISP=SHR                                       00310000
//         DD DSN=&LIB01A,DISP=SHR                                      00320000
//         DD DSN=&PRODLIB,DISP=SHR                                     00330000
//PROTOTYP DD DSN=&PARMLIB(&DNAME),DISP=SHR                             00340000
//OUTPUT   DD DSN=&&RESOLVE1,DISP=(NEW,PASS),                           00350000
//            SPACE=(TRK,(1,1)),UNIT=&DSKUNIT,                          00360000
//            DCB=(RECFM=FB,LRECL=80,BLKSIZE=6400)                      00370000
//RESOLVE  DD DSN=&RUNLIB(&RESOLVE),DISP=SHR                            00380000
//RUNLOG   DD SYSOUT=&RUNLOG,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=6251)     00390000
//SYSOUT   DD SYSOUT=&JCLCLS                                            00400000
//*                                                                     00410000
//*******************************************************************   00420000
//******** DEL/DEF FOR TEMPORARY RESOLVE PARAMETERS FILE                00430000
//*******************************************************************   00440000
//STEP01B  EXEC PGM=IDCAMS                                              00450000
//SYSPRINT DD SYSOUT=&JCLCLS                                            00460000
//SYSIN    DD DSN=&&RESOLVE1,DISP=OLD                                   00470000
//*                                                                     00480000
//********************************************************************  00490000
//******** COMPRESS ORIG FILE INTO COMP FILE (ADJUST PARM= AS NEEDED):  00500000
//********************************************************************  00510000
//STEP02   EXEC PGM=&LVCSCPX,PARM='&PARMLST',TIME=&TIME1                00520000
//STEPLIB  DD DSN=&LIB02,DISP=SHR                                       00530000
//         DD DSN=&LIB02A,DISP=SHR                                      00540000
//         DD DSN=&PRODLIB,DISP=SHR                                     00550000
//*    DECOMPRESSED FILE                                                00560000
//CEINPUT  DD DSN=&VFLIDI..&VAN30I..EXPN.&DNAME,                        00570000
//         DISP=SHR,AMP=(AMORG,'BUFSP=740000')                          00580000
//*    COMPRESSED FILE                                                  00590000
//CEOUTPUT DD DSN=&VFLIDO..&VAN30O..COMP.&DNAME,                        00600000
//         DISP=SHR,AMP=(AMORG,'BUFSP=740000')                          00610000
//VSAMFLE  DD DSN=&PARMLIB(&VSAMFLE),DISP=SHR                           00620000
//RUNLOG   DD SYSOUT=&RUNLOG,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=6251)     00630000
//PRFLOG   DD SYSOUT=&JCLCLS                                            00640000
//SYSUDUMP DD SYSOUT=&DUMPCLS                                           00650000
//SYSABOUT DD SYSOUT=&DUMPCLS                                           00660000
//SYSOUT   DD SYSOUT=&JCLCLS                                            00670000
//*                                                                     00680000
//*                                                                     00690000
//*=====================================================================00700000
//* THIS JOB PROVIDES TWO TYPES OF STAND ALONE COMPRESSION FOR FILES.   00710000
//* THE STANDARD VANTAGE-ONE CHARACTER COMPRESSION IS ALWAYS PERFORMED. 00720000
//* AND, FOR CERTAIN FILES, VANTAGE-ONE "FILE COMPRESSION" (PREPARATION 00730000
//* FOR ENHANCED CHARACTER COMPRESSION) IS ALSO PERFORMED.  THESE       00740000
//* SPECIAL FILES ARE: CASHFLOW, DIRECTORY, SCHEDULE, AND TRX HIST      00750000
//* (LIST IS CURRENT AS OF 1/97).                                       00760000
//*                                                                     00770000
//* THE ABREVIATIONS EXPN AND COMP ARE USED IN THE JCL TO DESIGNATE THE 00780000
//* FILES WHICH ARE USED:                                               00790000
//*     EXPN - DECOMPRESSED VERSION OF THE FILE (INPUT)                 00800000
//*     COMP - COMPRESSED VERSION OF THE FILE   (OUTPUT)                00810000
//*                                                                     00820000
//* MAJOR STEPS:                                                        00830000
//*   #  DEL/DEF THE COMP FILE.                                         00840000
//*   #  COMPRESS THE EXPN FILE INTO THE COMP FILE.                     00850000
//*                                                                     00860000
//*=====================================================================00870000
//* IMPORTANT!!!                                                        00880000
//*                                                                     00890000
//*   IF YOU ARE COMPRESSING A FULLY UNCOMPRESSED FILE, MAKE SURE THAT  00900000
//*   THE COMPFLE VSAMFLE CARD HAS THE INPUT FILE SPECIFIED WITHOUT     00910000
//*   COMPRESSION, AS FOLLOWS:                                          00920000
//*      CEINPUT   N   00R  N         | USE VSAMFLE MEMBER              00930000
//*      CEOUTPUT  N   00O  Y         |     COMPFLE                     00940000
//*                                                                     00950000
//*   IF YOU ARE CONVERTING A CHARACTER-COMPRESSION-FILE TO ALSO HAVE   00960000
//*   FILE-COMPRESSION, MAKE SURE THAT THE COMPFLE VSAMFLE CARD HAS     00970000
//*   THE INPUT FILE SPECIFIED WITH COMPRESSION, AS FOLLOWS:            00980000
//*      CEINPUT   N   00R  Y         | USE VSAMFLE MEMBER              00990000
//*      CEOUTPUT  N   00O  Y         |     COMPFLE2                    01000000
//*                                                                     01010000
//*=====================================================================01020000
//* IMPORTANT!!!                                                        01030000
//*                                                                     01040000
//* ADJUST THE 'PARMLST' FIELD FOR PASSING DATA TO THE PGM:             01050000
//*                                                                     01060000
//* INPUT PARMS:  BYTE  1     = (P) FOR PUT                             01070000
//*               BYTES 2 - 9 = FILE-ID (ONLY IF FILE HAS ENHANCED      01080000
//*                             COMPRESSION):  CASHFLW, DIRECT, SCHED,  01090000
//*                             TRXHIS (LIST IS CURRENT AS OF 1/97)     01100000
//*                                   OR                                01110000
//*                             ENTER THE KEY STARTING BYTE IF IT IS    01120000
//*                             NOT BYTE 1 (IN NNNN FORMAT)             01130000
//*                                   OR                                01140000
//*                             LEAVE BLANK                             01150000
//*                                                                     01160000
//* EXAMPLE: 'PCASHFLW ' - WILL COMPRESS THE INPUT CASHFLOW FILE;       01170000
//*                        THE 'CASHFLW' IS REQUIRED HERE BECAUSE THIS  01180000
//*                        FILE HAS ENHANCED COMPRESSION                01190000
//* EXAMPLE: 'P0028    ' - WILL COMPRESS THE INPUT FILE (ANY FILE)      01200000
//*                        AND ASSUMES THE KEY STARTS IN BYTE 28        01210000
//* EXAMPLE: 'P        ' - WILL COMPRESS THE INPUT FILE (ANY FILE)      01220000
//*                        AND ASSUMES THE KEY STARTS IN BYTE 1         01230000
//*                                                                     01240000
//* NOTE: IT IS NOT NECESSARY TO PAD THE PARM VALUE WITH BLANKS AT      01250000
//*       THE END; I.E. FOR THE ABOVE EXAMPLES, 'PCASHFLW', 'P0028',    01260000
//*       AND 'P' WOULD ALSO WORK.                                      01270000
//*                                                                     01280000
//*==================================================================== 01290000
//*                                                                     01300000
//  PEND                                                                01310000
//E744112P EXEC E744112P,                                               01320000
//         DUMPCLS='*',                                                 01330000
//         JCLCLS='*',                                                  01340000
//         RUNLOG='*',                                                  01350000
//*   SYMBOLICS TO BE SET FOR FILE TO BE COMPRESSED                     01360000
//         PARMLST='P',              ** FOR CLPROD/OTHERS               01370000
//*        PARMLST='PTRXHIST',       ** FOR TRXHIST/CASHFLW/DIRECT/SCHED01380000
//         DNAME='CLPROD',                                              01390000
//         VSAMFLE='COMPFLE',        ** CLPROD/OTHERS                   01400000
//*        VSAMFLE='COMPFLE2',       ** FOR TRXHIST/CASHFLW/DIRECT/SCHED01410000
//         VFLIDI=E7440TT0,          ** VSAM QUAL INPUT                 01420000
//         VFLIDO=E7440TT0,          ** VSAM QUAL OUTPUT                01430000
//         VAN30I=&NAME,                                                01440004
//         VAN30O=&NAME                                                 01450004
//*                                                                     01460000
//STEP02.CEINPUT DD DSN=E7440TT0.&NAME..EXPN.CLPROD,DISP=SHR            01470004
//*    COMPRESSED FILE                                                  01480000
//*                                                                     01490000
//E7470EXT JOB ('E7440T2',,99),TIME=(1),MSGCLASS=O,NOTIFY=&SYSUID       00010009
/*JOBPARM SYSAFF=A090                                                   00020000
//* CHOOSE THE FILE PROD OR TEST                                        00030012
//* KEY CMP AND P-ID , NLREC AND RECTYP                                 00050012
//* C ALL F1111 YYYYY  FILENAME OF EXPAND                               00060015
//* C ALL CLPROD5 CLPROD* BASED ON YOUR SECTION POLICY                  00070015
//STEP1    EXEC PGM=FILEMGR,TIME=15                                     00130004
//SYSPRINT DD SYSOUT=*                                                  00140000
//SYSUDUMP DD SYSOUT=*                                                  00150000
//SYSTOTAL DD SYSOUT=*                                                  00160000
//DD01     DD DSN=E7440PS0.VAN30.CLPROD5,                               00170015
//         DISP=SHR                                                     00180000
//DD01O    DD DSN=&&TRXHIS,                                             00190000
//         DISP=(MOD,PASS,DELETE),                                      00200014
//         SPACE=(CYL,(5,1),RLSE),                                      00210000
//         UNIT=SYSDA,                                                  00220000
//         DCB=(RECFM=VB,LRECL=20480,BLKSIZE=0)                         00230000
//********************************************************************  00240000
//*  THE CARD BELOW SHOULD HAVE 20 CHARACTERS BETWEEN THE QUOTES        00250000
//*  COLUMN 19 TO 20 - SEGMENT TO ALWAYS BE  'DB'                       00260000
//******************12345678901234567890******************************  00270000
//SYSIN    DD *                                                         00280000
$$FILEM DSC  INPUT=DD01,                                                00290004
$$FILEM   KEY='021    936413540UMDB',                                   00291015
$$FILEM      OUTPUT=DD01O,                                              00292004
$$FILEM      NLRECS=1                                                   00293014
$$FILEM DSC  INPUT=DD01,                                                00294014
$$FILEM   KEY='021    936413540UMHQ',                                   00295015
$$FILEM      OUTPUT=DD01O,                                              00296014
$$FILEM      NLRECS=10                                                  00297014
//*                                                                     00300000
//* THIS STEP WILL CREATE A TEMPORARY RESTRICT.TRXHIS FILE              00310000
//*                                                                     00320000
//STEP2    EXEC PGM=IDCAMS                                              00330000
//SYSPRINT DD SYSOUT=*                                                  00340000
//*                                                                     00350000
//SYSIN    DD *                                                         00360000
  DELETE            (E7440TT0.POL1.CLPROD5) CLUSTER                     00370015
   IF MAXCC > 0 THEN DO                                                 00380000
      SET MAXCC = 0                                                     00390000
      END                                                               00400000
   DEFINE CLUSTER                          -                            00410000
          (NAME(E7440TT0.POL1.CLPROD5)       -                          00420015
          MGMTCLAS(D430M)                  -                            00430000
          VOLUMES(* * * * *  * *)          -                            00440000
          RECORDSIZE(1862 20472)           -                            00450000
          FREESPACE(10 10)                 -                            00460000
          OWNER($IAM)                      -                            00470000
          SHR(3 3)                         -                            00480000
          UNIQUE                           -                            00490000
          NOIMBED                          -                            00500000
          SPEED                            -                            00510000
          KEYS(24 0)                       -                            00520000
          CYL(5 5))                    -                                00530000
   DATA                                    -                            00540000
       (NAME(E7440TT0.POL1.CLPROD5.DATA)     -                          00550015
          CISZ(20480))                     -                            00560000
   INDEX                                   -                            00570000
       (NAME(E7440TT0.POL1.CLPROD5.INDEX) -                             00580015
          CISZ(512))                                                    00590000
/*                                                                      00600000
//*                                                                     00610000
//* THIS STEP WILL COPY THE RESTRICTED POLICY TO RESTRICT.TRXHIS  FILE  00620000
//*                                                                     00630000
//STEP3    EXEC PGM=IDCAMS                                              00640000
//SYSPRINT DD SYSOUT=*                                                  00650000
//INDD01   DD DSN=&&TRXHIS,DISP=OLD                                     00660000
//OUTDD01  DD DSN=E7440TT0.POL1.CLPROD5,DISP=SHR                        00670015
//SYSIN    DD *                                                         00680000
      REPRO    INFILE(INDD01)     OUTFILE(OUTDD01)                      00690000
/*                                                                      00700000
//*                                                                     00710000
//* THIS STEP WILL EXPAND THE TEMP.TRXHIS                               00720000
//*                                                                     00730000
//STEP4    EXEC E744111P,                                               00740000
//*   SYMBOLICS TO BE SET FOR FILE TO BE DECOMPRESSED                   00750000
//         JCLCLS='*',                                                  00760000
//         RUNLOG='*',                                                  00770000
//         PARMLST='G',             ** FOR TRXHIS/OTHERS                00780000
//         DNAME='CLPROD',        ** FOR TRXHIS/OTHERS                  00790000
//         VFLIDI=E7440TT0,         ** VSAM QUAL - INPUT                00800000
//         VFLIDO=E7440TT0,         ** VSAM QUAL - OUTPUT               00810000
//         VAN30O=F1111                                                 00811015
//*        POL1O='POL1'               ** OUTPUT DSN QUALIFIER           00820000
//STEP02.CEINPUT DD DSN=E7440TT0.POL1.CLPROD5,DISP=SHR                  00830015
//E7470RPT JOB ('E7440T0'),TIME=(,3),MSGCLASS=O,NOTIFY=&SYSUID          00010003
/*JOBPARM SYSAFF=N090                                                   00020000
//STEP1    EXEC PGM=IDCAMS                                              00030000
//SYSPRINT DD SYSOUT=O                                                  00040000
//INDD01   DD DISP=SHR,DSN=E7440TT0.D1111.COMP.CLPROD                   00051008
//OUTDD01  DD DISP=SHR,DSN=E7440TT0.D3111.CLPROD1                       00061008
//SYSIN    DD *                                                         00070000
      REPRO    INFILE(INDD01)   OUTFILE(OUTDD01) -                      00080000
      REPLACE                                                           00090000
/*                                                                      00100000
//E7470CPM JOB MSGCLASS=A,PRTY=15,NOTIFY=&SYSUID                        JOB44173
/*JOBPARM S=J090                                                        00020000
// SET DSNX=E7440TSH.BSK.COMPARE.OUTPUT.VTG1
//DELSTEP EXEC PGM=IEFBR14                                              00030000
//DELDD1 DD DISP=(MOD,DELETE),DSN=&DSNX                                 00040000
//COMPSTEP EXEC PGM=ISRSUPC,                                            00050000
//            PARM=(DELTAL,LINECMP,                                     00060000
//            'UPDPDEL',                                                00070000
//            '')                                                       00080000
//NEWDD  DD DISP=SHR,DSN=E7440TT0.PF101.CLPROD3                         00090000
//OLDDD  DD DISP=SHR,DSN=E7440TT0.PF102.CLPROD3                         00100000
//OUTDD  DD SYSOUT=*                                                    00110000
//DELDD  DD DSN=&DSNX,                                                  00120000
//          DISP=(NEW,CATLG,DELETE),                                    00130000
//          LIKE=E7440TS.SHUBH.AA.COMPARE.FILE                          00140000
//FIXSORT EXEC PGM=SORT                                                 00150000
//SYSOUT DD SYSOUT=*                                                    00160000
//SYSPRINT DD SYSOUT=*                                                  00170000
//SYSUDUMP DD SYSOUT=*                                                  00180000
//SORTIN DD DISP=SHR,DSN=&DSNX                                          00190000
//SORTOUT DD DISP=SHR,DSN=&DSNX                                         00200000
//SYSIN  DD *                                                           00210000
  SORT FIELDS=COPY                                                      00220000
  INCLUDE COND=(5,1,CH,EQ,C'I',OR,5,1,CH,EQ,C'D')                       00230000
/*                                                                      00240000
//E7470CPM JOB MSGCLASS=A,PRTY=15,NOTIFY=&SYSUID                        JOB13682
/*JOBPARM S=J090                                                        00020000
// SET DSNX=E7440TSH.BSK.COMPARE.OUTPUT.VTG1.A4
//DELSTEP EXEC PGM=IEFBR14                                              00030000
//DELDD1 DD DISP=(MOD,DELETE),DSN=&DSNX                                 00040000
//COMPSTEP EXEC PGM=ISRSUPC,                                            00050000
//            PARM=(DELTAL,LINECMP,                                     00050000
//            'UPDPDEL',                                                00050000
//            '')                                                       00050000
//***************************************************************
//NEWDD  DD DISP=SHR,DSN=E7440TT0.D2601.CLPROD4                         00090000
//***************************************************************
//OLDDD  DD DISP=SHR,DSN=E7440TT0.D2602.CLPROD4                         00100000
//***************************************************************
//OUTDD  DD SYSOUT=*                                                    00110000
//OUT    DD DSN=&DSNX,DISP=(NEW,CATLG,DELETE),                          00120000
//          LIKE=E7440TS.SHUBH.AA.COMPARE.FILE                          00140000
//***************************************************************
//FIXSORT EXEC PGM=SORT                                                 00150000
//SYSOUT DD SYSOUT=*                                                    00160000
//SYSPRINT DD SYSOUT=*                                                  00170000
//SYSUDUMP DD SYSOUT=*                                                  00180000
//SORTIN DD DISP=SHR,DSN=&DSNX                                          00190000
//SORTOUT DD DISP=SHR,DSN=&DSNX                                         00200000
//SYSIN  DD *                                                           00210000
  SORT FIELDS=COPY                                                      00220000
  INCLUDE COND=(5,1,CH,EQ,C'I',OR,5,1,CH,EQ,C'D')                       00230000
/*                                                                      00240000
//E7470CPM JOB MSGCLASS=A,PRTY=15,NOTIFY=&SYSUID                        00010001
/*JOBPARM S=J090                                                        00020000
//DELSTEP EXEC PGM=IEFBR14                                              00030000
//DELDD1 DD DISP=(MOD,DELETE),DSN=E7440TSH.BSK.COMPARE.OUTPUT           00040000
//COMPSTEP EXEC PGM=ISRSUPC,                                            00050000
//            PARM=(DELTAL,LINECMP,                                     00060000
//            'UPDPDEL',                                                00070000
//            '')                                                       00080000
//NEWDD  DD DISP=SHR,DSN=E7445TT0.ASD11.CLPROD                          00090000
//OLDDD  DD DISP=SHR,DSN=E7445TT0.ASD22.CLPROD                          00100000
//OUTDD  DD SYSOUT=*                                                    00110000
//DELDD  DD DSN=E7440TSH.BSK.COMPARE.OUTPUT,                            00120000
//          DISP=(NEW,CATLG,DELETE),                                    00130000
//          LIKE=E7440TS.SHUBH.AA.COMPARE.FILE                          00140000
//FIXSORT EXEC PGM=SORT                                                 00150000
//SYSOUT DD SYSOUT=*                                                    00160000
//SYSPRINT DD SYSOUT=*                                                  00170000
//SYSUDUMP DD SYSOUT=*                                                  00180000
//SORTIN DD DISP=SHR,DSN=E7440TSH.BSK.COMPARE.OUTPUT                    00190000
//SORTOUT DD DISP=SHR,DSN=E7440TSH.BSK.COMPARE.OUTPUT                   00200000
//SYSIN  DD *                                                           00210000
  SORT FIELDS=COPY                                                      00220000
  INCLUDE COND=(5,1,CH,EQ,C'I',OR,5,1,CH,EQ,C'D')                       00230000
/*                                                                      00240000
//E7470TST JOB ('E7470BV',,99),TIME=(,9),MSGCLASS=O,NOTIFY=&SYSUID      00010003
/*JOBPARM S=ANY                                                         00020000
//**                                                                    00021002
//** C ALL IB656 EXPAND FILE NAME JJ=1 MAXCC=0000                       00022002
//**                                                                    00023002
//*PROCLIB  JCLLIB ORDER=(E7445TS.VAN15.USERPROC)                       00030000
//* THIS STEP WILL COMPRESS THE CLPROD                                  00040000
//*                                                                     00050000
//E744512P EXEC E744512P,                                               00060000
//*   SYMBOLICS TO BE SET FOR FILE TO BE COMPRESSED                     00070000
//*        LIB02='MSTCMN.VABR.USERLINK',                                00080000
//*        LIB02A='MSTCMN.VABR.USERLINK',                               00090000
//*        PRODLIB='MSTCMN.VABR.USERLINK',                              00100000
//*        PARMLIB='MSTCMN.VABR.NCCLIB',                                00110000
//*        RUNLIB='MSTCMN.VABR.NCCLIB',                                 00120000
//         JCLCLS='*',                                                  00130000
//         RUNLOG='*',                                                  00140000
//         PARMLST='P',              ** FOR CLPROD/OTHERS               00150000
//*        PARMLST='PTRXHIST',       ** FOR TRXHIST/CASHFLW/DIRECT/SCHED00160000
//         DNAME='CLPROD',                                              00170000
//         VSAMFLE='COMPFLE',        ** CLPROD/OTHERS                   00180000
//*        VSAMFLE='COMPFLE2',       ** FOR TRXHIST/CASHFLW/DIRECT/SCHED00190000
//         VFLIDI=E7445TT0,          ** VSAM QUAL INPUT                 00200000
//         VFLIDO=E7445TT0,          ** VSAM QUAL OUTPUT                00210000
//         VAN15I='IB656.RESTRICT',  ** INPUT DSN QUALIFIER             00220000
//         VAN15O='IB656.RESTRICT'   ** OUTPUT DSN QUALIFIER            00230000
//*                                                                     00240000
//* THIS STEP WILL COPY THE SOUVKED IB656.RESTRICTED POLICY IN PROD CLPR00250000
//*                                                                     00260000
//E7470CPT JOB ('BSK'),TIME=(,30),MSGCLASS=O,NOTIFY=&SYSUID             00010000
//** OUTFILE -> E7440TT0.OWNER.COMP.CLPROD                              00020000
/*JOBPARM SYSAFF=A090                                                   00030000
//E744112P PROC PARMLST=,                   ** PROGRAM PARAMETER LIST   00040000
//         RESOLVE='PMPFILES',              ** SPACE ALLOCATION         00050000
//         LIB01='E7440PS.VAN30.LOADLIB',   ** LOADLIB LVCSCLUS         00060000
//         LIB01A='E7440PS.VAN30.LOADLIB',  ** LOADLIB LVCSCLUS         00070000
//         LIB02='E7440PS.VAN30.LOADLIB',   ** LOADLIB LVCSCPX          00080000
//         LIB02A='E7440PS.VAN30.LOADLIB',  ** LOADLIB LVCSCPX          00090000
//         PRODLIB='E7440PS.VAN30.LOADLIB', ** PRODUCTION LOADLIB       00100000
//         RUNLIB='SYSCMN.PROD.CCLIB.VTGI', ** RUNLIB LIBRARY           00110000
//         PARMLIB='SYSCMN.PROD.CCLIB.VTGI', ** DEL/DEF LIBRARY         00120000
//         LVCSCPX='LVCSCPX',               ** FILE COMPRESS/DECOMPRESS 00130000
//         VAN30I=VAN30,                    ** INPUT DSN QUALIFIER      00140000
//         VAN30O=VAN30,                    ** OUTPUT DSN QUALIFIER     00150000
//         VFLIDI=E7440PS0,                 ** VSAM FILE INPUT          00160000
//         VFLIDO=E7440PS0,                 ** VSAM FILE OUTPUT         00170000
//         DSKUNIT='SYSDA',                 ** DASD UNIT                00180000
//         DNAME='XXXX',                    ** FILE NODE QUALIFIER      00190000
//         VSAMFLE='XXXX',                  ** VSAM FILE PARAMETERS     00200000
//         TIME1='30',                      ** TIME PARAMETER           00210000
//         JCLCLS='O',                      ** JCL OUTPUT CLASS         00220000
//         DUMPCLS='O',                     ** ABEND OUTPUT CLASS       00230000
//         RUNLOG='O'                       ** RUNLOG OUTPUT CLASS      00240000
//STEP01A  EXEC PGM=LVCSCLUS,                                           00250000
//         PARM='&VFLIDO..&VAN30O..COMP,NODASD'                         00260000
//STEPLIB  DD DSN=&LIB01,DISP=SHR                                       00270000
//         DD DSN=&LIB01A,DISP=SHR                                      00280000
//         DD DSN=&PRODLIB,DISP=SHR                                     00290000
//PROTOTYP DD DSN=&PARMLIB(&DNAME),DISP=SHR                             00300000
//OUTPUT   DD DSN=&&RESOLVE1,DISP=(NEW,PASS),                           00310000
//            SPACE=(TRK,(1,1)),UNIT=&DSKUNIT,                          00320000
//            DCB=(RECFM=FB,LRECL=80,BLKSIZE=6400)                      00330000
//RESOLVE  DD DSN=&RUNLIB(&RESOLVE),DISP=SHR                            00340000
//RUNLOG   DD SYSOUT=&RUNLOG,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=6251)     00350000
//SYSOUT   DD SYSOUT=&JCLCLS                                            00360000
//STEP01B  EXEC PGM=IDCAMS                                              00370000
//SYSPRINT DD SYSOUT=&JCLCLS                                            00380000
//SYSIN    DD DSN=&&RESOLVE1,DISP=OLD                                   00390000
//STEP02   EXEC PGM=&LVCSCPX,PARM='&PARMLST',TIME=&TIME1                00400000
//STEPLIB  DD DSN=&LIB02,DISP=SHR                                       00410000
//         DD DSN=&LIB02A,DISP=SHR                                      00420000
//         DD DSN=&PRODLIB,DISP=SHR                                     00430000
//CEINPUT  DD DSN=&VFLIDI..&VAN30I..EXPN.&DNAME,                        00440000
//         DISP=SHR,AMP=(AMORG,'BUFSP=740000')                          00450000
//CEOUTPUT DD DSN=&VFLIDO..&VAN30O..COMP.&DNAME,                        00460000
//         DISP=SHR,AMP=(AMORG,'BUFSP=740000')                          00470000
//VSAMFLE  DD DSN=&PARMLIB(&VSAMFLE),DISP=SHR                           00480000
//RUNLOG   DD SYSOUT=&RUNLOG,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=6251)     00490000
//PRFLOG   DD SYSOUT=&JCLCLS                                            00500000
//SYSUDUMP DD SYSOUT=&DUMPCLS                                           00510000
//SYSABOUT DD SYSOUT=&DUMPCLS                                           00520000
//SYSOUT   DD SYSOUT=&JCLCLS                                            00530000
//  PEND                                                                00540000
//E744112P EXEC E744112P,                                               00550000
//         DUMPCLS='*',                                                 00560000
//         JCLCLS='*',                                                  00570000
//         RUNLOG='*',                                                  00580000
//         PARMLST='P',              ** FOR CLPROD/OTHERS               00590000
//         DNAME='CLPROD',                                              00600000
//         VSAMFLE='COMPFLE',        ** CLPROD/OTHERS                   00610000
//         VFLIDI=E7440TT0,          ** VSAM QUAL INPUT                 00620000
//         VFLIDO=E7440TT0,          ** VSAM QUAL OUTPUT                00630000
//         VAN30I='OWNER',                                              00640000
//         VAN30O='OWNER'                                               00650000
//STEP02.CEINPUT DD DSN=E7440TT0.OWNER.EXPN.CLPROD,DISP=SHR             00660000
//E7445CPT JOB ('E7440T2',,999),TIME=(,30),MSGCLASS=O,NOTIFY=&SYSUID    JOB04141
/*JOBPARM SYSAFF=N090
//E744112P PROC PARMLST=,                   ** PROGRAM PARAMETER LIST   00000130
//         RESOLVE='PMPFILES',              ** SPACE ALLOCATION         00000140
//         LIB01='SYSCMN.PROD.USERLINK.VTGI',    ** LOADLIB LVCSCLUS    00000150
//         LIB01A='SYSCMN.PROD.USERLINK.VTGI',   ** LOADLIB LVCSCLUS    00000160
//         LIB02='SYSCMN.PROD.USERLINK.VTGI',    ** LOADLIB LVCSCPX     00000170
//         LIB02A='SYSCMN.PROD.USERLINK.VTGI',   ** LOADLIB LVCSCPX     00000180
//         PRODLIB='SYSCMN.PROD.USERLINK.VTGI',  ** PRODUCTION LOADLIB  00000190
//         RUNLIB='SYSCMN.PROD.CCLIB.VTGI', ** RUNLIB LIBRARY           00000200
//         PARMLIB='SYSCMN.PROD.CCLIB.VTGI', ** DEL/DEF LIBRARY         00000210
//         LVCSCPX='LVCSCPX',               ** FILE COMPRESS/DECOMPRESS 00000220
//         VAN30I=VAN30,                    ** INPUT DSN QUALIFIER      00000230
//         VAN30O=VAN30,                    ** OUTPUT DSN QUALIFIER     00000240
//         VFLIDI=E7440PS0,                 ** VSAM FILE INPUT          00000250
//         VFLIDO=E7440PS0,                 ** VSAM FILE OUTPUT         00000260
//         DSKUNIT='SYSDA',                 ** DASD UNIT                00000270
//         DNAME='XXXX',                    ** FILE NODE QUALIFIER      00000280
//         VSAMFLE='XXXX',                  ** VSAM FILE PARAMETERS     00000290
//         TIME1='30',                      ** TIME PARAMETER           00000300
//         JCLCLS='O',                      ** JCL OUTPUT CLASS         00000310
//         DUMPCLS='O',                     ** ABEND OUTPUT CLASS       00000320
//         RUNLOG='O'                       ** RUNLOG OUTPUT CLASS      00000330
//*                                                                     00000340
//*******************************************************************   00000350
//******** RESOLVE SYMBOLICS FOR VSAM DEL/DEF FOR THE COMP FILE:        00000360
//*******************************************************************   00000370
//STEP01A  EXEC PGM=LVCSCLUS,                                           00000380
//         PARM='&VFLIDO..&VAN30O..COMP,NODASD'                         00000390
//STEPLIB  DD DSN=&LIB01,DISP=SHR                                       00000400
//         DD DSN=&LIB01A,DISP=SHR                                      00000410
//         DD DSN=&PRODLIB,DISP=SHR                                     00000420
//PROTOTYP DD DSN=&PARMLIB(&DNAME),DISP=SHR                             00000430
//OUTPUT   DD DSN=&&RESOLVE1,DISP=(NEW,PASS),                           00000440
//            SPACE=(TRK,(1,1)),UNIT=&DSKUNIT,                          00000450
//            DCB=(RECFM=FB,LRECL=80,BLKSIZE=6400)                      00000460
//RESOLVE  DD DSN=&RUNLIB(&RESOLVE),DISP=SHR                            00000470
//RUNLOG   DD SYSOUT=&RUNLOG,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=6251)     00000480
//SYSOUT   DD SYSOUT=&JCLCLS                                            00000490
//*                                                                     00000500
//*******************************************************************   00000510
//******** DEL/DEF FOR TEMPORARY RESOLVE PARAMETERS FILE                00000520
//*******************************************************************   00000530
//STEP01B  EXEC PGM=IDCAMS                                              00000540
//SYSPRINT DD SYSOUT=&JCLCLS                                            00000550
//SYSIN    DD DSN=&&RESOLVE1,DISP=OLD                                   00000560
//*                                                                     00000570
//********************************************************************  00000580
//******** COMPRESS ORIG FILE INTO COMP FILE (ADJUST PARM= AS NEEDED):  00000590
//********************************************************************  00000600
//STEP02   EXEC PGM=&LVCSCPX,PARM='&PARMLST',TIME=&TIME1                00000610
//STEPLIB  DD DSN=&LIB02,DISP=SHR                                       00000620
//         DD DSN=&LIB02A,DISP=SHR                                      00000630
//         DD DSN=&PRODLIB,DISP=SHR                                     00000640
//*    DECOMPRESSED FILE                                                00000650
//CEINPUT  DD DSN=&VFLIDI..&VAN30I..EXPN.&DNAME,                        00000660
//         DISP=SHR,AMP=(AMORG,'BUFSP=740000')                          00000670
//*    COMPRESSED FILE                                                  00000680
//CEOUTPUT DD DSN=&VFLIDO..&VAN30O..COMP.&DNAME,                        00000690
//         DISP=SHR,AMP=(AMORG,'BUFSP=740000')                          00000700
//VSAMFLE  DD DSN=&PARMLIB(&VSAMFLE),DISP=SHR                           00000710
//RUNLOG   DD SYSOUT=&RUNLOG,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=6251)     00000720
//PRFLOG   DD SYSOUT=&JCLCLS                                            00000730
//SYSUDUMP DD SYSOUT=&DUMPCLS                                           00000740
//SYSABOUT DD SYSOUT=&DUMPCLS                                           00000750
//SYSOUT   DD SYSOUT=&JCLCLS                                            00000760
//*                                                                     00000770
//*=====================================================================
//* THIS JOB PROVIDES TWO TYPES OF STAND ALONE COMPRESSION FOR FILES.
//* THE STANDARD VANTAGE-ONE CHARACTER COMPRESSION IS ALWAYS PERFORMED.
//* AND, FOR CERTAIN FILES, VANTAGE-ONE "FILE COMPRESSION" (PREPARATION
//* FOR ENHANCED CHARACTER COMPRESSION) IS ALSO PERFORMED.  THESE
//* SPECIAL FILES ARE: CASHFLOW, DIRECTORY, SCHEDULE, AND TRX HIST
//* (LIST IS CURRENT AS OF 1/97).
//*
//* THE ABREVIATIONS EXPN AND COMP ARE USED IN THE JCL TO DESIGNATE THE
//* FILES WHICH ARE USED:
//*     EXPN - DECOMPRESSED VERSION OF THE FILE (INPUT)
//*     COMP - COMPRESSED VERSION OF THE FILE   (OUTPUT)
//*
//* MAJOR STEPS:
//*   #  DEL/DEF THE COMP FILE.
//*   #  COMPRESS THE EXPN FILE INTO THE COMP FILE.
//*
//*=====================================================================
//* IMPORTANT!!!
//*
//*   IF YOU ARE COMPRESSING A FULLY UNCOMPRESSED FILE, MAKE SURE THAT
//*   THE COMPFLE VSAMFLE CARD HAS THE INPUT FILE SPECIFIED WITHOUT
//*   COMPRESSION, AS FOLLOWS:
//*      CEINPUT   N   00R  N         | USE VSAMFLE MEMBER
//*      CEOUTPUT  N   00O  Y         |     COMPFLE
//*
//*   IF YOU ARE CONVERTING A CHARACTER-COMPRESSION-FILE TO ALSO HAVE
//*   FILE-COMPRESSION, MAKE SURE THAT THE COMPFLE VSAMFLE CARD HAS
//*   THE INPUT FILE SPECIFIED WITH COMPRESSION, AS FOLLOWS:
//*      CEINPUT   N   00R  Y         | USE VSAMFLE MEMBER
//*      CEOUTPUT  N   00O  Y         |     COMPFLE2
//*
//*=====================================================================
//* IMPORTANT!!!
//*
//* ADJUST THE 'PARMLST' FIELD FOR PASSING DATA TO THE PGM:
//*
//* INPUT PARMS:  BYTE  1     = (P) FOR PUT
//*               BYTES 2 - 9 = FILE-ID (ONLY IF FILE HAS ENHANCED
//*                             COMPRESSION):  CASHFLW, DIRECT, SCHED,
//*                             TRXHIS (LIST IS CURRENT AS OF 1/97)
//*                                   OR
//*                             ENTER THE KEY STARTING BYTE IF IT IS
//*                             NOT BYTE 1 (IN NNNN FORMAT)
//*                                   OR
//*                             LEAVE BLANK
//*
//* EXAMPLE: 'PCASHFLW ' - WILL COMPRESS THE INPUT CASHFLOW FILE;
//*                        THE 'CASHFLW' IS REQUIRED HERE BECAUSE THIS
//*                        FILE HAS ENHANCED COMPRESSION
//* EXAMPLE: 'P0028    ' - WILL COMPRESS THE INPUT FILE (ANY FILE)
//*                        AND ASSUMES THE KEY STARTS IN BYTE 28
//* EXAMPLE: 'P        ' - WILL COMPRESS THE INPUT FILE (ANY FILE)
//*                        AND ASSUMES THE KEY STARTS IN BYTE 1
//*
//* NOTE: IT IS NOT NECESSARY TO PAD THE PARM VALUE WITH BLANKS AT
//*       THE END; I.E. FOR THE ABOVE EXAMPLES, 'PCASHFLW', 'P0028',
//*       AND 'P' WOULD ALSO WORK.
//*
//*====================================================================
//*
//  PEND
//E744112P EXEC E744112P,
//         DUMPCLS='*',
//         JCLCLS='*',
//         RUNLOG='*',
//*   SYMBOLICS TO BE SET FOR FILE TO BE COMPRESSED
//         PARMLST='P',              ** FOR CLJIMBR\OTHERS
//*        PARMLST='PTRXHIST',       ** FOR TRXHIST/CASHFLW/DIRECT/SCHED
//         DNAME='CLPROD',
//         VSAMFLE='COMPFLE',        ** CLJIMBR/OTHERS
//*        VSAMFLE='COMPFLE2',       ** FOR TRXHIST/CASHFLW/DIRECT/SCHED
//         VFLIDI=E7445TT0,          ** VSAM QUAL INPUT
//         VFLIDO=E7445TT0,          ** VSAM QUAL OUTPUT
//         VAN30I='VAN15.RESTRICT',
//         VAN30O='VAN15.RESTRICT'
//*
//STEP02.CEINPUT DD DSN=E7445TT0.VAN15.RESTRICT.EXPN.CLPROD,DISP=SHR
//*    COMPRESSED FILE
//*
//E7440TST JOB ('E7470BV',,99),TIME=(,9),MSGCLASS=O,NOTIFY=&SYSUID      00010001
/*JOBPARM S=ANY                                                         00020000
//*PROCLIB  JCLLIB ORDER=(E7445TS.VAN15.USERPROC)                       00030000
//* THIS STEP WILL COMPRESS THE SCHED                                   00040000
//*                                                                     00050000
//E744512P EXEC E744512P,                                               00060000
//*   SYMBOLICS TO BE SET FOR FILE TO BE COMPRESSED                     00070000
//*        LIB02='MSTCMN.VABR.USERLINK',                                00080000
//*        LIB02A='MSTCMN.VABR.USERLINK',                               00090000
//*        PRODLIB='MSTCMN.VABR.USERLINK',                              00100000
//*        PARMLIB='MSTCMN.VABR.NCCLIB',                                00110000
//*        RUNLIB='MSTCMN.VABR.NCCLIB',                                 00120000
//         JCLCLS='*',                                                  00130000
//         RUNLOG='*',                                                  00140000
//         PARMLST='P',              ** FOR SCHED/OTHERS                00150000
//*        PARMLST='PTRXHIST',       ** FOR TRXHIST/CASHFLW/DIRECT/SCHED00160000
//         DNAME='SCHED',                                               00170000
//         VSAMFLE='COMPFLE',        ** SCHED/OTHERS                    00180000
//*        VSAMFLE='COMPFLE2',       ** FOR TRXHIST/CASHFLW/DIRECT/SCHED00190000
//         VFLIDI=E7445TT0,          ** VSAM QUAL INPUT                 00200000
//         VFLIDO=E7445TT0,          ** VSAM QUAL OUTPUT                00210000
//         VAN15I='IB656.RESTRICT',  ** INPUT DSN QUALIFIER             00220000
//         VAN15O='IB656.RESTRICT'   ** OUTPUT DSN QUALIFIER            00230000
//*                                                                     00240000
//* THIS STEP WILL COPY THE SOUVKED IB656.RESTRICTED POLICY IN PROD SCHE00250000
//*                                                                     00260000
//E7445TST JOB ('E7470BV',,99),TIME=(,9),MSGCLASS=O,NOTIFY=&SYSUID      00010000
/*JOBPARM S=ANY                                                         00020000
//*PROCLIB  JCLLIB ORDER=(E7445TS.VAN15.USERPROC)                       00030000
//* THIS STEP WILL COMPRESS THE TRXHIST                                 00040000
//*                                                                     00050000
//E744512P EXEC E744512P,                                               00060000
//*   SYMBOLICS TO BE SET FOR FILE TO BE COMPRESSED                     00070000
//*        LIB02='MSTCMN.VABR.USERLINK',                                00080000
//*        LIB02A='MSTCMN.VABR.USERLINK',                               00090000
//*        PRODLIB='MSTCMN.VABR.USERLINK',                              00100000
//*        PARMLIB='MSTCMN.VABR.NCCLIB',                                00110000
//*        RUNLIB='MSTCMN.VABR.NCCLIB',                                 00120000
//         JCLCLS='*',                                                  00130000
//         RUNLOG='*',                                                  00140000
//         PARMLST='P',              ** FOR TRXHIST/OTHERS              00150000
//*        PARMLST='PTRXHIST',       ** FOR TRXHIST/CASHFLW/DIRECT/SCHED00160000
//         DNAME='TRXHIST',                                             00170000
//         VSAMFLE='COMPFLE',        ** TRXHIST/OTHERS                  00180000
//*        VSAMFLE='COMPFLE2',       ** FOR TRXHIST/CASHFLW/DIRECT/SCHED00190000
//         VFLIDI=E7445TT0,          ** VSAM QUAL INPUT                 00200000
//         VFLIDO=E7445TT0,          ** VSAM QUAL OUTPUT                00210000
//         VAN15I='IB656.RESTRICT',  ** INPUT DSN QUALIFIER             00220000
//         VAN15O='IB656.RESTRICT'   ** OUTPUT DSN QUALIFIER            00230000
//*                                                                     00240000
//* THIS STEP WILL COPY THE SOUVKED IB656.RESTRICTED POLICY IN PROD CLPR00250000
//*                                                                     00260000
/*REXX */
SAY "ENTER THE COMPANY CODE"
PULL C
SAY "ENTER THE POLICY NUMBER"
PULL P
IF (C = 021) | (C = 018) | (C = 022) THEN
DO
TEST = "POLICY      "||C||"    "||P||"UM"
SAY TEST
END
ELSE DO
SAY "ERROR"
END
/**REXX**/
DBNAME = LITX2
VSAM_FILE="'E7440TT0."||DBNAME||".CONTROL'"
SEQ_FILE ="'E7440TS.BSK.CONTROL'"
ADDRESS TSO "DEL "SEQ_FILE""
"ALLOC FI(INDD) DA("VSAM_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("SEQ_FILE") SHR REUSE",
"NEW SPACE (100,200) DSORG(PS) RECFM(V B) LRECL(4092) BLKSIZE(8184)"
ADDRESS TSO "REPRO INFILE(INDD) OUTFILE(OUTDD) COUNT(1)"
"FREE FI(INDD)"
"FREE FI(OUTDD)"
/****************/
VSAM_C1="'E7440TT0."||DBNAME||".CONTROL1'"
"ALLOC FI(INDD) DA("SEQ_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("VSAM_C1") SHR REUSE"
ADDRESS TSO "REPRO INFILE(INDD) OUTFILE(OUTDD) REPLACE"
"FREE FI(INDD)"
"FREE FI(OUTDD)"
/****************/
/****************/
VSAM_C2="'E7440TT0."||DBNAME||".CONTROL2'"
"ALLOC FI(INDD) DA("SEQ_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("VSAM_C2") SHR REUSE"
ADDRESS TSO "REPRO INFILE(INDD) OUTFILE(OUTDD) REPLACE"
"FREE FI(INDD)"
"FREE FI(OUTDD)"
/****************/
/****************/
VSAM_C3="'E7440TT0."||DBNAME||".CONTROL3'"
"ALLOC FI(INDD) DA("SEQ_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("VSAM_C3") SHR REUSE"
ADDRESS TSO "REPRO INFILE(INDD) OUTFILE(OUTDD) REPLACE"
"FREE FI(INDD)"
"FREE FI(OUTDD)"
/****************/
/****************/
VSAM_C4="'E7440TT0."||DBNAME||".CONTROL4'"
"ALLOC FI(INDD) DA("SEQ_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("VSAM_C4") SHR REUSE"
ADDRESS TSO "REPRO INFILE(INDD) OUTFILE(OUTDD) REPLACE"
"FREE FI(INDD)"
"FREE FI(OUTDD)"
/****************/
/****************/
VSAM_C5="'E7440TT0."||DBNAME||".CONTROL5'"
"ALLOC FI(INDD) DA("SEQ_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("VSAM_C5") SHR REUSE"
ADDRESS TSO "REPRO INFILE(INDD) OUTFILE(OUTDD) REPLACE"
"FREE FI(INDD)"
"FREE FI(OUTDD)"
/****************/
EXIT 0
/*REXX*/
/*****************************************************************
ODB = DUV01
NDB = DUV02
SN  = 1
ADDRESS TSO EXEC "'E7432TS.BSK.AS.VCS1.LIB(COPYDB)'",
                 "'"ODB","NDB","SN"'"
 ********************************************************************/
PARSE ARG ODB','NDB','SN
/**START**************TSO USER ID***********************************/
URN=USERID()
JOBID=SUBSTR(URN,1,5)
/**END****************TSO USER ID***********************************/
QUEUE "//"JOBID"DPY JOB CLASS=T,PRTY=15,MSGCLASS=X,TIME=MAXIMUM,               "
QUEUE "//           NOTIFY=&SYSUID                                             "
QUEUE "/*JOBPARM S=A090                                                        "
QUEUE "//CFLWLDEF EXEC PGM=IDCAMS                                              "
QUEUE "//*                                                                     "
QUEUE "//*                                                                     "
QUEUE "//*  ----------DO NOT EDIT - DO NOT EDIT -  DO NOT EDIT -----------     "
QUEUE "//*                                                                     "
QUEUE "//*  ----------RUN IN VIEW - RUN IN VIEW -  RUN IN VIEW -----------     "
QUEUE "//*                                                                     "
QUEUE "//*      ORIGINAL DB NAME ->> "ODB"                                     "
QUEUE "//*      BACKUP NAME      ->> "NDB"                                     "
QUEUE "//*      SECTION NUM      ->> "SN"                                      "
QUEUE "//*                                                                     "
QUEUE "//SYSPRINT DD  SYSOUT=*                                                 "
QUEUE "//SYSUDUMP DD  SYSOUT=*                                                 "
QUEUE "//IAMOVRID DD *                                                         "
QUEUE "    CREATE DD=&ALLDD,DATACOMPRESS=YES,OVERFLOW=5000                     "
QUEUE "/*                                                                      "
QUEUE "//SYSIN    DD *                                                         "
QUEUE "    DELETE (E7432TS0."NDB".CASHFLW"SN") -                               "
QUEUE "       CLUSTER                                                          "
QUEUE "    IF MAXCC > 0 THEN DO                                                "
QUEUE "       SET MAXCC = 0                                                    "
QUEUE "       END                                                              "
QUEUE "        DEFINE CLUSTER(              -                                  "
QUEUE "        NAME(E7432TS0."NDB".CASHFLW"SN") -                              "
QUEUE "              VOL(* * * * *)                      -                     "
QUEUE "              MGMTCLAS(D100)            -                               "
QUEUE "              OWNER($IAM)            -                                  "
QUEUE "              UNIQUE                 -                                  "
QUEUE "              FSPC(5 2)              -                                  "
QUEUE "              KEYS(16 0)             -                                  "
QUEUE "              SPEED                  -                                  "
QUEUE "              NOIMBED)               -                                  "
QUEUE "         DATA -                                                         "
QUEUE "        (NAME(E7432TS0."NDB".CASHFLW"SN".DATA) -                        "
QUEUE "               CYL(440 440) -                                           "
QUEUE "               RECSZ(28 1432) -                                         "
QUEUE "               CISZ(6144)) -                                            "
QUEUE "         INDEX -                                                        "
QUEUE "        (NAME(E7432TS0."NDB".CASHFLW"SN".INDEX) -                       "
QUEUE "               CISZ(1024))                                              "
QUEUE "/*                                                                      "
QUEUE "//CFLWCOPY EXEC PGM=IDCAMS,REGION=3500K,TIME=30                         "
QUEUE "//SYSPRINT DD  SYSOUT=*                                                 "
QUEUE "//SYSUDUMP DD  SYSOUT=*                                                 "
QUEUE "//IAMINFO  DD  SYSOUT=*                                                 "
QUEUE "//IN  DD DISP=SHR,DSN=E7432TS0."ODB".CASHFLW"SN"                        "
QUEUE "//OUT DD DISP=SHR,DSN=E7432TS0."NDB".CASHFLW"SN"                        "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    REPRO INFILE(IN) OUTFILE(OUT) REPLACE                               "
QUEUE "/*                                                                      "
QUEUE "//ULDELDEF EXEC PGM=IDCAMS                                              "
QUEUE "//SYSPRINT DD SYSOUT=*                                                  "
QUEUE "//SYSUDUMP DD SYSOUT=*                                                  "
QUEUE "//IAMOVRID DD *                                                         "
QUEUE "    CREATE DD=&ALLDD,DATACOMPRESS=YES,OVERFLOW=7000                     "
QUEUE "/*                                                                      "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    DELETE (E7432TS0."NDB".ULAMAST"SN") -                               "
QUEUE "       CLUSTER                                                          "
QUEUE "    IF MAXCC > 0 THEN DO                                                "
QUEUE "       SET MAXCC = 0                                                    "
QUEUE "       END                                                              "
QUEUE "    DEFINE CLUSTER(             -                                       "
QUEUE "    NAME(E7432TS0."NDB".ULAMAST"SN") -                                  "
QUEUE "           OWNER($IAM)          -                                       "
QUEUE "           VOL(* *)             -                                       "
QUEUE "           MGMTCLAS(D8)         -                                       "
QUEUE "           FSPC(20 10)          -                                       "
QUEUE "           KEYS(43 0)           -                                       "
QUEUE "           NOIMBED              -                                       "
QUEUE "           SPEED)               -                                       "
QUEUE "     DATA(NAME(E7432TS0."NDB".ULAMAST"SN".DATA) -                       "
QUEUE "           CYL(600 10)          -                                       "
QUEUE "           RECSZ(500 700)       -                                       "
QUEUE "           CISZ (8192))         -                                       "
QUEUE "     INDEX (NAME(E7432TS0."NDB".ULAMAST"SN".INDEX) -                    "
QUEUE "           CISZ (2048))                                                 "
QUEUE "/*                                                                      "
QUEUE "//ULAMCOPY EXEC PGM=IDCAMS,TIME=30                                      "
QUEUE "//SYSPRINT DD  SYSOUT=*                                                 "
QUEUE "//SYSUDUMP DD  SYSOUT=*                                                 "
QUEUE "//IAMINFO  DD  SYSOUT=*                                                 "
QUEUE "//IN  DD DISP=SHR,DSN=E7432TS0."ODB".ULAMAST"SN"                        "
QUEUE "//OUT DD DISP=SHR,DSN=E7432TS0."NDB".ULAMAST"SN"                        "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    REPRO INFILE(IN) OUTFILE(OUT) REPLACE                               "
QUEUE "/*                                                                      "
QUEUE "//FPDELDEF EXEC PGM=IDCAMS                                              "
QUEUE "//SYSPRINT DD  SYSOUT=*                                                 "
QUEUE "//SYSUDUMP DD  SYSOUT=*                                                 "
QUEUE "//IAMOVRID DD *                                                         "
QUEUE "    CREATE DD=&ALLDD,DATACOMPRESS=YES,OVERFLOW=9000                     "
QUEUE "/*                                                                      "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    DELETE (E7432TS0."NDB".FPRAMST"SN") -                               "
QUEUE "       CLUSTER                                                          "
QUEUE "    IF MAXCC > 0 THEN DO                                                "
QUEUE "       SET MAXCC = 0                                                    "
QUEUE "       END                                                              "
QUEUE "    DEFINE CLUSTER(                -                                    "
QUEUE "    NAME(E7432TS0."NDB".FPRAMST"SN") -                                  "
QUEUE "           VOL(* *)                -                                    "
QUEUE "           MGMTCLAS(D8)            -                                    "
QUEUE "           OWNER($IAM)             -                                    "
QUEUE "           FSPC(15 2)              -                                    "
QUEUE "           KEYS(30 0)              -                                    "
QUEUE "           IMBED                   -                                    "
QUEUE "           SPEED)                  -                                    "
QUEUE "    DATA -                                                              "
QUEUE "    (NAME(E7432TS0."NDB".FPRAMST"SN".DATA) -                            "
QUEUE "           CYL(440 200)            -                                    "
QUEUE "           RECSZ(500 700)          -                                    "
QUEUE "           CISZ (8192))            -                                    "
QUEUE "    INDEX -                                                             "
QUEUE "    (NAME(E7432TS0."NDB".FPRAMST"SN".INDEX) -                           "
QUEUE "           CISZ (1024))                                                 "
QUEUE "/*                                                                      "
QUEUE "//FPRACOPY EXEC PGM=IDCAMS,REGION=3500K,TIME=30                         "
QUEUE "//SYSPRINT DD  SYSOUT=*                                                 "
QUEUE "//SYSUDUMP DD  SYSOUT=*                                                 "
QUEUE "//IAMINFO  DD  SYSOUT=*                                                 "
QUEUE "//IN  DD DISP=SHR,DSN=E7432TS0."ODB".FPRAMST"SN"                        "
QUEUE "//OUT DD DISP=SHR,DSN=E7432TS0."NDB".FPRAMST"SN"                        "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    REPRO INFILE(IN) OUTFILE(OUT) REPLACE                               "
QUEUE "/*                                                                      "
QUEUE "//CVDELDEF EXEC PGM=IDCAMS                                              "
QUEUE "//SYSPRINT DD  SYSOUT=*                                                 "
QUEUE "//SYSUDUMP DD  SYSOUT=*                                                 "
QUEUE "//IAMOVRID DD *                                                         "
QUEUE "    CREATE DD=&ALLDD,DATACOMPRESS=YES,OVERFLOW=1500                     "
QUEUE "/*                                                                      "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    DELETE (E7432TS0."NDB".CASHVAL"SN") -                               "
QUEUE "       CLUSTER                                                          "
QUEUE "    IF MAXCC > 0 THEN DO                                                "
QUEUE "       SET MAXCC = 0                                                    "
QUEUE "       END                                                              "
QUEUE "        DEFINE CLUSTER(                -                                "
QUEUE "        NAME(E7432TS0."NDB".CASHVAL"SN") -                              "
QUEUE "               OWNER($IAM)             -                                "
QUEUE "               VOL(* *)                -                                "
QUEUE "               MGMTCLAS(D8)            -                                "
QUEUE "               KEYS(10 0)              -                                "
QUEUE "               RECORDSIZE(500 1412)    -                                "
QUEUE "               CYL(140 10)             -                                "
QUEUE "               FREESPACE(10 10)        -                                "
QUEUE "               IMBED                   -                                "
QUEUE "               SPEED)-                                                  "
QUEUE "         DATA -                                                         "
QUEUE "         (NAME(E7432TS0."NDB".CASHVAL"SN".DATA) -                       "
QUEUE "               CISZ(6144)) -                                            "
QUEUE "         INDEX -                                                        "
QUEUE "         (NAME(E7432TS0."NDB".CASHVAL"SN".INDEX) -                      "
QUEUE "               CISZ(1024))                                              "
QUEUE "/*                                                                      "
QUEUE "//CVALCOPY EXEC PGM=IDCAMS,TIME=30                                      "
QUEUE "//SYSPRINT DD  SYSOUT=*                                                 "
QUEUE "//SYSUDUMP DD  SYSOUT=*                                                 "
QUEUE "//IAMINFO  DD  SYSOUT=*                                                 "
QUEUE "//IN  DD DISP=SHR,DSN=E7432TS0."ODB".CASHVAL"SN"                        "
QUEUE "//OUT DD DISP=SHR,DSN=E7432TS0."NDB".CASHVAL"SN"                        "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    REPRO INFILE(IN) OUTFILE(OUT) REPLACE                               "
QUEUE "/*                                                                      "
QUEUE '$$'
ADDRESS TSO 'SUB * END($$)'
SAY "E7432TS0."ODB".CASHFLW"SN"<<==>>E7432TS0."NDB".CASHFLW"SN""
SAY "E7432TS0."ODB".ULAMAST"SN"<<==>>E7432TS0."NDB".ULAMAST"SN""
SAY "E7432TS0."ODB".FPRAMST"SN"<<==>>E7432TS0."NDB".FPRAMST"SN""
SAY "E7432TS0."ODB".CASHVAL"SN"<<==>>E7432TS0."NDB".CASHVAL"SN""
/*REXX*/
TODAY = DATE('E')
SAY TODAY
DD =SUBSTR(TODAY,01,02);MM =SUBSTR(TODAY,04,02);YY =SUBSTR(TODAY,07,02)
IF (MM>10) THEN;DO;LM=MM-1;END;ELSE;DO;LM='0'||MM-1;END
CDX = YY||MM||DD;CDXM= YY||LM||28
SAY "CDX" CDX
SAY "LM" LM
SAY "CDXM" CDXM
DF1= "'E7440PS.VAN30.FEEDBKV1.N"CDX-1"'";CF1 = SYSDSN(DF1) /='OK';
DF2= "'E7440PS.VAN30.FEEDBKV1.N"CDX-2"'";CF2 = SYSDSN(DF2) /='OK';
DF3= "'E7440PS.VAN30.FEEDBKV1.N"CDX-3"'";CF3 = SYSDSN(DF3) /='OK';
DF4= "'E7440PS.VAN30.FEEDBKV1.N"CDX-4"'";CF4 = SYSDSN(DF4) /='OK';
DF5= "'E7440PS.VAN30.FEEDBKV1.N"CDXM"'";CF5 = SYSDSN(DF5) /='OK';
DF6= "'E7440PS.VAN30.FEEDBKV1.N"CDXM+1"'";CF6 = SYSDSN(DF6) /='OK';
DF7= "'E7440PS.VAN30.FEEDBKV1.N"CDXM+2"'";CF7 = SYSDSN(DF7) /='OK';
DF8= "'E7440PS.VAN30.FEEDBKV1.N"CDXM+3"'";CF8 = SYSDSN(DF8) /='OK';
SELECT
WHEN(CF8=0)THEN;DO;LDX=CDXM+3;END;
WHEN(CF7=0)THEN;DO;LDX=CDXM+2;END;
WHEN(CF6=0)THEN;DO;LDX=CDXM+1;END;
WHEN(CF5=0)THEN;DO;LDX=CDXM;END;
WHEN(CF1=0)THEN;DO;LDX=CDX-1;END;
WHEN(CF2=0)THEN;DO;LDX=CDX-2;END;
WHEN(CF3=0)THEN;DO;LDX=CDX-3;END;
WHEN(CF4=0)THEN;DO;LDX=CDX-4;END;
OTHERWISE;LDX=CDX-1         ;END;
SAY LDX ":" CDX ":"
//E7445EXT JOB ('E7440T0',,99),TIME=(,30),MSGCLASS=O,NOTIFY=&SYSUID     JOB04039
/*JOBPARM SYSAFF=N090
//**********************************************************************
//*
//*  1ST ==> RUN THE RESTORES FOR THE SECTION OF THE UPDATE THAT ABENDED
//*  2ND ==> CHANGE 1 TO THE SECTION OF THE CLPROD NEEDED
//*    *** - DO NOT SAVE THIS JOB SO THE 1 REMAINS FOR NEXT TIME.
//*  3RD ==> STEP1 - CHANGE POLICY NUMBER & COMPANY CODE
//*  4TH ==> ROUTE JOB AND TYPE 'CAN' NOT PF3
//*  203232477UMHJ - CHILD RIDER
//*  881077539UMHA - 2 STIR
//*  204004324UMHA - ADDITIONAL INSURED
//*  924603438UMHA - ADDITIONAL INSURED
//*  204004324UMHB - CHILD
//*  997107164UMHA - MULTIPLE OWNERS
//*
//*  E7445TT0.VAN15.RESTRICT.EXPN.CLPROD
//*
//**********************************************************************
//STEP11B  EXEC PGM=FILEAID,TIME=15
//SYSPRINT DD SYSOUT=*
//SYSUDUMP DD SYSOUT=*
//SYSTOTAL DD SYSOUT=*
//DD01     DD DSN=E7445TT0.JUDYT.CLPROD,
//         DISP=SHR
//DD01O    DD DSN=&&CLPROD,
//         DISP=(NEW,PASS,DELETE),
//         SPACE=(CYL,(5,1),RLSE),
//         UNIT=SYSDA,
//         DCB=(RECFM=VB,LRECL=20480,BLKSIZE=0)
//********************************************************************
//*  THE CARD BELOW SHOULD HAVE 20 CHARACTERS BETWEEN THE QUOTES
//*  COLUMN 19 TO 20 - SEGMENT TO ALWAYS BE  'DB'
//******************12345678901234567890******************************
//SYSIN    DD *
$$DD01 COPY   KEY=C'021    993302124B1AA',OUT=1
$$DD01 COPY   KEY=C'021    993302124B1EA',OUT=12
$$DD01 COPY   KEY=C'021    993302124B1JD',OUT=13
//*
//* THIS STEP WILL CREATE A TEMPORARY RESTRICT.CLPROD FILE
//*
//STEP2    EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//*
//SYSIN    DD *
  DELETE            (E7445TT0.VAN15.RESTRICT.CLPROD) CLUSTER
   IF MAXCC > 0 THEN DO
      SET MAXCC = 0
      END
  DEFINE CLUSTER                           -
         (NAME(E7445TT0.VAN15.RESTRICT.CLPROD)      -
          MGMTCLAS(D32M)                   -
          RECORDSIZE(362 20472)            -
          FREESPACE(15 5)                  -
          OWNER($IAM)                      -
          SHR(2 3)                         -
          UNIQUE                           -
          NOIMBED                          -
          SPEED                            -
          VOLUMES(* * *)                   -
          KEYS(24 0)                       -
          CYL(5 2))                        -
  DATA                                    -
      (NAME(E7445TT0.VAN15.RESTRICT.CLPROD.DATA)     -
         CISZ(20480))                     -
  INDEX                                   -
      (NAME(E7445TT0.VAN15.RESTRICT.CLPROD.INDEX) -
         CISZ(512))
/*
//*
//* THIS STEP WILL COPY THE RESTRICTED POLICY TO RESTRICT.CLPROD FILE
//*
//STEP3    EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//INDD01   DD DSN=&&CLPROD,DISP=OLD
//OUTDD01  DD DSN=E7445TT0.VAN15.RESTRICT.CLPROD,DISP=SHR
//SYSIN    DD *
      REPRO    INFILE(INDD01)     OUTFILE(OUTDD01)
/*
//*
//* THIS STEP WILL EXPAND THE JIMBR.RESTRICT.CLPROD
//*
//STEP4    EXEC E744111P,
//*   SYMBOLICS TO BE SET FOR FILE TO BE DECOMPRESSED
//         JCLCLS='*',
//         RUNLOG='*',
//         PARMLST='G',             ** FOR CLPROD/OTHERS
//         DNAME='CLPROD',          ** FOR CLPROD/OTHERS
//         VFLIDI=E7445TT0,         ** VSAM QUAL - INPUT
//         VFLIDO=E7445TT0,         ** VSAM QUAL - OUTPUT
//**       VAN30I='JIMBR.RESTRICT', ** INPUT DSN QUALIFIER
//         VAN30O='VAN15.RESTRICT'  ** OUTPUT DSN QUALIFIER
//STEP02.CEINPUT DD DSN=E7445TT0.VAN15.RESTRICT.CLPROD,DISP=SHR
//*
//* THIS STEP WILL UPDATE THE JIMBR.RESTRICT CODE
//*
//*
//* THIS STEP WILL UPDATE THE EXPNFIX CODE ON EXPANDED EXPNFIX.CLPROD
//*
//STEP5    EXEC PGM=FILEAID
//SYSPRINT DD SYSOUT=*
//DD01     DD DSN=E7445TT0.VAN15.RESTRICT.EXPN.CLPROD,DISP=SHR
//DD01O    DD DSN=E7445TT0.VAN15.RESTRICT.EXPN.CLPROD,DISP=SHR
//SYSIN    DD  *
$$DD01 UPDATE IF=(19,EQ,C'DB'),
              REPL=(102,EQ,C'M',C' ')
/*
//****        REPL=(132,C' '),
//*****       REPL=(780,X'00000000000C')
//*              REPL=(521,C'20040428')
//*
//E7470EXT JOB ('E7440T0',,99),TIME=(,30),MSGCLASS=O,NOTIFY=&SYSUID     00010005
/*JOBPARM SYSAFF=N090                                                   00020000
//*                                                                     00020104
//**                                                                    00020204
//** C ALL IB656 TO NEW EXPN FILE NAME                                  00021003
//*POLICY KEY = 021    996310656D1DB   CHANGE AS NEEDED                 00022003
//**                                                                    00023003
//**                                                                    00024003
//**********************************************************************00030000
//*                                                                     00040000
//*  1ST ==> RUN THE RESTORES FOR THE SECTION OF THE UPDATE THAT ABENDED00050000
//*  2ND ==> CHANGE 1 TO THE SECTION OF THE CLPROD NEEDED               00060000
//*    *** - DO NOT SAVE THIS JOB SO THE 1 REMAINS FOR NEXT TIME.       00070000
//*  3RD ==> STEP1 - CHANGE POLICY NUMBER & COMPANY CODE                00080000
//*  4TH ==> ROUTE JOB AND TYPE 'CAN' NOT PF3                           00090000
//*  203232477UMHJ - CHILD RIDER                                        00100000
//*  881077539UMHA - 2 STIR                                             00110000
//*  204004324UMHA - ADDITIONAL INSURED                                 00120000
//*  924603438UMHA - ADDITIONAL INSURED                                 00130000
//*  204004324UMHB - CHILD                                              00140000
//*  997107164UMHA - MULTIPLE OWNERS                                    00150000
//*                                                                     00160000
//*  E7445TT0.IB656.RESTRICT.EXPN.CLPROD                                00170000
//*                                                                     00180000
//**********************************************************************00190000
//STEP11B  EXEC PGM=FILEMGR,TIME=15                                     00200002
//SYSPRINT DD SYSOUT=*                                                  00210000
//SYSUDUMP DD SYSOUT=*                                                  00220000
//SYSTOTAL DD SYSOUT=*                                                  00230000
//DD01     DD DSN=E7445PS0.VAN15.CLPROD,                                00240000
//         DISP=SHR                                                     00250000
//DD01O    DD DSN=&&CLPROD,                                             00260000
//         DISP=(NEW,PASS,DELETE),                                      00270000
//         SPACE=(CYL,(5,1),RLSE),                                      00280000
//         UNIT=SYSDA,                                                  00290000
//         DCB=(RECFM=VB,LRECL=20480,BLKSIZE=0)                         00300000
//********************************************************************  00310000
//*  THE CARD BELOW SHOULD HAVE 20 CHARACTERS BETWEEN THE QUOTES        00320000
//*  COLUMN 19 TO 20 - SEGMENT TO ALWAYS BE  'DB'                       00330000
//******************12345678901234567890******************************  00340000
//SYSIN    DD *                                                         00350000
$$FILEM DSC  INPUT=DD01,                                                00361002
$$FILEM   KEY='021    996310656D1DB',                                   00362002
$$FILEM      OUTPUT=DD01O,                                              00363002
$$FILEM      NLRECS=1                                                   00364002
*$$DD01 COPY   KEY=C'021    993302124B1EA',OUT=12                       00370000
*$$DD01 COPY   KEY=C'021    993302124B1JD',OUT=13                       00380000
//*                                                                     00390000
//* THIS STEP WILL CREATE A TEMPORARY RESTRICT.CLPROD FILE              00400000
//*                                                                     00410000
//STEP2    EXEC PGM=IDCAMS                                              00420000
//SYSPRINT DD SYSOUT=*                                                  00430000
//*                                                                     00440000
//SYSIN    DD *                                                         00450000
  DELETE            (E7445TT0.IB656.RESTRICT.CLPROD) CLUSTER            00460000
   IF MAXCC > 0 THEN DO                                                 00470000
      SET MAXCC = 0                                                     00480000
      END                                                               00490000
  DEFINE CLUSTER                           -                            00500000
         (NAME(E7445TT0.IB656.RESTRICT.CLPROD)      -                   00510000
          MGMTCLAS(D32M)                   -                            00520000
          RECORDSIZE(362 20472)            -                            00530000
          FREESPACE(15 5)                  -                            00540000
          OWNER($IAM)                      -                            00550000
          SHR(2 3)                         -                            00560000
          UNIQUE                           -                            00570000
          NOIMBED                          -                            00580000
          SPEED                            -                            00590000
          VOLUMES(* * *)                   -                            00600000
          KEYS(24 0)                       -                            00610000
          CYL(5 2))                        -                            00620000
  DATA                                    -                             00630000
      (NAME(E7445TT0.IB656.RESTRICT.CLPROD.DATA)     -                  00640000
         CISZ(20480))                     -                             00650000
  INDEX                                   -                             00660000
      (NAME(E7445TT0.IB656.RESTRICT.CLPROD.INDEX) -                     00670000
         CISZ(512))                                                     00680000
/*                                                                      00690000
//*                                                                     00700000
//* THIS STEP WILL COPY THE RESTRICTED POLICY TO RESTRICT.CLPROD FILE   00710000
//*                                                                     00720000
//STEP3    EXEC PGM=IDCAMS                                              00730000
//SYSPRINT DD SYSOUT=*                                                  00740000
//INDD01   DD DSN=&&CLPROD,DISP=OLD                                     00750000
//OUTDD01  DD DSN=E7445TT0.IB656.RESTRICT.CLPROD,DISP=SHR               00760000
//SYSIN    DD *                                                         00770000
      REPRO    INFILE(INDD01)     OUTFILE(OUTDD01)                      00780000
/*                                                                      00790000
//*                                                                     00800000
//* THIS STEP WILL EXPAND THE JIMBR.RESTRICT.CLPROD                     00810000
//*                                                                     00820000
//STEP4    EXEC E744111P,                                               00830000
//*   SYMBOLICS TO BE SET FOR FILE TO BE DECOMPRESSED                   00840000
//         JCLCLS='*',                                                  00850000
//         RUNLOG='*',                                                  00860000
//         PARMLST='G',             ** FOR CLPROD/OTHERS                00870000
//         DNAME='CLPROD',          ** FOR CLPROD/OTHERS                00880000
//         VFLIDI=E7445TT0,         ** VSAM QUAL - INPUT                00890000
//         VFLIDO=E7445TT0,         ** VSAM QUAL - OUTPUT               00900000
//**       VAN30I='JIMBR.RESTRICT', ** INPUT DSN QUALIFIER              00910000
//         VAN30O='IB656.RESTRICT'  ** OUTPUT DSN QUALIFIER             00920000
//STEP02.CEINPUT DD DSN=E7445TT0.IB656.RESTRICT.CLPROD,DISP=SHR         00930000
//*                                                                     00940000
//* THIS STEP WILL UPDATE THE JIMBR.RESTRICT CODE                       00950000
//E7470EXT JOB ('E7440T2',,99),TIME=(1),MSGCLASS=O,NOTIFY=&SYSUID       00010008
/*JOBPARM SYSAFF=A090                                                   00020000
//**********************************************************************00030000
//*                                                                     00040000
//*  1ST ==> RUN THE RESTORES FOR THE SECTION OF THE UPDATE THAT ABENDED00050000
//*  2ND ==> CHANGE 3 TO THE SECTION OF THE TRXHIS NEEDED               00060000
//*    *** - DO NOT SAVE THIS JOB SO THE 3 REMAINS FOR NEXT TIME.       00070000
//*  3RD ==> STEP1 - CHANGE POLICY NUMBER & COMPANY CODE                00080000
//*  4TH ==> ROUTE JOB AND TYPE 'CAN' NOT PF3                           00090000
//***  E7440TT0.POL1.CLPROD4                                            00100000
//*                                                                     00110000
//**********************************************************************00120000
//STEP1    EXEC PGM=FILEMGR,TIME=15                                     00130005
//SYSPRINT DD SYSOUT=*                                                  00140000
//SYSUDUMP DD SYSOUT=*                                                  00150000
//SYSTOTAL DD SYSOUT=*                                                  00160000
//DD01     DD DSN=E7440PS0.VAN30.DIRECT1,                               00170007
//        DISP=SHR                                                      00180005
//DD01O    DD DSN=&&TRXHIS,                                             00190000
//         DISP=(NEW,PASS,DELETE),                                      00200000
//         SPACE=(CYL,(5,1),RLSE),                                      00210000
//         UNIT=SYSDA,                                                  00220000
//         DCB=(RECFM=VB,LRECL=20480,BLKSIZE=0)                         00230000
//********************************************************************  00240000
//*  THE CARD BELOW SHOULD HAVE 20 CHARACTERS BETWEEN THE QUOTES        00250000
//*  COLUMN 19 TO 20 - SEGMENT TO ALWAYS BE  'DB'                       00260000
//******************12345678901234567890******************************  00270000
//SYSIN    DD *                                                         00280000
$$FILEM DSC  INPUT=DD01,                                                00290005
$$FILEM   KEY='018205040145UMSEHOGA',                                   00291005
$$FILEM      OUTPUT=DD01O,                                              00292005
$$FILEM      NLRECS=1                                                   00293005
//*                                                                     00300000
//* THIS STEP WILL CREATE A TEMPORARY RESTRICT.TRXHIS FILE              00310000
//*                                                                     00320000
//STEP2    EXEC PGM=IDCAMS                                              00330000
//SYSPRINT DD SYSOUT=*                                                  00340000
//*                                                                     00350000
//SYSIN    DD *                                                         00360000
  DELETE            (E7440TT0.POL1.CLPROD4) CLUSTER                     00370000
   IF MAXCC > 0 THEN DO                                                 00380000
      SET MAXCC = 0                                                     00390000
      END                                                               00400000
   DEFINE CLUSTER                          -                            00410000
          (NAME(E7440TT0.POL1.CLPROD4)       -                          00420000
          MGMTCLAS(D430M)                  -                            00430000
          VOLUMES(* * * * *  * *)          -                            00440000
          RECORDSIZE(1862 20472)           -                            00450000
          FREESPACE(10 10)                 -                            00460000
          OWNER($IAM)                      -                            00470000
          SHR(3 3)                         -                            00480000
          UNIQUE                           -                            00490000
          NOIMBED                          -                            00500000
          SPEED                            -                            00510000
          KEYS(24 0)                       -                            00520000
          CYL(5 5))                    -                                00530000
   DATA                                    -                            00540000
       (NAME(E7440TT0.POL1.CLPROD4.DATA)     -                          00550000
          CISZ(20480))                     -                            00560000
   INDEX                                   -                            00570000
       (NAME(E7440TT0.POL1.CLPROD4.INDEX) -                             00580000
          CISZ(512))                                                    00590000
/*                                                                      00600000
//*                                                                     00610000
//* THIS STEP WILL COPY THE RESTRICTED POLICY TO RESTRICT.TRXHIS  FILE  00620000
//*                                                                     00630000
//STEP3    EXEC PGM=IDCAMS                                              00640000
//SYSPRINT DD SYSOUT=*                                                  00650000
//INDD01   DD DSN=&&TRXHIS,DISP=OLD                                     00660000
//OUTDD01  DD DSN=E7440TT0.POL1.CLPROD4,DISP=SHR                        00670000
//SYSIN    DD *                                                         00680000
      REPRO    INFILE(INDD01)     OUTFILE(OUTDD01)                      00690000
/*                                                                      00700000
//*                                                                     00710000
//* THIS STEP WILL EXPAND THE TEMP.TRXHIS                               00720000
//*                                                                     00730000
//STEP4    EXEC E744111P,                                               00740000
//*   SYMBOLICS TO BE SET FOR FILE TO BE DECOMPRESSED                   00750000
//         JCLCLS='*',                                                  00760000
//         RUNLOG='*',                                                  00770000
//         PARMLST='G',             ** FOR TRXHIS/OTHERS                00780000
//         DNAME='CLPROD',        ** FOR TRXHIS/OTHERS                  00790000
//         VFLIDI=E7440TT0,         ** VSAM QUAL - INPUT                00800000
//         VFLIDO=E7440TT0,         ** VSAM QUAL - OUTPUT               00810000
//         VAN30O=IU076                                                 00820000
//*        POL1O='POL1'               ** OUTPUT DSN QUALIFIER           00830000
//STEP02.CEINPUT DD DSN=E7440TT0.POL1.CLPROD4,DISP=SHR                  00840000
//E7440EXT JOB ('E7440T0',,99),TIME=(,30),MSGCLASS=O,NOTIFY=&SYSUID     00010001
/*JOBPARM SYSAFF=N090                                                   00020000
//**********************************************************************00030000
//*                                                                     00040000
//*  1ST ==> RUN THE RESTORES FOR THE SECTION OF THE UPDATE THAT ABENDED00050000
//*  2ND ==> CHANGE 1 TO THE SECTION OF THE SCHED NEEDED                00060000
//*    *** - DO NOT SAVE THIS JOB SO THE 1 REMAINS FOR NEXT TIME.       00070000
//*  3RD ==> STEP1 - CHANGE POLICY NUMBER & COMPANY CODE                00080000
//*  4TH ==> ROUTE JOB AND TYPE 'CAN' NOT PF3                           00090000
//*  203232477UMHJ - CHILD RIDER                                        00100000
//*  881077539UMHA - 2 STIR                                             00110000
//*  204004324UMHA - ADDITIONAL INSURED                                 00120000
//*  924603438UMHA - ADDITIONAL INSURED                                 00130000
//*  204004324UMHB - CHILD                                              00140000
//*  997107164UMHA - MULTIPLE OWNERS                                    00150000
//*                                                                     00160000
//*  E7445TT0.IB656.RESTRICT.EXPN.SCHED                                 00170000
//*                                                                     00180000
//**********************************************************************00190000
//STEP11B  EXEC PGM=FILEAID,TIME=15                                     00200000
//SYSPRINT DD SYSOUT=*                                                  00210000
//SYSUDUMP DD SYSOUT=*                                                  00220000
//SYSTOTAL DD SYSOUT=*                                                  00230000
//DD01     DD DSN=E7445PS0.VAN15.SCHED,                                 00240000
//         DISP=SHR                                                     00250000
//DD01O    DD DSN=&&SCHED,                                              00260000
//         DISP=(NEW,PASS,DELETE),                                      00270000
//         SPACE=(CYL,(5,1),RLSE),                                      00280000
//         UNIT=SYSDA,                                                  00290000
//         DCB=(RECFM=VB,LRECL=20480,BLKSIZE=0)                         00300000
//********************************************************************  00310000
//*  THE CARD BELOW SHOULD HAVE 20 CHARACTERS BETWEEN THE QUOTES        00320000
//*  COLUMN 19 TO 20 - SEGMENT TO ALWAYS BE  'DB'                       00330000
//******************12345678901234567890******************************  00340000
//SYSIN    DD *                                                         00350000
$$DD01 COPY   KEY=C'021    996310656D1LA',OUT=1                         00360000
*$$DD01 COPY   KEY=C'021    993302124B1EA',OUT=12                       00370000
*$$DD01 COPY   KEY=C'021    993302124B1JD',OUT=13                       00380000
//*                                                                     00390000
//* THIS STEP WILL CREATE A TEMPORARY RESTRICT.SCHED FILE               00400000
//*                                                                     00410000
//STEP2    EXEC PGM=IDCAMS                                              00420000
//SYSPRINT DD SYSOUT=*                                                  00430000
//*                                                                     00440000
//SYSIN    DD *                                                         00450000
  DELETE            (E7445TT0.IB656.RESTRICT.SCHED) CLUSTER             00460000
   IF MAXCC > 0 THEN DO                                                 00470000
      SET MAXCC = 0                                                     00480000
      END                                                               00490000
  DEFINE CLUSTER                           -                            00500000
         (NAME(E7445TT0.IB656.RESTRICT.SCHED)       -                   00510000
          MGMTCLAS(D32M)                   -                            00520000
          RECORDSIZE(362 20472)            -                            00530000
          FREESPACE(15 5)                  -                            00540000
          OWNER($IAM)                      -                            00550000
          SHR(2 3)                         -                            00560000
          UNIQUE                           -                            00570000
          NOIMBED                          -                            00580000
          SPEED                            -                            00590000
          VOLUMES(* * *)                   -                            00600000
          KEYS(24 0)                       -                            00610000
          CYL(5 2))                        -                            00620000
  DATA                                    -                             00630000
      (NAME(E7445TT0.IB656.RESTRICT.SCHED.DATA)      -                  00640000
         CISZ(20480))                     -                             00650000
  INDEX                                   -                             00660000
      (NAME(E7445TT0.IB656.RESTRICT.SCHED.INDEX) -                      00670000
         CISZ(512))                                                     00680000
/*                                                                      00690000
//*                                                                     00700000
//* THIS STEP WILL COPY THE RESTRICTED POLICY TO RESTRICT.SCHED FILE    00710000
//*                                                                     00720000
//STEP3    EXEC PGM=IDCAMS                                              00730000
//SYSPRINT DD SYSOUT=*                                                  00740000
//INDD01   DD DSN=&&SCHED,DISP=OLD                                      00750000
//OUTDD01  DD DSN=E7445TT0.IB656.RESTRICT.SCHED,DISP=SHR                00760000
//SYSIN    DD *                                                         00770000
      REPRO    INFILE(INDD01)     OUTFILE(OUTDD01)                      00780000
/*                                                                      00790000
//*                                                                     00800000
//* THIS STEP WILL EXPAND THE JIMBR.RESTRICT.SCHED                      00810000
//*                                                                     00820000
//STEP4    EXEC E744111P,                                               00830000
//*   SYMBOLICS TO BE SET FOR FILE TO BE DECOMPRESSED                   00840000
//         JCLCLS='*',                                                  00850000
//         RUNLOG='*',                                                  00860000
//         PARMLST='G',             ** FOR SCHED/OTHERS                 00870000
//         DNAME='SCHED',           ** FOR SCHED/OTHERS                 00880000
//         VFLIDI=E7445TT0,         ** VSAM QUAL - INPUT                00890000
//         VFLIDO=E7445TT0,         ** VSAM QUAL - OUTPUT               00900000
//**       VAN30I='JIMBR.RESTRICT', ** INPUT DSN QUALIFIER              00910000
//         VAN30O='IB656.RESTRICT'  ** OUTPUT DSN QUALIFIER             00920000
//STEP02.CEINPUT DD DSN=E7445TT0.IB656.RESTRICT.SCHED,DISP=SHR          00930000
//*                                                                     00940000
//* THIS STEP WILL UPDATE THE JIMBR.RESTRICT CODE                       00950000
//E7445EXT JOB ('E7440T0',,99),TIME=(,30),MSGCLASS=O,NOTIFY=&SYSUID     00010000
/*JOBPARM SYSAFF=N090                                                   00020000
//**********************************************************************00030000
//*                                                                     00040000
//*  1ST ==> RUN THE RESTORES FOR THE SECTION OF THE UPDATE THAT ABENDED00050000
//*  2ND ==> CHANGE 1 TO THE SECTION OF THE TRXHIST NEEDED              00060000
//*    *** - DO NOT SAVE THIS JOB SO THE 1 REMAINS FOR NEXT TIME.       00070000
//*  3RD ==> STEP1 - CHANGE POLICY NUMBER & COMPANY CODE                00080000
//*  4TH ==> ROUTE JOB AND TYPE 'CAN' NOT PF3                           00090000
//*  203232477UMHJ - CHILD RIDER                                        00100000
//*  881077539UMHA - 2 STIR                                             00110000
//*  204004324UMHA - ADDITIONAL INSURED                                 00120000
//*  924603438UMHA - ADDITIONAL INSURED                                 00130000
//*  204004324UMHB - CHILD                                              00140000
//*  997107164UMHA - MULTIPLE OWNERS                                    00150000
//*                                                                     00160000
//*  E7445TT0.IB656.RESTRICT.EXPN.TRXHIST                               00170000
//*                                                                     00180000
//**********************************************************************00190000
//STEP11B  EXEC PGM=FILEAID,TIME=15                                     00200000
//SYSPRINT DD SYSOUT=*                                                  00210000
//SYSUDUMP DD SYSOUT=*                                                  00220000
//SYSTOTAL DD SYSOUT=*                                                  00230000
//DD01     DD DSN=E7445PS0.VAN15.TRXHIST,                               00240000
//         DISP=SHR                                                     00250000
//DD01O    DD DSN=&&TRXHIST,                                            00260000
//         DISP=(NEW,PASS,DELETE),                                      00270000
//         SPACE=(CYL,(5,1),RLSE),                                      00280000
//         UNIT=SYSDA,                                                  00290000
//         DCB=(RECFM=VB,LRECL=20480,BLKSIZE=0)                         00300000
//********************************************************************  00310000
//*  THE CARD BELOW SHOULD HAVE 20 CHARACTERS BETWEEN THE QUOTES        00320000
//*  COLUMN 19 TO 20 - SEGMENT TO ALWAYS BE  'DB'                       00330000
//******************12345678901234567890******************************  00340000
//SYSIN    DD *                                                         00350000
$$DD01 COPY   KEY=C'021    996310656D1KA',OUT=4000                      00360000
*$$DD01 COPY   KEY=C'021    993302124B1EA',OUT=12                       00370000
*$$DD01 COPY   KEY=C'021    993302124B1JD',OUT=13                       00380000
//*                                                                     00390000
//* THIS STEP WILL CREATE A TEMPORARY RESTRICT.TRXHIST FILE             00400000
//*                                                                     00410000
//STEP2    EXEC PGM=IDCAMS                                              00420000
//SYSPRINT DD SYSOUT=*                                                  00430000
//*                                                                     00440000
//SYSIN    DD *                                                         00450000
  DELETE            (E7445TT0.IB656.RESTRICT.TRXHIST) CLUSTER           00460000
   IF MAXCC > 0 THEN DO                                                 00470000
      SET MAXCC = 0                                                     00480000
      END                                                               00490000
  DEFINE CLUSTER                           -                            00500000
         (NAME(E7445TT0.IB656.RESTRICT.TRXHIST)     -                   00510000
          MGMTCLAS(D32M)                   -                            00520000
          RECORDSIZE(362 20472)            -                            00530000
          FREESPACE(15 5)                  -                            00540000
          OWNER($IAM)                      -                            00550000
          SHR(2 3)                         -                            00560000
          UNIQUE                           -                            00570000
          NOIMBED                          -                            00580000
          SPEED                            -                            00590000
          VOLUMES(* * *)                   -                            00600000
          KEYS(24 0)                       -                            00610000
          CYL(5 2))                        -                            00620000
  DATA                                    -                             00630000
      (NAME(E7445TT0.IB656.RESTRICT.TRXHIST.DATA)    -                  00640000
         CISZ(20480))                     -                             00650000
  INDEX                                   -                             00660000
      (NAME(E7445TT0.IB656.RESTRICT.TRXHIST.INDEX) -                    00670000
         CISZ(512))                                                     00680000
/*                                                                      00690000
//*                                                                     00700000
//* THIS STEP WILL COPY THE RESTRICTED POLICY TO RESTRICT.TRXHIST FILE  00710000
//*                                                                     00720000
//STEP3    EXEC PGM=IDCAMS                                              00730000
//SYSPRINT DD SYSOUT=*                                                  00740000
//INDD01   DD DSN=&&TRXHIST,DISP=OLD                                    00750000
//OUTDD01  DD DSN=E7445TT0.IB656.RESTRICT.TRXHIST,DISP=SHR              00760000
//SYSIN    DD *                                                         00770000
      REPRO    INFILE(INDD01)     OUTFILE(OUTDD01)                      00780000
/*                                                                      00790000
//*                                                                     00800000
//* THIS STEP WILL EXPAND THE JIMBR.RESTRICT.TRXHIST                    00810000
//*                                                                     00820000
//STEP4    EXEC E744111P,                                               00830000
//*   SYMBOLICS TO BE SET FOR FILE TO BE DECOMPRESSED                   00840000
//         JCLCLS='*',                                                  00850000
//         RUNLOG='*',                                                  00860000
//         PARMLST='G',             ** FOR TRXHIST/OTHERS               00870000
//         DNAME='TRXHIST',         ** FOR TRXHIST/OTHERS               00880000
//         VFLIDI=E7445TT0,         ** VSAM QUAL - INPUT                00890000
//         VFLIDO=E7445TT0,         ** VSAM QUAL - OUTPUT               00900000
//**       VAN30I='JIMBR.RESTRICT', ** INPUT DSN QUALIFIER              00910000
//         VAN30O='IB656.RESTRICT'  ** OUTPUT DSN QUALIFIER             00920000
//STEP02.CEINPUT DD DSN=E7445TT0.IB656.RESTRICT.TRXHIST,DISP=SHR        00930000
//*                                                                     00940000
//* THIS STEP WILL UPDATE THE JIMBR.RESTRICT CODE                       00950000
//E7470C0T  JOB  ('E0082AG'),TIME=(,30),MSGCLASS=O,NOTIFY=&SYSUID,
//     CLASS=T
/*JOBPARM S=A090
//*CHG GL0066 CURENT DATE ,GL0067 PRIOR CYCLE DATE
//* TZ106 INTO YOUR DB NAME
//* ==> C ALL 220407 YYMMDD
//* ==> C ALL 220406 YYMMDD
//* ==> C ALL TZ106 XXXXX
//E7441C0P EXEC E7441C0P,
//         DSN=E7440TS,
//         DSN1=E7440TS,
//         DSN2=E7440TS,
//         GT=GT,
//         GT1=GT,
//         GT2=GT,
//         GT3=GT,
//         JCLCLS=O,
//         DUMPCLS=O,
//         RUNLOG=O,
//         TABLES='E7440PS0.VAN30.TABLES',
//         VDSN1=E7440TT0,
//         VDSN=E7440TT0,
//         VAN30=TZ106,
//         DEST2=,
//         COND.SC0P0055=(0,LE),
//         COND.SC0P0060=(0,LE),
//         GL0066=220407,                     CURRENT DATE
//         GL0067=220406                      PRIOR WORKDAY
//*
//SC0P0020.SYSIN   DD  *
 REPRO INFILE(INDD1) OUTFILE(OUTDD1)
/*
//SC0P0020.INDD1   DD DSN=E7440TT0.BSK.DATACOLL,DISP=SHR
//SC0P0050.VAN1DAT DD DSN=E7440TT0.BSK.DATACOLL,DISP=SHR
//E7445AST  JOB ('E7445TD',,99),TIME=(,9),MSGCLASS=O,NOTIFY=&SYSUID     00000010
/*JOBPARM S=N090
//*PROCLIB  JCLLIB ORDER=(K9900P.STGT@A.VABR.#000358.PRC)
//*PROCLIB  JCLLIB ORDER=(E7445TS.VABR.SYSTEST.USERPROC)
//E7445ASP  EXEC  E7445ASP,                                             00000030
//* DSNI=E7445TS,
//* PARMLIB2='E7445PS.VAN15.PARMLIB',
//* LIB00='K9900P.STGT@A.VABR.#000532.NLB',
//  CKI='NO ',                                                          00000030
//  DSNO='E7445TS',                                                     00000030
//  VFLID=E7445TT0,                                                     00000010
//* VFLID=E7445TS0,                                                     00000010
//* VAN15='VAN15',                                                      00000030
//  VAN15='JUDYT',                                                      00000030
//  MGMTCLS=D32,                                                        00000030
//  DUMPCLS=*,                                                          00000030
//  JCLCLS=*,                                                           00000030
//  GL0066=120731                                                        0000004
//*SORT1.SORTIN  DD DSN=E1172TS.E1172Y1P.E1172VTG.S100324.JCM0324,      00000070
//SORT1.SORTIN  DD DSN=E1172PS.E1172Y1P.E1172VTG.S120731,               00000070
//*SORT1.SORTIN  DD DSN=E7445TS.E1172Y1P.E1172VTG.ISSUE.S120731,        00000070
// DISP=SHR                                                             00000070
//*ASISTEP.VSAMFLE DD DSN=E7445TS.LIB.JZ.PARMLIB(VSAMREAD),DISP=SHR
//E7445CAT JOB ('SMTEST',,999),TIME=(,6),MSGCLASS=O,NOTIFY=&SYSUID
/*JOBPARM S=N090
//E7445CAP EXEC  E7445CAP,
//         JCLCLS='*',                  ** JCL OUTPUT CLASS
//         BATSPC='(CYL,(10,10),RLSE)',
//         RUNLOG='*',                  ** RUNLOG OUTPUT CLASS
//         DUMPCLS='*',                 ** ABEND OUTPUT CLASS
//         MGMTCLS=M32,
//         DSN1='E7445TS',
//*        VAN15=KAT,
//*        VAN15=VAN15,
//         VAN15=JUDYT,
//         VFLID='E7445TT0',
//*        TABLE='E7445TT0.FER09.TABLES',
//         RRIND='LE',                  ** RESTORE CONTROL & UVHIST
//         GL1923='2120731',
//         GL0917='2120730',             ** PRIOR DAY WITH CENT UVHIST
//         GL0066=120731,
//         GL0067=120730                ** RESTORE OF CONTROL & UVHIST
//*PBE0145.SORTIN DD DSN=E7445TS.VABR.CHG.AACARD.C0P.N000114,
//*REST025.INPUT1 DD DSN=E7445PS.VAN15.CONTROL.AAP.N001204,DISP=SHR
//*REST050.INPUT1 DD DSN=E7445PS.VAN15.UVHIST.AAP.N001204,DISP=SHR
//*PBE0145.SORTIN DD DSN=E7445TS.VAN15.AACARD.C0P.N110624,
//PBE0145.SORTIN DD DSN=E7445PS.VAN15.AACARD.C0P.N120731,
//  DISP=SHR
//E7445DAT JOB ('SMKAM',,9999),TIME=(,29),MSGCLASS=O,NOTIFY=&SYSUID
//*PROCLIB  JCLLIB ORDER=(SYS1.USERPRO2)
/*JOBPARM S=N090
//E7445DAP EXEC  E7445DAP,
//*        LIB01='E7445TS.VABR.VAN15.LOADLIB',
//*        LIB01='K9900P.VABR.USERLINK.MINUS1',
//*        LIB01='K9900P.STGT@A.VABR.#000406.NLB',
//*        TABLE='E7445TT0.FER09.TABLES',
//         VDSNP=E7445TT0,
//         VAN15=JUDYT,
//*        VAN15=VAN15,
//*        DSN1=E7445TS,
//         DSN1='E7445TS',
//         MGMTCLS=D32,
//         RUNLOG='*',
//*        RPTCLS='*',
//*        FORM1='1111',
//*        DEST1=,
//         DUMPCLS='*',
//         JCLCLS='*',
//         GL0066=120731,
//         GL0067=120730
//*ASIS0030.INPUT1 DD DSN=E7445TS.KAT.CONTROL.CAP.N0010502,DISP=SHR
//*ASIS0030.INPUT2 DD DSN=E7445TS.KAT.UVHIST.CAP.N0010502,DISP=SHR
//*ASIS0030.INPUT3 DD DSN=E7445TS.VAN15.ASI.DATACOLL.DAP.N081119.COPY,
//* DISP=SHR
//ASIS0045.SORTIN DD DSN=E7445TS.JUDYT.ASI.ASP.N120731,DISP=SHR
//*               DD DSN=E7445TS.VAN15.VAN15FIX.ASI.ASP.N120731,DISP=SHR
//                DD DSN=E7445PS.VAN15.WRAPFILE.ASP.N120730,DISP=SHR
//*ASIS0050.VSAMFLE DD DSN=E7445TS.LIB.JZ.PARMLIB(VISOX00),DISP=SHR
//*ASIS0050.AGTHIER DD DSN=E7445TT0.JAT.AGTHIER,DISP=SHR
//*ASIS0050.AGTINDX DD DSN=E7445TT0.JAT.AGTHIER.AGTHIERX.PATH,DISP=SHR
//*ASIS0050.CLTLIST DD DSN=E7445TT0.JAT.CLTLIST,DISP=SHR
//E7445DKT JOB ('E7445TD',,9999),TIME=(,59),MSGCLASS=O,NOTIFY=&SYSUID
/*JOBPARM S=N090
//*-------------------------------------------------------------------+
//* PURPOSE: ASI  DATA COLLECTION UNLOAD                             |
//*-------------------------------------------------------------------+
//*PROCLIB  JCLLIB ORDER=(SYS1.USERPRO2)
//E7445DKP EXEC  E7445DKP,
//      DUMPCLS='*',
//      JCLCLS='*',
//*     RPTCLS='*',
//      RUNLOG='*',
//      DSN1='E7445TS',
//      MGMTCLS='D32',
//      DCBSPC='(CYL,(20,10),RLSE)',
//      ONLSPC='(CYL,(20,10),RLSE)',
//*     DEST1=,
//*     VAN15='VAN15',
//      VAN15='JUDYT',
//      VFLID='E7445TT0',
//*     TABLES='E7445TT0.FER09.TABLES',  ** ADMNTBL
//      RRIND='LE',                    ** RESTORES CONTROL & DATACOLL
//*     RRIND='GT',                    ** RESTORES CONTROL & DATACOLL
//      GL0066=120731
//*REST050.INPUT1 DD DSN=E7440TS.VAN15.STRIPTRX.N110624,DISP=SHR
//*PDCU060.REPORT1 DD DUMMY
//*PDCU060.REPORT DD DUMMY
//*PDCU060.FUTRPT DD DUMMY
//E7445FAT JOB ('SMTEST',,999),TIME=(,3),MSGCLASS=O,
// NOTIFY=&SYSUID
/*JOBPARM S=N090
//*PROCLIB  JCLLIB ORDER=(SYS1.USERPRO2)
//*-------------------------------------------------------------------+
//* PURPOSE: DATA COLLECTION UNLOAD                                   |
//*-------------------------------------------------------------------+
//E7445FAP EXEC  E7445FAP,
//         DSN1='E7445TS',
//         DUMPCLS='*',
//         JCLCLS='*',
//*        RPTCLS='*',
//         RUNLOG='*',
//         MGMTCLS='M32',
//*        DEST1='SCRMVS1',         ** PAPER COPY
//*        DEST1=,                  ** HELD QUEUE
//*        VAN15=VAN15,
//         VAN15=JUDYT,
//         VFLID='E7445TT0',
//*        TABLES='E7445TT0.FER09.TABLES',     ** ADMNTBL
//         RRIND='LE',                    ** RESTORES CONTROL & DATACOLL
//         GL0066=120731
//E7445HAT JOB ('SMTEST',,999),TIME=(,3),MSGCLASS=O,
// NOTIFY=&SYSUID
/*JOBPARM S=N090
//*PREPROCESSOR
//*
//*PROCLIB  JCLLIB ORDER=(SYS1.USERPRO2)
//***CLIB  JCLLIB ORDER=(E7445TS.VAN15.USERPROC)
//*
//*-------------------------------------------------------------------+
//*  PURPOSE: PREPROCESS                                              |
//*-------------------------------------------------------------------+
//E7445HAP EXEC E7445HAP,
//         JCLCLS='*',                    ** JCL OUTPUT CLASS
//         RUNLOG='*',                    ** RUNLOG OUTPUT CLASS
//         DUMPCLS='*',                   ** ABEND OUTPUT CLASS
//         DSN1='E7445TS',
//*        MGMTCLS=M32,
//         VFLID='E7445TT0',
//*        VAN15='VAN15',
//         VAN15='JUDYT',
//         RRIND='LE',                   ** RESTORES CONTROL FOR RERUN
//         GL0066=120731
//PAD0045.SORTIN DD DSN=E7445TS.JUDYT.BATTRX.CAP.N120731,DISP=SHR
//               DD DSN=E7445TS.JUDYT.ONLTRX.FAP.N120731,DISP=SHR
//*              DD DSN=E7445TS.VAN15.ONLTRX.FAP.N120731.COPY,DISP=SHR
//               DD DSN=E7445TS.JUDYT.ASI.ONLTRX.DKP.N120731,DISP=SHR
//*              DD DSN=E7445TS.VAN15.STRIPTRX.N120731,DISP=SHR
//*PAD0050.AGTHIER DD DSN=E7445TT0.JAT.AGTHIER,DISP=SHR
//*PAD0050.AGTINDX DD DSN=E7445TT0.JAT.AGTHIER.AGTHIERX.PATH,DISP=SHR
//*PAD0050.VSAMFLE DD DSN=E7445TS.LIB.JZ.PARMLIB(VIUAX00),DISP=SHR
//E7445HAT JOB ('SMTEST',,999),TIME=(,3),MSGCLASS=O,
// NOTIFY=&SYSUID
/*JOBPARM S=N090
//*PREPROCESSOR
//*
//*PROCLIB  JCLLIB ORDER=(SYS1.USERPRO2)
//***CLIB  JCLLIB ORDER=(E7445TS.VAN15.USERPROC)
//*
//*-------------------------------------------------------------------+
//*  PURPOSE: PREPROCESS                                              |
//*-------------------------------------------------------------------+
//E7445HAP EXEC E7445HAP,
//         JCLCLS='*',                    ** JCL OUTPUT CLASS
//         RUNLOG='*',                    ** RUNLOG OUTPUT CLASS
//         DUMPCLS='*',                   ** ABEND OUTPUT CLASS
//         DSN1='E7445TS',
//*        MGMTCLS=M32,
//         VFLID='E7445TT0',
//*        VAN15='VAN15',
//         VAN15='MAR19',
//         RRIND='LE',                   ** RESTORES CONTROL FOR RERUN
//         GL0066=140320
//PAD0045.SORTIN DD DSN=E7445TS.MAR19.BATTRX.CAP.N140320,DISP=SHR
//               DD DSN=E7445TS.MAR19.ONLTRX.FAP.N140320,DISP=SHR
//*              DD DSN=E7445TS.VAN15.ONLTRX.FAP.N140320.COPY,DISP=SHR
//               DD DSN=E7445TS.MAR19.ASI.ONLTRX.DKP.N140320,DISP=SHR
//*              DD DSN=E7445TS.VAN15.STRIPTRX.N140320,DISP=SHR
//*PAD0050.AGTHIER DD DSN=E7445TT0.JAT.AGTHIER,DISP=SHR
//*PAD0050.AGTINDX DD DSN=E7445TT0.JAT.AGTHIER.AGTHIERX.PATH,DISP=SHR
//*PAD0050.VSAMFLE DD DSN=E7445TS.LIB.JZ.PARMLIB(VIUAX00),DISP=SHR
//E7445KAT JOB ('SMTEST',,999),TIME=5,MSGCLASS=O,NOTIFY=&SYSUID
//* RESTART=E7445KAP.PAD0060
/*JOBPARM S=N090
//*PROCLIB  JCLLIB ORDER=(E7445TS.VAN15.USERPROC)
//*-------------------------------------------------------------------+
//* PURPOSE: ADMINISTRATION UPDATE                                    |
//*-------------------------------------------------------------------+
//E7445KAP EXEC E7445KAP,
//         LIB03='K9900P.STGT@A.VABR.#000577.NLB',
//*        LIB03='E7445PS.SYSTEST.LOADLIB',
//*        LIB03='E7445TS.VABR.VAN15.LOADLIB',
//*        LIB03A='E7445PS.VAN15.LOADLIB',
//         AD1SPC='(CYL,(350,50),RLSE)',  ** ADMRPTS SPACE
//         ADMSPC='(CYL,(350,50),RLSE)',  ** ADMRPTS SPACE
//         ACCSPC='(CYL,(225,22),RLSE)',
//         AC1SPC='(CYL,(300,30),RLSE)',
//         IPSSPC='(CYL,(150,15),RLSE)',
//         IP1SPC='(CYL,(220,15),RLSE)',
//         ASTSPC='(CYL,(150,15),RLSE)',
//         AS1SPC='(CYL,(250,15),RLSE)',
//         CR1SPC='(CYL,(100,10),RLSE)',
//         CR2SPC='(CYL,(100,10),RLSE)',
//         PBFSPC='(CYL,(3,1),RLSE)',
//         JCLCLS='*',                 ** JCL OUTPUT CLASS
//         RUNLOG='*',                 ** RUNLOG OUTPUT CLASS
//         DUMPCLS='*',                ** ABEND OUTPUT CLASS
//         MGMTCLS=M32,                ** ADMRPT MGMTCLAS
//         RPTMGM1=M32,                ** ADMRPT MGMTCLAS
//         IPSMGM1=M32,                ** IPS TRIGGER MGMTCLAS
//         ACTMGM1=M32,                ** ACCOUNTING FILE UNIT
//         ASTMGM1=M32,                ** ANNUAL STATEMENT UNIT
//         DSN1='E7445TS',
//*        RRIND='LE',                  ** RESTORES PCKTFLE FOR RERUN
//         RRIND='GT',                  ** RESTORES PCKTFLE FOR RERUN
//*        VAN15=VAN15,
//         VAN15=JUDYT,
//         VFLID='E7445TT0',
//*        TABLE='E7445TT0.FER09.TABLES',
//*        RUNLIB='E7445TS.VAN15.RUNLIB',
//         GL0066=120731,            ** CYCLE DATE
//         GL0917=2120731,     ** PRIOR WORKDAY WITH CENTURY - UVHIST
//         HLQ=E7445TS,
//         NOTESID='BSG_IND_NOTIFY_E7445KAP',
//         SUBJECT='CHECK E7445KAP SYSOUT, POSSIBLE ABENDS',
//         RPTDSN='E7445PS.E7445KAP.CONDCODE.ERROR'
//*PAD0050.VSAMFLE DD DSN=E7445TS.LIB.JZ.PARMLIB(VIUAX01),DISP=SHR
//*PAD0050.AGTHIER DD DSN=E7445TT0.JAT.AGTHIER,DISP=SHR
//*PAD0050.AGTINDX DD DSN=E7445TT0.JAT.AGTHIER.AGTHIERX.PATH,DISP=SHR
//*PAD0060.PBFRESTI DD DSN=E7445PS.VAN15.COMP.PBFREST.KAP.N120731,
//*         DISP=SHR
//*PAD0060.ADMRPTIP DD DSN=E7445PS.VAN15.COMP.PBFREST.KAP.N120731,
//*         DISP=SHR
//*PAD0065.PBFRESTI DD DSN=E7445PS.VAN15.COMP.PBFREST.KAP.N120731,
//*         DISP=SHR
//*PAD0065.ACCTEXTI DD DSN=E7445PS.VAN15.COMP.ACCEXTS.KAP.N120731,
//*         DISP=SHR
//*PAD0070.PBFRESTI DD DSN=E7445PS.VAN15.COMP.PBFREST.KAP.N120731,
//*         DISP=SHR
//*PAD0070.STMTEXI  DD DSN=E7445PS.VAN15.COMP.ANSTEXT.KAP.N120731,
//*         DISP=SHR
//*PAD0075.PBFRESTI DD DSN=E7445PS.VAN15.COMP.PBFREST.KAP.N120731,
//*         DISP=SHR
//*PAD0075.IPSEXTI  DD DSN=E7445PS.VAN15.COMP.IPSTRIG.KAP.N120731,
//*         DISP=SHR
//*REST025.INPUT1 DD DSN=E7445TS.PROD.PCKTFLE.HAP.N031121
//REST025.INPUT1 DD DSN=E7445TS.JUDYT.PCKTFLE.HAP.N120731
//E7470KJT JOB ('SMTEST',,999),TIME=(,59),MSGCLASS=O,NOTIFY=&SYSUID
//*TYPRUN=HOLD
/*JOBPARM S=A090
//** C ALL DBNAME
//** C ALL 140509 LAST CYCLE DATE
//** JJ=54 MAXCC=0
//*-------------------------------------------------------------------+
//*  PURPOSE: RESTORE ADMINISTRATION DATA BASE FILES                  |
//*-------------------------------------------------------------------+
//E7445KJP EXEC  E7445KJP,
//         JCLCLS='*',
//*        TDSN='E7445TS',
//         TDSN='E7445PS',
//*        PARMLIBN='E7445TS.VABR.JUDY.RUNLIB',
//*        RUNLIB='E7445TS.VABR.JUDY.RUNLIB',
//         VAN15I='VAN15',               ** INPUT QUALIFIER
//*        VAN15I='SEP10',         ** INPUT QUALIFIER
//*        VAN15O='PROD',  ** INPUT QUALIFIER
//*        VAN15O='SEP10',
//         VAN15O='DBNAME',
//*        VAN15O='VAN15',  ** INPUT QUALIFIER
//         VFLID='E7445TT0',        ** OUTPUT QUALIFIER
//*        VFLID='E7445TS0',        ** OUTPUT QUALIFIER
//         JOBNAMI='AAP',           ** FOR DATABASE
//         UVHJOB='AAP',            ** FOR UVHIST, FOR ENTIRE TRAIL
//         GL1429=GT,               ** GT TO RESTORE ELSE LE
//         GL0067=140509,           ** RESTORE OF DATABASE
//         GL0066=140509            ** RESTORE OF UVHIST
//PRE0005.RESOLVE DD DSN=E7445TS.VABR.JUDY.PDS(PMPFILES)
//*-------------------------------------------------------------------+
//* PURPOSE:  RESTORE CONTROL FILE                                    |
//*-------------------------------------------------------------------+
//E7445REP EXEC E7445RCP,
//         JCLCLS='*',
//*        DSN1='E7445TS',             ** INPUT QUALIFIER
//         DSN1='E7445PS',             ** INPUT QUALIFIER
//         VFLID='E7445TT0',              ** OUTPUT QUALIFIER
//*        VFLID='E7445TS0',              ** OUTPUT QUALIFIER
//*        VAN15I='SEP10',                     ** INPUT QUALIFIER
//         VAN15I='VAN15',             ** INPUT QUALIFIER
//*        VAN15O='PROD',    ** OUTPUT QUALIFIER
//*        VAN15O='SEP10',      ** OUTPUT QUALIFIER
//         VAN15O='DBNAME',     ** OUTPUT QUALIFIER
//*        VAN15O='VAN15',   ** OUTPUT QUALIFIER
//         JOBNAME='AAP',                 ** FOR CONTROL FILE ENTIRE TRL
//         GL1429=GT,                     ** TO RESTORE GT ELSE GT
//         GL0066=140509
/*
//E7445LMT  JOB  ('TSTEST',,999),PERFORM=3,MSGCLASS=O,NOTIFY=&SYSUID    00000010
//      LINES=999999
//*%OPC SCAN                                                            00000020
//E7445LMP  EXEC  E7445LMP,                                             00000030
//          GL0066=%OYMD1,                                              00000040
//          YL0066=%OYMD                                                00000050
/*                                                                      00000060
//SLMP0030.SYSIN DD *                                                   00000070
 SORT FIELDS=(019,3,CH,A,177,1,CH,A,111,11,CH,A,67,04,CH,A,193,2,CH,A,  00000080
              271,8,CH,A,122,5,CH,A)                                    00000090
/*                                                                      00000100
//SLMP0050.SYSIN DD *                                                   00000110
 SORT FIELDS=(019,3,CH,A,177,1,CH,A,111,11,CH,A,67,04,CH,A,193,2,CH,A,  00000120
              271,8,CH,A,122,5,CH,A)                                    00000130
/*                                                                      00000140
//                                                                      00000150
//E7445LMT  JOB  ('TSTEST',,999),PERFORM=3,MSGCLASS=O,NOTIFY=&SYSUID    00000010
//      LINES=999999
//*%OPC SCAN                                                            00000020
//E7445LMP  EXEC  E7445LMP,                                             00000030
//          GL0066=%OYMD1,                                              00000040
//          YL0066=%OYMD                                                00000050
/*                                                                      00000060
//SLMP0030.SYSIN DD *                                                   00000070
 SORT FIELDS=(019,3,CH,A,177,1,CH,A,111,11,CH,A,67,04,CH,A,193,2,CH,A,  00000080
              271,8,CH,A,122,5,CH,A)                                    00000090
/*                                                                      00000100
//SLMP0050.SYSIN DD *                                                   00000110
 SORT FIELDS=(019,3,CH,A,177,1,CH,A,111,11,CH,A,67,04,CH,A,193,2,CH,A,  00000120
              271,8,CH,A,122,5,CH,A)                                    00000130
/*                                                                      00000140
//                                                                      00000150
//E7445LRT  JOB ('PPPROD',,99),TIME=(,2),MSGCLASS=O,NOTIFY=&SYSUID      00000010
//*TYPRUN=HOLD
/*JOBPARM S=N090
//*TYPRUN=SCAN
//*PROCLIB  JCLLIB ORDER=(E7445TS.VABR.REC.PROCLIB)
//*PROCLIB  JCLLIB ORDER=(K9900P.STGT@A.VABR.#000345.PRC)
//E7445LRP EXEC E7445LRP,                                               00000010
//  DSNO='E7445TS',                                                     00000030
//*  PARMLIB2='E7445TS.VABR.KAT.PARMLIB',
//  DSNI='E7445TS',                                                     00000030
//  VDSN='E7445TT0',                                                    00000030
//  VAN15='JUDYT',                                                      00000030
//* MGMTCLS=D32,                                                        00000030
//  JCLCLS='*',                                                         00000030
//  GL0066=100726                                                        0000004
//STEP01.DD01 DD DSN=E7445TS.VAN15.EXPN.ERRTRIG.N&GL0066,DISP=SHR
//STEP02.CEOUTPUT DD DSN=E7445TS.VAN15.VAN15.EXPN.ERRTRIG.N&GL0066
//STEP4.DD01 DD DSN=E7445TS.VAN15.VAN15.EXPN.ERRTRIG.N&GL0066,DISP=SHR
//SORT01.SORTIN DD DSN=&&KAP,DISP=(OLD,PASS)
//              DD DSN=&&KAPE,DISP=(OLD,PASS)
//              DD DSN=&&DAP2,DISP=(OLD,PASS)
//              DD DSN=&&ERRT,DISP=(OLD,PASS)
//              DD DSN=E7445TS.VAN15.PUARFDBK.ASP.&HO&GL0066,DISP=SHR
//*STEP1.SYSIN DD DSN=E7445TS.VABR.REC.PARMLIB(E7445LR1)
//*STEP4.DD01 DD DSN=E7445TS.VAN15.EXPN.ERRTRIG.N010530,DISP=SHR
//*STEP4.SYSIN DD DSN=K9900P.STGT@A.VABR.#000360.CCL(E7445LR6),DISP=SHR
//*SORT01.SORTOUT DD DSN=E7445TS.VABR3.RPT.LRP.N000119.VAB33A
//*JOBPARM PROCLIB=EMERGPRO
//E74700ET JOB ('SMKAM',,999),TIME=(,5),MSGCLASS=O,NOTIFY=&SYSUID
/*JOBPARM S=N090
//***** CHANGE DBNAME TO THE DESIRED DB NAME JJ=6 MAXCC=0000
//*E74450EP JOB ('PPPROD',,9999),TIME=(,20)
//*
//*VTG1 PKG    PROTEXEC V100ICAF PROCCB2 ROOK01
//*NOW RENAMED PRODJOBS E74450EP USERPROC E74450EP
//*
//*PROCLIB  JCLLIB ORDER=(E7445TS.KAT.USERPROC)
//*
//*-------------------------------------------------------------------+
//* PURPOSE: INITIALIZE CAFI FILES                                    |
//*-------------------------------------------------------------------+
//E74450EP EXEC E74450EP,
//         PARMLIB='SYSCMN.PROD.CCLIB.VABR',
//         LOADLIB='SYSCMN.PROD.USERLINK.VABR',
//         TESTLIB='SYSCMN.PROD.USERLINK.VABR',
//         LINKLIB='SYSCMN.PROD.USERLINK.VABR',
//         RUNLIB='SYSCMN.PROD.CCLIB.VABR',
//         VAN15='DBNAME',
//         VFLID='E7445TT0',
//         FILEDEF=PMPFILES
//
//E74700FT JOB ('SMKAM',,999),TIME=(,5),MSGCLASS=O,NOTIFY=&SYSUID
/*JOBPARM S=N090
//** CHANGE DB239 TO DESIRED DB NAME JJ=4 MAXCC=0
//*E74450FP JOB ('PPROD',,9999),TIME=(,20)
//*
//*VTG1 PKG    PROTEXEC V100ICLT PROCCB2 RUAXCLT
//*NOW RENAMED PRODJOBS E74450FP USERPROC E74450FP
//*
//*PROCLIB  JCLLIB ORDER=(E7445TS.KAT.USERPROC)
//*
//*-------------------------------------------------------------------+
//* PURPOSE: INITIALIZE CAFI FILES                                    |
//*-------------------------------------------------------------------+
//E74450FP  EXEC E74450FP,
//         PARMLIB='SYSCMN.PROD.CCLIB.VABR',
//         LOADLIB='SYSCMN.PROD.USERLINK.VABR',
//         TESTLIB='SYSCMN.PROD.USERLINK.VABR',
//         LINKLIB='SYSCMN.PROD.USERLINK.VABR',
//         RUNLIB='SYSCMN.PROD.CCLIB.VABR',
//         VAN15='DB239',
//         VFLID='E7445TT0',
//         FILEDEF=PMPFILES
//
/* REXX */
/* COPYING THE DATA FROM ONE FILE TO ANOTHER */
SAY "ENTER THE HIGHLEVEL QUALIFIER"
PULL HLQ
INFILE = HLQ||".SAMPLE.REXX"
OUTFILE = HLQ||".SAMPLE.OUTPUT"
ADDRESS TSO
"ALLOC F(INDD) DA('"||INFILE||"') SHR"
IF SYSDSN("'"OUTFILE"'") = 'OK' THEN
   DO
     "ALLOC F("OUTDD") DA('"OUTFILE"') SHR REUSE"
   END
ELSE
   DO
     "ALLOC F("OUTDD") DA("||"'"||OUTFILE||"'",
     ||") NEW SPACE (100,200) TRACK LRECL(80) RECFM(F) ",
     ||" BLKSIZE(0)"
   END
"EXECIO * DISKR INDD(FINIS STEM INREC."
"EXECIO * DISKW OUTDD(FINIS STEM INREC."
"FREE F(INDD)"
"FREE F(OUTDD)"
EXIT 0
F001 = SYSDSN("'E7440TT0."||IM65N||".ALFAKEY1'") /='OK'
F002 = SYSDSN("'E7440TT0."||IM65N||".ARCHNDX1'") /='OK'
F003 = SYSDSN("'E7440TT0."||IM65N||".CASHFLW1'") /='OK'
F004 = SYSDSN("'E7440TT0."||IM65N||".CLPROD1'") /='OK'
F005 = SYSDSN("'E7440TT0."||IM65N||".NEXTNUM1'") /='OK'
F006 = SYSDSN("'E7440TT0."||IM65N||".COSUSPN1'") /='OK'
F007 = SYSDSN("'E7440TT0."||IM65N||".DIRECT1'") /='OK'
F008 = SYSDSN("'E7440TT0."||IM65N||".MONYFND1'") /='OK'
F009 = SYSDSN("'E7440TT0."||IM65N||".SCHED1'") /='OK'
F010 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE1'") /='OK'
F011 = SYSDSN("'E7440TT0."||IM65N||".TRXHIS1'") /='OK'
F012 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT1'") /='OK'
F013 = SYSDSN("'E7440TT0."||IM65N||".GROUP1'") /='OK'
F014 = SYSDSN("'E7440TT0."||IM65N||".ADMERR1'") /='OK'
F015 = SYSDSN("'E7440TT0."||IM65N||".CAIX1'") /='OK'
F016 = SYSDSN("'E7440TT0."||IM65N||".DBPBFLG1'") /='OK'
F017 = SYSDSN("'E7440TT0."||IM65N||".VCANTAX1'") /='OK'
F018 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER1'") /='OK'
F019 = SYSDSN("'E7440TT0."||IM65N||".UVHIST1'") /='OK'
F020 = SYSDSN("'E7440TT0."||IM65N||".CONTROL1'") /='OK'
F021 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE1'") /='OK'
F022 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE1.TICKET'") /='OK'
F023 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE1.NAME'") /='OK'
F024 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE1.ORIG'") /='OK'
F025 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT1'") /='OK'
F026 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT1.CLTEVTX'") /='OK'
F027 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER1.AGTHIERX'") /='OK'
F028 = SYSDSN("'E7440TT0."||IM65N||".ALFAKEY2'") /='OK'
F029 = SYSDSN("'E7440TT0."||IM65N||".ARCHNDX2'") /='OK'
F030 = SYSDSN("'E7440TT0."||IM65N||".CASHFLW2'") /='OK'
F031 = SYSDSN("'E7440TT0."||IM65N||".CLPROD2'") /='OK'
F032 = SYSDSN("'E7440TT0."||IM65N||".NEXTNUM2'") /='OK'
F033 = SYSDSN("'E7440TT0."||IM65N||".COSUSPN2'") /='OK'
F034 = SYSDSN("'E7440TT0."||IM65N||".DIRECT2'") /='OK'
F035 = SYSDSN("'E7440TT0."||IM65N||".MONYFND2'") /='OK'
F036 = SYSDSN("'E7440TT0."||IM65N||".SCHED2'") /='OK'
F037 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE2'") /='OK'
F038 = SYSDSN("'E7440TT0."||IM65N||".TRXHIS2'") /='OK'
F039 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT2'") /='OK'
F040 = SYSDSN("'E7440TT0."||IM65N||".GROUP2'") /='OK'
F041 = SYSDSN("'E7440TT0."||IM65N||".ADMERR2'") /='OK'
F042 = SYSDSN("'E7440TT0."||IM65N||".CAIX2'") /='OK'
F043 = SYSDSN("'E7440TT0."||IM65N||".DBPBFLG2'") /='OK'
F044 = SYSDSN("'E7440TT0."||IM65N||".VCANTAX2'") /='OK'
F045 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER2'") /='OK'
F046 = SYSDSN("'E7440TT0."||IM65N||".UVHIST2'") /='OK'
F047 = SYSDSN("'E7440TT0."||IM65N||".CONTROL2'") /='OK'
F048 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE2'") /='OK'
F049 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE2.TICKET'") /='OK'
F050 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE2.NAME'") /='OK'
F051 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE2.ORIG'") /='OK'
F052 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT2'") /='OK'
F053 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT2.CLTEVTX'") /='OK'
F054 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER2.AGTHIERX'") /='OK'
F055 = SYSDSN("'E7440TT0."||IM65N||".ALFAKEY3'") /='OK'
F056 = SYSDSN("'E7440TT0."||IM65N||".ARCHNDX3'") /='OK'
F057 = SYSDSN("'E7440TT0."||IM65N||".CASHFLW3'") /='OK'
F058 = SYSDSN("'E7440TT0."||IM65N||".CLPROD3'") /='OK'
F059 = SYSDSN("'E7440TT0."||IM65N||".NEXTNUM3'") /='OK'
F060 = SYSDSN("'E7440TT0."||IM65N||".COSUSPN3'") /='OK'
F061 = SYSDSN("'E7440TT0."||IM65N||".DIRECT3'") /='OK'
F062 = SYSDSN("'E7440TT0."||IM65N||".MONYFND3'") /='OK'
F063 = SYSDSN("'E7440TT0."||IM65N||".SCHED3'") /='OK'
F064 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE3'") /='OK'
F065 = SYSDSN("'E7440TT0."||IM65N||".TRXHIS3'") /='OK'
F066 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT3'") /='OK'
F067 = SYSDSN("'E7440TT0."||IM65N||".GROUP3'") /='OK'
F068 = SYSDSN("'E7440TT0."||IM65N||".ADMERR3'") /='OK'
F069 = SYSDSN("'E7440TT0."||IM65N||".CAIX3'") /='OK'
F070 = SYSDSN("'E7440TT0."||IM65N||".DBPBFLG3'") /='OK'
F071 = SYSDSN("'E7440TT0."||IM65N||".VCANTAX3'") /='OK'
F072 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER3'") /='OK'
F073 = SYSDSN("'E7440TT0."||IM65N||".UVHIST3'") /='OK'
F074 = SYSDSN("'E7440TT0."||IM65N||".CONTROL3'") /='OK'
F075 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE3'") /='OK'
F076 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE3.TICKET'") /='OK'
F077 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE3.NAME'") /='OK'
F078 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE3.ORIG'") /='OK'
F079 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT3'") /='OK'
F080 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT3.CLTEVTX'") /='OK'
F081 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER3.AGTHIERX'") /='OK'
F082 = SYSDSN("'E7440TT0."||IM65N||".ALFAKEY4'") /='OK'
F083 = SYSDSN("'E7440TT0."||IM65N||".ARCHNDX4'") /='OK'
F084 = SYSDSN("'E7440TT0."||IM65N||".CASHFLW4'") /='OK'
F085 = SYSDSN("'E7440TT0."||IM65N||".CLPROD4'") /='OK'
F086 = SYSDSN("'E7440TT0."||IM65N||".NEXTNUM4'") /='OK'
F087 = SYSDSN("'E7440TT0."||IM65N||".COSUSPN4'") /='OK'
F088 = SYSDSN("'E7440TT0."||IM65N||".DIRECT4'") /='OK'
F089 = SYSDSN("'E7440TT0."||IM65N||".MONYFND4'") /='OK'
F090 = SYSDSN("'E7440TT0."||IM65N||".SCHED4'") /='OK'
F091 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE4'") /='OK'
F092 = SYSDSN("'E7440TT0."||IM65N||".TRXHIS4'") /='OK'
F093 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT4'") /='OK'
F094 = SYSDSN("'E7440TT0."||IM65N||".GROUP4'") /='OK'
F095 = SYSDSN("'E7440TT0."||IM65N||".ADMERR4'") /='OK'
F096 = SYSDSN("'E7440TT0."||IM65N||".CAIX4'") /='OK'
F097 = SYSDSN("'E7440TT0."||IM65N||".DBPBFLG4'") /='OK'
F098 = SYSDSN("'E7440TT0."||IM65N||".VCANTAX4'") /='OK'
F099 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER4'") /='OK'
F100 = SYSDSN("'E7440TT0."||IM65N||".UVHIST4'") /='OK'
F101 = SYSDSN("'E7440TT0."||IM65N||".CONTROL4'") /='OK'
F102 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE4'") /='OK'
F103 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE4.TICKET'") /='OK'
F104 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE4.NAME'") /='OK'
F105 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE4.ORIG'") /='OK'
F106 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT4'") /='OK'
F107 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT4.CLTEVTX'") /='OK'
F108 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER4.AGTHIERX'") /='OK'
F109 = SYSDSN("'E7440TT0."||IM65N||".ALFAKEY5'") /='OK'
F110 = SYSDSN("'E7440TT0."||IM65N||".ARCHNDX5'") /='OK'
F111 = SYSDSN("'E7440TT0."||IM65N||".CASHFLW5'") /='OK'
F112 = SYSDSN("'E7440TT0."||IM65N||".CLPROD5'") /='OK'
F113 = SYSDSN("'E7440TT0."||IM65N||".NEXTNUM5'") /='OK'
F114 = SYSDSN("'E7440TT0."||IM65N||".COSUSPN5'") /='OK'
F115 = SYSDSN("'E7440TT0."||IM65N||".DIRECT5'") /='OK'
F116 = SYSDSN("'E7440TT0."||IM65N||".MONYFND5'") /='OK'
F117 = SYSDSN("'E7440TT0."||IM65N||".SCHED5'") /='OK'
F118 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE5'") /='OK'
F119 = SYSDSN("'E7440TT0."||IM65N||".TRXHIS5'") /='OK'
F120 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT5'") /='OK'
F121 = SYSDSN("'E7440TT0."||IM65N||".GROUP5'") /='OK'
F122 = SYSDSN("'E7440TT0."||IM65N||".ADMERR5'") /='OK'
F123 = SYSDSN("'E7440TT0."||IM65N||".CAIX5'") /='OK'
F124 = SYSDSN("'E7440TT0."||IM65N||".DBPBFLG5'") /='OK'
F125 = SYSDSN("'E7440TT0."||IM65N||".VCANTAX5'") /='OK'
F126 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER5'") /='OK'
F127 = SYSDSN("'E7440TT0."||IM65N||".UVHIST5'") /='OK'
F128 = SYSDSN("'E7440TT0."||IM65N||".CONTROL5'") /='OK'
F129 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE5'") /='OK'
F130 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE5.TICKET'") /='OK'
F131 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE5.NAME'") /='OK'
F132 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE5.ORIG'") /='OK'
F133 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT5'") /='OK'
F134 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT5.CLTEVTX'") /='OK'
F135 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER5.AGTHIERX'") /='OK'
/**REXX **/
SAY "ENTER THE POLICY NUMBER"
PULL POLICY
ADDRESS TSO
"ALLOC F(INFILE) DSN('E7470TS.BSK.SCHED') SHR REUSE"
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
I=1
DO WHILE I <= MYFILE.0
   POLNUM = SUBSTR(MYFILE.I,8,11)
   COMID = SUBSTR(MYFILE.I,1,3)
    IF (POLICY = POLNUM) THEN
    DO
       SAY "COMPANY " COMID
       LEAVE
    END
   I = I + 1
END
EXIT
//E7470FPT JOB ('BSK'),MSGCLASS=O,NOTIFY=&SYSUID,
//       LINES=99999,CLASS=T,PRTY=15
//STEPFTP  EXEC PGM=IKJEFT1B,DYNAMNBR=50
//SYSEXEC  DD DISP=SHR,DSN=SYSU.XMITIP.EXEC
//SYSPRINT DD SYSOUT=*
//SYSTSPRT DD SYSOUT=*
//FILENAME DD DISP=SHR,
//            DSN=E7440TS.DEEPAN.VCSI.MATURITY.LIST
//SYSTSIN  DD *
   %XMITIP (KAJANISH.BJ@METLIFE.COM)                +
   MSGT 'FFTTPP FOR BSK T_T_T_T_T_T_T_T'                +
   FROM LIFEADMIN@LIFEADMINMETLIFE.US                   +
   SUBJECT 'FTP1_FOR_BSK'                              +
   HLQ E7440TS                                          +
   FILEDD FILENAME                                      +
   FILENAME VCSI_MATURITY.TXT
/*
/**REXX**/                                                              00010000
MASTER_BATTRX="'E7470TS.BSK.CAPPROD1.CCLIB'"                            00020002
NEW_BATTRX ="'E7470TS.BSK.CAPPROD.REXX.HRECALL'"                        00030001
ADDRESS TSO "DEL "NEW_BATTRX""                                          00040000
"ALLOC FI(OUTDD) DA("NEW_BATTRX") SHR REUSE",                           00050000
"NEW SPACE (100,200) DSORG(PS) RECFM(F B) LRECL(20476) BLKSIZE(20476)"  00060000
"FREE FI(OUTDD)"                                                        00070000
ADDRESS TSO                                                             00100000
"ALLOC F(INFILE) DSN("MASTER_BATTRX") SHR REUSE"                        00110000
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."                             00120000
"FREE F(INFILE)"                                                        00130000
I=1                                                                     00140000
DO WHILE I <= MYFILE.0                                                  00150000
MF.I = "HRECALL '"SPACE(MYFILE.I,0)"' NOWAIT"                           00160001
"ALLOC DA("NEW_BATTRX") FI(OUTPUT) SHR REUSE"                           00190000
  MYSTEM.I = MF.I                                                       00210000
  "EXECIO * DISKW OUTPUT (FINIS STEM MYSTEM."                           00230000
  "FREE FI(OUTPUT)"                                                     00240000
   I = I + 1                                                            00250000
END                                                                     00260000
EXIT 0                                                                  00270000
ALLOC F(REXX) DA('E7432TS.BSK.VCS1.REXX.PANEL.LIB(VCSIREXX)') SHR REUS
CONCAT SYSEXEC REXX
/**REXX**/                                                              00010027
D = POX01                                                               00030042
POL = 871145343UL                                                       00051042
ADDRESS TSO EXEC "'E7432TS.BSK.VCS1.REXX.LIB(SORTCR1)'",                00060041
                 "'"D","POL"'"                                          00070039
/*REXX*/
PARSE ARG DB','POLF
POLH = SUBSTR(POLF,04,06)
/********************************************************************/
SEC = SUBSTR(POLF,09,01)
SN = 0
SELECT
WHEN ((SEC=1)|(SEC=2)) THEN; SN=1
WHEN ((SEC=3)|(SEC=4)) THEN; SN=2
WHEN ((SEC=5)|(SEC=6)) THEN; SN=3
WHEN ((SEC=7)|(SEC=8)) THEN; SN=4
WHEN ((SEC=9)|(SEC=0)) THEN; SN=5
OTHERWISE SAY "NO"
END
/********************************************************************/
/**START**************TSO USER ID***********************************/
URN=USERID()
JOBID=SUBSTR(URN,1,5)
/**END****************TSO USER ID***********************************/
/**START**************LAST CYCLE************************************/
TODAY = DATE('E')
DD =SUBSTR(TODAY,01,02);MM =SUBSTR(TODAY,04,02);YY =SUBSTR(TODAY,07,02)
IF (MM>10) THEN;DO;LM=MM-1;END;ELSE;DO;LM='0'||MM-1;END
CDX = YY||MM||DD;CDXM= YY||LM||28
DF1= "'E7432PS.ULA40.CASHFLW2.N"CDX-1"'";CF1 = SYSDSN(DF1) /='OK';
DF2= "'E7432PS.ULA40.CASHFLW2.N"CDX-2"'";CF2 = SYSDSN(DF2) /='OK';
DF3= "'E7432PS.ULA40.CASHFLW2.N"CDX-3"'";CF3 = SYSDSN(DF3) /='OK';
DF4= "'E7432PS.ULA40.CASHFLW2.N"CDX-4"'";CF4 = SYSDSN(DF4) /='OK';
DF5= "'E7432PS.ULA40.CASHFLW2.N"CDXM"'";CF5 = SYSDSN(DF5) /='OK';
DF6= "'E7432PS.ULA40.CASHFLW2.N"CDXM+1"'";CF6 = SYSDSN(DF6) /='OK';
DF7= "'E7432PS.ULA40.CASHFLW2.N"CDXM+2"'";CF7 = SYSDSN(DF7) /='OK';
DF8= "'E7432PS.ULA40.CASHFLW2.N"CDXM+3"'";CF8 = SYSDSN(DF8) /='OK';
SELECT
WHEN(CF1=0)THEN;DO;LDX=CDX-1;END;
WHEN(CF2=0)THEN;DO;LDX=CDX-2;END;
WHEN(CF3=0)THEN;DO;LDX=CDX-3;END;
WHEN(CF4=0)THEN;DO;LDX=CDX-4;END;
WHEN(CF8=0)THEN;DO;LDX=CDXM+3;END;
WHEN(CF7=0)THEN;DO;LDX=CDXM+2;END;
WHEN(CF6=0)THEN;DO;LDX=CDXM+1;END;
WHEN(CF5=0)THEN;DO;LDX=CDXM;END;
OTHERWISE;LDX=CDX-1         ;END;
LD = LDX
/**END****************LAST CYCLE************************************/
QUEUE "//"JOBID"C"SN"F JOB ('"URN"'),TIME=(,3),                                "
QUEUE "//           NOTIFY=&SYSUID,MSGCLASS=O                                  "
QUEUE "/*JOBPARM S=ANY,SYSAFF=ANY                                              "
QUEUE "//* C ALL "DB" XXXX                                                     "
QUEUE "//* C ALL "LD" YYMMDD     LASTCYCLE DATE                                "
QUEUE "//* C ALL "POLF" XXXXXXXXX     POLICY NUMBER                            "
QUEUE "//* C ALL "POLH" XXXXXX  LAST 6 DIGIT OF THE POLICY NUMBER              "
QUEUE "//STEPDEL  EXEC PGM=IEFBR14                                             "
QUEUE "//DEL0     DD DISP=(MOD,DELETE),DSN=E7432TS."DB".CASHFLW"SN".N"LD"      "
QUEUE "//STEP01  EXEC PGM=FILEMGR,TIME=20                                      "
QUEUE "//SYSPRINT DD SYSOUT=O                                                  "
QUEUE "//SYSUDUMP DD SYSOUT=O                                                  "
QUEUE "//SYSTOTAL DD SYSOUT=O                                                  "
QUEUE "//DD01     DD DSN=E7432PS0.CASHFLW"SN",DISP=SHR                         "
QUEUE "//DD01O    DD DSN=E7432TS."DB".CASHFLW"SN".N"LD",                       "
QUEUE "//         DISP=(MOD,CATLG,CATLG),SPACE=(CYL,(1,1),RLSE),               "
QUEUE "//         DCB=(RECFM=VB,LRECL=1432,BLKSIZE=22916),                     "
QUEUE "//         UNIT=DELM,VOL=SER=                                           "
QUEUE "//SYSIN DD *                                                            "
QUEUE "$$FILEM DSC  INPUT=DD01,                                                "
QUEUE "$$FILEM   KEY='           ',                                            "
QUEUE "$$FILEM      OUTPUT=DD01O,                                              "
QUEUE "$$FILEM      PROC=*                                                     "
QUEUE " IF FLD(4,6) \== '      '                                               "
QUEUE " THEN RETURN STOP IMMEDIATE                                             "
QUEUE "$$FILEM DSC  INPUT=DD01,                                                "
QUEUE "$$FILEM   KEY='"POLF"',                                                 "
QUEUE "$$FILEM      OUTPUT=DD01O,                                              "
QUEUE "$$FILEM      PROC=*                                                     "
QUEUE " IF FLD(4,6) \== '"POLH"'                                               "
QUEUE " THEN RETURN STOP IMMEDIATE                                             "
QUEUE "/*                                                                      "
QUEUE "//**************************************                                "
QUEUE "//STEP02 EXEC PGM=IDCAMS                                                "
QUEUE "//SYSPRINT  DD  SYSOUT=O                                                "
QUEUE "//SYSUDUMP  DD  SYSOUT=O                                                "
QUEUE "//IAMOVRID  DD  *                                                       "
QUEUE "    CREATE  DD=&ALLDD,DATACOMPRESS=YES,OVERFLOW=5000                    "
QUEUE "/*                                                                      "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    DELETE (E7432TS0."DB".CASHFLW"SN") -                                "
QUEUE "       CLUSTER                                                          "
QUEUE "       IF MAXCC > 0 THEN DO                                             "
QUEUE "        SET MAXCC = 0                                                   "
QUEUE "       END                                                              "
QUEUE "        DEFINE CLUSTER(    -                                            "
QUEUE "               NAME(E7432TS0."DB".CASHFLW"SN") -                        "
QUEUE "               MGMTCLAS(D100NR) -                                       "
QUEUE "               OWNER($IAM) -                                            "
QUEUE "               FSPC(5 2) -                                              "
QUEUE "               KEYS(16 0) -                                             "
QUEUE "               SPEED -                                                  "
QUEUE "               NOIMBED) -                                               "
QUEUE "         DATA -                                                         "
QUEUE "               (NAME(E7432TS0."DB".CASHFLW"SN".DATA) -                  "
QUEUE "               CYL(1 5) -                                               "
QUEUE "               RECSZ(28 1432) -                                         "
QUEUE "               CISZ(6144)) -                                            "
QUEUE "         INDEX -                                                        "
QUEUE "               (NAME(E7432TS0."DB".CASHFLW"SN".INDEX) -                 "
QUEUE "               CISZ(1024))                                              "
QUEUE "/*                                                                      "
QUEUE "//STEP03   EXEC PGM=IDCAMS                                              "
QUEUE "//SYSPRINT  DD  SYSOUT=O                                                "
QUEUE "//SYSUDUMP  DD  SYSOUT=O                                                "
QUEUE "//INPUT     DD  DISP=SHR,DSN=E7432TS."DB".CASHFLW"SN".N"LD"             "
QUEUE "//OUTPUT    DD  DISP=SHR,DSN=E7432TS0."DB".CASHFLW"SN"                  "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    REPRO INFILE(INPUT) -                                               "
QUEUE "          OUTFILE(OUTPUT)                                               "
QUEUE "/*                                                                      "
QUEUE "//**********************************************************            "
QUEUE "//"JOBID"C"SN"V JOB ('"URN"'),TIME=(,3),                                "
QUEUE "//           NOTIFY=&SYSUID,MSGCLASS=O                                  "
QUEUE "/*JOBPARM S=ANY,SYSAFF=ANY                                              "
QUEUE "//* C ALL "DB" XXXX                                                     "
QUEUE "//* C ALL "LD" YYMMDD     LASTCYCLE DATE                                "
QUEUE "//* C ALL "POLF" XXXXXXXXX     POLICY NUMBER                            "
QUEUE "//* C ALL "POLH" XXXXXX  LAST 6 DIGIT OF THE POLICY NUMBER              "
QUEUE "//STEPDEL  EXEC PGM=IEFBR14                                             "
QUEUE "//DEL0     DD DISP=(MOD,DELETE),DSN=E7432TS."DB".CASHVAL"SN".N"LD"      "
QUEUE "//STEP01  EXEC PGM=FILEMGR,TIME=20                                      "
QUEUE "//SYSPRINT DD SYSOUT=O                                                  "
QUEUE "//SYSUDUMP DD SYSOUT=O                                                  "
QUEUE "//SYSTOTAL DD SYSOUT=O                                                  "
QUEUE "//DD01     DD DSN=E7432PS0.CASHVAL"SN",DISP=SHR                         "
QUEUE "//DD01O    DD DSN=E7432TS."DB".CASHVAL"SN".N"LD",                       "
QUEUE "//         DISP=(MOD,CATLG,CATLG),SPACE=(CYL,(1,1),RLSE),               "
QUEUE "//         DCB=(RECFM=VB,LRECL=1416,BLKSIZE=0),                         "
QUEUE "//         UNIT=DELM,VOL=SER=                                           "
QUEUE "//SYSIN DD *                                                            "
QUEUE "$$FILEM DSC  INPUT=DD01,                                                "
QUEUE "$$FILEM   KEY=' 000000000',                                             "
QUEUE "$$FILEM      OUTPUT=DD01O,                                              "
QUEUE "$$FILEM      PROC=*                                                     "
QUEUE " IF FLD(5,6) \== '000000'                                               "
QUEUE " THEN RETURN STOP IMMEDIATE                                             "
QUEUE "$$FILEM DSC  INPUT=DD01,                                                "
QUEUE "$$FILEM   KEY=' "POLF"',                                                "
QUEUE "$$FILEM      OUTPUT=DD01O,                                              "
QUEUE "$$FILEM      PROC=*                                                     "
QUEUE " IF FLD(5,6) \== '"POLH"'                                               "
QUEUE " THEN RETURN STOP IMMEDIATE                                             "
QUEUE "/*                                                                      "
QUEUE "//STEP02 EXEC PGM=IDCAMS                                                "
QUEUE "//SYSPRINT  DD  SYSOUT=O                                                "
QUEUE "//SYSUDUMP  DD  SYSOUT=O                                                "
QUEUE "//IAMOVRID  DD  *                                                       "
QUEUE "    CREATE  DD=&ALLDD,DATACOMPRESS=YES,OVERFLOW=1500                    "
QUEUE "/*                                                                      "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    DELETE (E7432TS0."DB".CASHVAL"SN") -                                "
QUEUE "       CLUSTER                                                          "
QUEUE "       IF MAXCC > 0 THEN DO                                             "
QUEUE "        SET MAXCC = 0                                                   "
QUEUE "       END                                                              "
QUEUE "        DEFINE CLUSTER(    -                                            "
QUEUE "               NAME(E7432TS0."DB".CASHVAL"SN") -                        "
QUEUE "               MGMTCLAS(D100NR) -                                       "
QUEUE "               OWNER($IAM)    -                                         "
QUEUE "               KEYS(10 0)-                                              "
QUEUE "               RECORDSIZE(500 1416)-                                    "
QUEUE "               CYL(1 5)-                                                "
QUEUE "               FREESPACE(10 10)-                                        "
QUEUE "               IMBED-                                                   "
QUEUE "               SPEED)-                                                  "
QUEUE "         DATA -                                                         "
QUEUE "               (NAME(E7432TS0."DB".CASHVAL"SN".DATA) -                  "
QUEUE "               CISZ(6144)) -                                            "
QUEUE "         INDEX -                                                        "
QUEUE "               (NAME(E7432TS0."DB".CASHVAL"SN".INDEX) -                 "
QUEUE "               CISZ(1024))                                              "
QUEUE "/*                                                                      "
QUEUE "//STEP03   EXEC PGM=IDCAMS                                              "
QUEUE "//SYSPRINT  DD  SYSOUT=O                                                "
QUEUE "//SYSUDUMP  DD  SYSOUT=O                                                "
QUEUE "//INPUT     DD  DISP=SHR,DSN=E7432TS."DB".CASHVAL"SN".N"LD"             "
QUEUE "//OUTPUT    DD  DISP=SHR,DSN=E7432TS0."DB".CASHVAL"SN"                  "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    REPRO INFILE(INPUT) -                                               "
QUEUE "          OUTFILE(OUTPUT)                                               "
QUEUE "/*                                                                      "
QUEUE "//**********************************************************            "
QUEUE "//"JOBID"F"SN"M JOB ('"URN"'),TIME=(,3),                                "
QUEUE "//           NOTIFY=&SYSUID,MSGCLASS=O                                  "
QUEUE "/*JOBPARM S=ANY,SYSAFF=ANY                                              "
QUEUE "//* C ALL "DB" XXXX                                                     "
QUEUE "//* C ALL "LD" YYMMDD     LASTCYCLE DATE                                "
QUEUE "//* C ALL "POLF" XXXXXXXXX     POLICY NUMBER                            "
QUEUE "//* C ALL "POLH" XXXXXX  LAST 6 DIGIT OF THE POLICY NUMBER              "
QUEUE "//STEPDEL  EXEC PGM=IEFBR14                                             "
QUEUE "//DEL0     DD DISP=(MOD,DELETE),DSN=E7432TS."DB".FPRAMST"SN".N"LD"      "
QUEUE "//STEP01  EXEC PGM=FILEMGR,TIME=20                                      "
QUEUE "//SYSPRINT DD SYSOUT=O                                                  "
QUEUE "//SYSUDUMP DD SYSOUT=O                                                  "
QUEUE "//SYSTOTAL DD SYSOUT=O                                                  "
QUEUE "//DD01     DD DSN=E7432PS0.FPRAMST"SN",DISP=SHR                         "
QUEUE "//DD01O    DD DSN=E7432TS."DB".FPRAMST"SN".N"LD",                       "
QUEUE "//         DISP=(MOD,CATLG,CATLG),SPACE=(CYL,(1,1),RLSE),               "
QUEUE "//         DCB=(RECFM=VB,LRECL=1000,BLKSIZE=32000),                     "
QUEUE "//         UNIT=DELM,VOL=SER=                                           "
QUEUE "//SYSIN DD *                                                            "
QUEUE "$$FILEM DSC  INPUT=DD01,                                                "
QUEUE "$$FILEM   KEY=X'0000000000000000',                                      "
QUEUE "$$FILEM      OUTPUT=DD01O,                                              "
QUEUE "$$FILEM      PROC=*                                                     "
QUEUE " IF FLD(17,3) \== '000000'X                                             "
QUEUE " THEN RETURN STOP IMMEDIATE                                             "
QUEUE "$$FILEM DSC  INPUT=DD01,                                                "
QUEUE "$$FILEM   KEY='                 ',                                      "
QUEUE "$$FILEM      OUTPUT=DD01O,                                              "
QUEUE "$$FILEM      PROC=*                                                     "
QUEUE " IF FLD(17,6) \== '      '                                              "
QUEUE " THEN RETURN STOP IMMEDIATE                                             "
QUEUE "$$FILEM DSC  INPUT=DD01,                                                "
QUEUE "$$FILEM   KEY='  UL000000000"POLF"',                                    "
QUEUE "$$FILEM      OUTPUT=DD01O,                                              "
QUEUE "$$FILEM      PROC=*                                                     "
QUEUE " IF FLD(17,6) \== '"POLH"'                                              "
QUEUE " THEN RETURN STOP IMMEDIATE                                             "
QUEUE "$$FILEM DSC  INPUT=DD01,                                                "
QUEUE "$$FILEM   KEY='  UL000000000999999999',                                 "
QUEUE "$$FILEM      OUTPUT=DD01O,                                              "
QUEUE "$$FILEM      PROC=*                                                     "
QUEUE " IF FLD(17,5) \== '99999'                                               "
QUEUE " THEN RETURN STOP IMMEDIATE                                             "
QUEUE "$$FILEM DSC  INPUT=DD01,                                                "
QUEUE "$$FILEM   KEY=X'FFFFFFFFFFFFFFFF',                                      "
QUEUE "$$FILEM      OUTPUT=DD01O,                                              "
QUEUE "$$FILEM      PROC=*                                                     "
QUEUE " IF FLD(17,3) \== 'FFFFFF'X                                             "
QUEUE " THEN RETURN STOP IMMEDIATE                                             "
QUEUE "/*                                                                      "
QUEUE "//STEP02 EXEC PGM=IDCAMS                                                "
QUEUE "//SYSPRINT  DD  SYSOUT=O                                                "
QUEUE "//SYSUDUMP  DD  SYSOUT=O                                                "
QUEUE "//IAMOVRID  DD  *                                                       "
QUEUE "    CREATE  DD=&ALLDD,DATACOMPRESS=YES,OVERFLOW=9000                    "
QUEUE "/*                                                                      "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    DELETE (E7432TS0."DB".FPRAMST"SN") -                                "
QUEUE "       CLUSTER                                                          "
QUEUE "       IF MAXCC > 0 THEN DO                                             "
QUEUE "        SET MAXCC = 0                                                   "
QUEUE "       END                                                              "
QUEUE "    DEFINE CLUSTER(             -                                       "
QUEUE "           NAME(E7432TS0."DB".FPRAMST"SN") -                            "
QUEUE "           MGMTCLAS(D100NR) -                                           "
QUEUE "           OWNER($IAM)    -                                             "
QUEUE "           FSPC(15 2)          -                                        "
QUEUE "           KEYS(30 0)           -                                       "
QUEUE "           IMBED                -                                       "
QUEUE "           SPEED)               -                                       "
QUEUE "    DATA -                                                              "
QUEUE "           (NAME(E7432TS0."DB".FPRAMST"SN".DATA)-                       "
QUEUE "           CYL(1 5) -                                                   "
QUEUE "           RECSZ(500 700)       -                                       "
QUEUE "           CISZ (8192))         -                                       "
QUEUE "    INDEX -                                                             "
QUEUE "           (NAME(E7432TS0."DB".FPRAMST"SN".INDEX)-                      "
QUEUE "           CISZ (1024))                                                 "
QUEUE "/*                                                                      "
QUEUE "//STEP03   EXEC PGM=IDCAMS                                              "
QUEUE "//SYSPRINT  DD  SYSOUT=O                                                "
QUEUE "//SYSUDUMP  DD  SYSOUT=O                                                "
QUEUE "//INPUT     DD  DISP=SHR,DSN=E7432TS."DB".FPRAMST"SN".N"LD"             "
QUEUE "//OUTPUT    DD  DISP=SHR,DSN=E7432TS0."DB".FPRAMST"SN"                  "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    REPRO INFILE(INPUT) -                                               "
QUEUE "          OUTFILE(OUTPUT)                                               "
QUEUE "/*                                                                      "
QUEUE "//**********************************************************            "
QUEUE "//"JOBID"U"SN"M JOB ('"URN"'),TIME=(,3),                                "
QUEUE "//           NOTIFY=&SYSUID,MSGCLASS=O                                  "
QUEUE "/*JOBPARM S=ANY,SYSAFF=ANY                                              "
QUEUE "//* C ALL "DB" XXXX                                                     "
QUEUE "//* C ALL "LD" YYMMDD     LASTCYCLE DATE                                "
QUEUE "//* C ALL "POLF" XXXXXXXXX     POLICY NUMBER                            "
QUEUE "//* C ALL "POLH" XXXXXX  LAST 6 DIGIT OF THE POLICY NUMBER              "
QUEUE "//STEPDEL  EXEC PGM=IEFBR14                                             "
QUEUE "//DEL0     DD DISP=(MOD,DELETE),DSN=E7432TS."DB".ULAMAST"SN".N"LD"      "
QUEUE "//STEP01  EXEC PGM=FILEMGR,TIME=20                                      "
QUEUE "//SYSPRINT DD SYSOUT=O                                                  "
QUEUE "//SYSUDUMP DD SYSOUT=O                                                  "
QUEUE "//SYSTOTAL DD SYSOUT=O                                                  "
QUEUE "//DD01     DD DSN=E7432PS0.ULAMAST"SN",DISP=SHR                         "
QUEUE "//DD01O    DD DSN=E7432TS."DB".ULAMAST"SN".N"LD",                       "
QUEUE "//         DISP=(MOD,CATLG,CATLG),SPACE=(CYL,(1,1),RLSE),               "
QUEUE "//         DCB=(RECFM=VB,LRECL=1000,BLKSIZE=20000),                     "
QUEUE "//         UNIT=DELM,VOL=SER=                                           "
QUEUE "//SYSIN DD *                                                            "
QUEUE "$$FILEM DSC  INPUT=DD01,                                                "
QUEUE "$$FILEM   KEY=X'0000000000000000',                                      "
QUEUE "$$FILEM      OUTPUT=DD01O,                                              "
QUEUE "$$FILEM      PROC=*                                                     "
QUEUE " IF FLD(17,3) \== '000000'X                                             "
QUEUE " THEN RETURN STOP IMMEDIATE                                             "
QUEUE "$$FILEM DSC  INPUT=DD01,                                                "
QUEUE "$$FILEM   KEY='  UL000000000"POLF"',                                    "
QUEUE "$$FILEM      OUTPUT=DD01O,                                              "
QUEUE "$$FILEM      PROC=*                                                     "
QUEUE " IF FLD(17,6) \== '"POLH"'                                              "
QUEUE " THEN RETURN STOP IMMEDIATE                                             "
QUEUE "$$FILEM DSC  INPUT=DD01,                                                "
QUEUE "$$FILEM   KEY=X'FFFFFFFFFFFFFFFF',                                      "
QUEUE "$$FILEM      OUTPUT=DD01O,                                              "
QUEUE "$$FILEM      PROC=*                                                     "
QUEUE " IF FLD(17,3) \== 'FFFFFF'X                                             "
QUEUE " THEN RETURN STOP IMMEDIATE                                             "
QUEUE "/*                                                                      "
QUEUE "//**************************************                                "
QUEUE "//STEP02 EXEC PGM=IDCAMS                                                "
QUEUE "//SYSPRINT  DD  SYSOUT=O                                                "
QUEUE "//SYSUDUMP  DD  SYSOUT=O                                                "
QUEUE "//IAMOVRID  DD  *                                                       "
QUEUE "    CREATE  DD=&ALLDD,DATACOMPRESS=YES,OVERFLOW=7000                    "
QUEUE "/*                                                                      "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    DELETE (E7432TS0."DB".ULAMAST"SN") -                                "
QUEUE "       CLUSTER                                                          "
QUEUE "       IF MAXCC > 0 THEN DO                                             "
QUEUE "        SET MAXCC = 0                                                   "
QUEUE "       END                                                              "
QUEUE "        DEFINE CLUSTER(    -                                            "
QUEUE "           NAME(E7432TS0."DB".ULAMAST"SN") -                            "
QUEUE "           MGMTCLAS(D100NR) -                                           "
QUEUE "           OWNER($IAM)    -                                             "
QUEUE "           CYL(1 5)             -                                       "
QUEUE "           RECSZ(500 700)       -                                       "
QUEUE "           FSPC(20 10)          -                                       "
QUEUE "           KEYS(43 0)           -                                       "
QUEUE "           IMBED                -                                       "
QUEUE "           SPEED                -                                       "
QUEUE "           CISZ (4096))         -                                       "
QUEUE "           DATA(NAME(E7432TS0."DB".ULAMAST"SN".DATA))-                  "
QUEUE "           INDEX (NAME(E7432TS0."DB".ULAMAST"SN".INDEX))                "
QUEUE "/*                                                                      "
QUEUE "//STEP03   EXEC PGM=IDCAMS                                              "
QUEUE "//SYSPRINT  DD  SYSOUT=O                                                "
QUEUE "//SYSUDUMP  DD  SYSOUT=O                                                "
QUEUE "//INPUT     DD  DISP=SHR,DSN=E7432TS."DB".ULAMAST"SN".N"LD"             "
QUEUE "//OUTPUT    DD  DISP=SHR,DSN=E7432TS0."DB".ULAMAST"SN"                  "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    REPRO INFILE(INPUT) -                                               "
QUEUE "          OUTFILE(OUTPUT)                                               "
QUEUE "/*                                                                      "
QUEUE '$$'
ADDRESS TSO 'SUB * END($$)'
SAY '*********************************'
SAY "*****E7432TS0."DB".ULAMAST"SN"*****"
SAY "*****E7432TS0."DB".FPRAMST"SN"*****"
SAY "*****E7432TS0."DB".CASHVAL"SN"*****"
SAY "*****E7432TS0."DB".CASHFLW"SN"*****"
SAY '*********************************'
/**REXX**/
TPDS = ""USERID()".VTGI.AUTO.MATION.TOOL.TEMP.PDS"
C = SYSDSN("'"||TPDS||"'") /='OK' ; IF(C==1)THEN ; DO
ADDRESS TSO "ALLOC DA('"||TPDS||"') NEW REU RECFM(F B) LRECL(80)",
"DIR(255) SPACE(10,10) TRACKS UNIT(SYSDA) " ; END
//E7470CDT JOB ('NONVSAMDEL'),MSGCLASS=O,TIME=(0,30),NOTIFY=&SYSUID,    00010001
//    REGION=0M,LINES=99999                                             00020001
/*JOBPARM S=N090                                                        00030001
//******************************************************************    00040001
//*     THIS JOB FETCH ALL PERSENT FILE AND DELETE THOSE FILE           00050002
//*            ONLY PS AND PDS                                          00051002
//******************************************************************    00060001
//******************************************************************    00061002
//*     PER DELETION STEP                                               00062002
//******************************************************************    00063002
//STEP01    EXEC  PGM=IEFBR14                                           00070001
//SYSPRINT  DD    SYSOUT=*                                              00080001
//FILE1     DD    DSN=E7470TS.BSK.CAPPROD1.FB,DISP=(MOD,DELETE)         00090001
//FILE2     DD    DSN=E7470TS.BSK.CAPPROD1.CCLIB.NV,DISP=(MOD,DELETE)   00100003
//FILE3     DD    DSN=E7470TS.BSK.CAPPROD1.SORT,DISP=(MOD,DELETE)       00110001
//******************************************************************    00120001
//*     FETCH ALL THE DATASET'S PRESENTED IN SYSTEM ("F8550P")          00130001
//******************************************************************    00140001
//STEP1    EXEC PGM=IDCAMS                                              00150001
//SYSPRINT DD DSN=E7432TS.BSK.CAPPROD1,DISP=SHR                         00160001
//SYSIN    DD *                                                         00170001
     LISTC LEVEL(F8550P)                                                00180001
/*                                                                      00190001
//******************************************************************    00200001
//*     CONVERT VB INTO FB FILE                                         00210001
//******************************************************************    00220001
//STEP2    EXEC PGM=SORT                                                00230001
//SYSOUT   DD SYSOUT=*                                                  00240001
//SORTIN   DD DISP=SHR,DSN=E7432TS.BSK.CAPPROD1                         00250001
//FBOUT    DD DSN=E7470TS.BSK.CAPPROD1.FB,                              00260001
//            DISP=(NEW,CATLG,DELETE),                                  00270001
//            SPACE=(CYL,(10,5),RLSE),                                  00280001
//            DCB=(RECFM=FB,LRECL=80,BLKSIZE=0)                         00290001
//SYSIN   DD *                                                          00300001
  OPTION COPY                                                           00310001
  OUTFIL FNAMES=FBOUT,VTOF,OUTREC=(5,80)                                00320001
/*                                                                      00330001
//******************************************************************    00340001
//*     SPLIT THE GDG RECORD FROM THE LISTOUT FILE                      00350001
//******************************************************************    00360001
//STEP3     EXEC  PGM=SORT                                              00370001
//SYSPRINT  DD SYSOUT=*                                                 00380001
//SYSOUT    DD SYSOUT=*                                                 00390001
//SORTIN    DD DSN=E7470TS.BSK.CAPPROD1.FB,DISP=SHR                     00400001
//SORTOUT   DD DSN=E7470TS.BSK.CAPPROD1.SORT,                           00410001
//             DISP=(NEW,CATLG,DELETE),                                 00420001
//             SPACE=(CYL,(10,5),RLSE),                                 00430001
//             DCB=(RECFM=FB,LRECL=80,BLKSIZE=0)                        00440001
//SYSIN     DD    *                                                     00450001
     SORT FIELDS=COPY                                                   00460001
     INCLUDE COND=(2,7,CH,EQ,C'NONVSAM')                                00470001
/*                                                                      00480001
//******************************************************************    00490001
//*     MAKE THE CCLIB FORMAT FOR DELETE STEP                           00500001
//******************************************************************    00510001
//STEP4     EXEC  PGM=SORT                                              00520001
//SYSPRINT  DD SYSOUT=*                                                 00530001
//SYSOUT    DD SYSOUT=*                                                 00540001
//SORTIN    DD DSN=E7470TS.BSK.CAPPROD1.SORT,DISP=SHR                   00550001
//SORTOUT   DD DSN=E7470TS.BSK.CAPPROD1.CCLIB.NV,                       00560003
//             DISP=(NEW,CATLG,DELETE),                                 00570001
//             LIKE=E7470TS.BSK.CAPPROD1.SORT                           00580001
//SYSIN     DD    *                                                     00590001
  SORT FIELDS=COPY                                                      00600001
  OUTREC FIELDS=(05:C'DELETE',12:18,42,80:X)                            00610001
/*                                                                      00620001
//******************************************************************    00630001
//*     TO DELETE THE ENTIRE THE PS FILE AND PDS                        00640004
//******************************************************************    00650001
//DELGDG    EXEC  PGM=IDCAMS                                            00660001
//SYSPRINT  DD    SYSOUT=*                                              00670001
//*SYSIN     DD    DISP=SHR,DSN=E7470TS.BSK.CAPPROD1.CCLIB.NV           00680003
//SYSIN     DD *                                                        00690001
//E7470CDT JOB ('GDGDELETE'),MSGCLASS=O,TIME=(0,30),NOTIFY=&SYSUID,     00010004
//    REGION=0M,LINES=99999                                             00020004
/*JOBPARM S=N090                                                        00030004
//******************************************************************    00031006
//*     THIS JOB FETCH ALL PERSENT FILE AND DELETE THOSE FILE           00032006
//*            ONLY PS AND PDS                                          00033006
//******************************************************************    00040004
//******************************************************************    00041006
//*     PER DELETION STEP                                               00050004
//******************************************************************    00060004
//STEP01    EXEC  PGM=IEFBR14                                           00070004
//SYSPRINT  DD    SYSOUT=*                                              00080004
//FILE0     DD    DSN=E7470TS.BSK.CAPPROD.FB,DISP=(MOD,DELETE)          00090004
//FILE1     DD    DSN=E7470TS.BSK.CAPPROD.GDG,DISP=(MOD,DELETE)         00100004
//FILE3     DD    DSN=E7470TS.BSK.CAPPROD.CLUSTER,DISP=(MOD,DELETE)     00110004
//FILE4     DD    DSN=E7470TS.BSK.CAPPROD.GDG.CCLIB,                    00120004
//             DISP=(MOD,DELETE)                                        00130004
//FILE5     DD    DSN=E7470TS.BSK.CAPPROD.CLUSTER.CCLIB,                00140004
//             DISP=(MOD,DELETE)                                        00150004
//FILE6     DD    DSN=E7470TS.BSK.CAPPROD.CCLIB.VG,                     00160007
//             DISP=(MOD,DELETE)                                        00170004
//******************************************************************    00180004
//*     FETCH ALL THE DATASET'S PRESENTED IN SYSTEM ("F8550P")          00190004
//******************************************************************    00200004
//STEP1    EXEC PGM=IDCAMS                                              00210004
//SYSPRINT DD DSN=E7432TS.BSK.CAPPROD,DISP=SHR                          00220004
//SYSIN    DD *                                                         00230004
     LISTC LEVEL(F8550PDB)                                              00240008
/*                                                                      00250004
//******************************************************************    00260004
//*     CONVERT VB INTO FB FILE                                         00270004
//******************************************************************    00280004
//STEP2    EXEC PGM=SORT                                                00290004
//SYSOUT   DD SYSOUT=*                                                  00300004
//SORTIN   DD DISP=SHR,DSN=E7432TS.BSK.CAPPROD                          00310004
//FBOUT    DD DSN=E7470TS.BSK.CAPPROD.FB,                               00320004
//            DISP=(NEW,CATLG,DELETE),                                  00330004
//            SPACE=(CYL,(10,5),RLSE),                                  00340004
//            DCB=(RECFM=FB,LRECL=80,BLKSIZE=0)                         00350004
//SYSIN   DD *                                                          00360004
  OPTION COPY                                                           00370004
  OUTFIL FNAMES=FBOUT,VTOF,OUTREC=(5,80)                                00380004
/*                                                                      00390004
//******************************************************************    00400004
//*     SPLIT THE GDG RECORD FROM THE LISTOUT FILE                      00410004
//******************************************************************    00420004
//STEP3     EXEC  PGM=SORT                                              00430004
//SYSPRINT  DD SYSOUT=*                                                 00440004
//SYSOUT    DD SYSOUT=*                                                 00450004
//SORTIN    DD DSN=E7470TS.BSK.CAPPROD.FB,DISP=SHR                      00460004
//OUTFIL1   DD DSN=E7470TS.BSK.CAPPROD.GDG,                             00470004
//             DISP=(NEW,CATLG,DELETE),                                 00480004
//             SPACE=(CYL,(10,5),RLSE),                                 00490004
//             DCB=(RECFM=FB,LRECL=80,BLKSIZE=0)                        00500004
//OUTFIL2 DD DSN=E7470TS.BSK.CAPPROD.CLUSTER,                           00510004
//             DISP=(NEW,CATLG,DELETE),                                 00520004
//             SPACE=(CYL,(10,5),RLSE),                                 00530004
//             DCB=(RECFM=FB,LRECL=80,BLKSIZE=0)                        00540004
//SYSIN     DD    *                                                     00550004
     SORT FIELDS=COPY                                                   00560004
     OUTFIL FNAMES=OUTFIL1,INCLUDE=(2,3,CH,EQ,C'GDG')                   00570004
     OUTFIL FNAMES=OUTFIL2,INCLUDE=(2,7,CH,EQ,C'CLUSTER')               00580004
/*                                                                      00590004
//******************************************************************    00600004
//*     MAKE THE CCLIB FORMAT FOR DELETE STEP                           00610004
//******************************************************************    00620004
//STEP4     EXEC  PGM=SORT                                              00630004
//SYSPRINT  DD SYSOUT=*                                                 00640004
//SYSOUT    DD SYSOUT=*                                                 00650004
//SORTIN    DD DSN=E7470TS.BSK.CAPPROD.GDG,DISP=SHR                     00660004
//SORTOUT   DD DSN=E7470TS.BSK.CAPPROD.GDG.CCLIB,                       00670004
//             DISP=(NEW,CATLG,DELETE),                                 00680004
//             LIKE=E7470TS.BSK.CAPPROD.GDG                             00690004
//SYSIN     DD    *                                                     00700004
  SORT FIELDS=COPY                                                      00710004
  OUTREC FIELDS=(05:C'DELETE',12:18,42,61:C'GDG FORCE',80:X)            00720004
/*                                                                      00730004
//STEP5     EXEC  PGM=SORT                                              00740004
//SYSPRINT  DD SYSOUT=*                                                 00750004
//SYSOUT    DD SYSOUT=*                                                 00760004
//SORTIN    DD DSN=E7470TS.BSK.CAPPROD.CLUSTER,DISP=SHR                 00770004
//SORTOUT   DD DSN=E7470TS.BSK.CAPPROD.CLUSTER.CCLIB,                   00780004
//             DISP=(NEW,CATLG,DELETE),                                 00790004
//             LIKE=E7470TS.BSK.CAPPROD.GDG                             00800004
//SYSIN     DD    *                                                     00810004
  SORT FIELDS=COPY                                                      00820004
  OUTREC FIELDS=(05:C'DELETE',12:18,42,61:C'CLUSTER',80:X)              00830004
/*                                                                      00840004
//******************************************************************    00850004
//*     COMBINE TWO CCLIB FILE GDG AND VSAM CLUSTER                     00860004
//******************************************************************    00870004
//STEP6     EXEC  PGM=SORT                                              00880004
//SYSPRINT  DD SYSOUT=*                                                 00890004
//SYSOUT    DD SYSOUT=*                                                 00900004
//SORTIN    DD DSN=E7470TS.BSK.CAPPROD.GDG.CCLIB,DISP=SHR               00910005
//          DD DSN=E7470TS.BSK.CAPPROD.CLUSTER.CCLIB,DISP=SHR           00920004
//SORTOUT   DD DSN=E7470TS.BSK.CAPPROD.CCLIB.VG,                        00930007
//             DISP=(NEW,CATLG,DELETE),                                 00940004
//             LIKE=E7470TS.BSK.CAPPROD.GDG                             00950004
//SYSIN     DD    *                                                     00960004
  SORT FIELDS=COPY                                                      00970004
/*                                                                      00980004
//******************************************************************    00990004
//*     TO DELETE THE ENTIRE VSAM AND GDG                               01000005
//******************************************************************    01010004
//DELETE    EXEC  PGM=IDCAMS                                            01020004
//SYSPRINT  DD    SYSOUT=*                                              01030004
//*SYSIN     DD    DISP=SHR,DSN=E7470TS.BSK.CAPPROD.CCLIB.VG            01040007
//SYSIN     DD *                                                        01050004
)ATTR
 + TYPE(TEXT)   INTENS(HIGH) COLOR(WHITE) CAPS(OFF)
 ! TYPE(INPUT)  INTENS(HIGH)  COLOR(GREEN)  HILITE(USCORE)
 # TYPE(TEXT)   INTENS(HIGH) COLOR(BLUE)  CAPS(OFF)
 @ TYPE(TEXT)   INTENS(LOW)  COLOR(GREEN) CAPS(OFF) HILITE(BLINK)
 ? TYPE(TEXT)   INTENS(LOW)  COLOR(RED)  CAPS(OFF)
 _ TYPE(INPUT)  INTENS(HIGH) COLOR(GREEN) PAD('_')
 / TYPE(OUTPUT)  INTENS(HIGH) COLOR(PINK) HILITE(BLINK)
 $ TYPE(OUTPUT)  INTENS(HIGH) COLOR(PINK) CAPS(ON) SKIP(OFF)
)BODY WINDOW(80,22)
      #
      #
      #@COMMAND+===>?!CMD                                                ?#
      #
      #*******************************************************************#
      #******************* +VTG1 CYCLE AUTOMATION+#***********************#    +
      #*******************************************************************#
      ?-------------------------------------------------------------------?
      ?|+ENTER THE CURRENT DATE (GL0066) IN FORMAT OF YYMMDD ==>_CD    +?|
      ?|+ENTER THE LAST DATE    (GL0067) IN FORMAT OF YYMMDD ==>_LD    +?|
      ?|+BLANK MINIDB NAME NOTE:- ONLY FIVE CHAR EG:-TEST6   ==>_DB   + ?|
      ?|+ENTER THE STRIPOUT FILE OR (SFAP0025.DD07 DD DSN=) IN FAP JOB +?|
      ?|+==>_STR                                                       +?|
      ?|+LOADLIB==>_LB                            +                     ?|
      ?-------------------------------------------------------------------?
      #************?ENTER+=@CONTINUE  ?PRESS F3+=@EXIT#*******************#
      #*******************************************************************#
      #******************* +VTG1 CYCLE AUTOMATION+#***********************#    +
      #*******************************************************************#
)INIT
*REXX(CDX,LDX)
TODAY = DATE('E')
DD =SUBSTR(TODAY,01,02);MM =SUBSTR(TODAY,04,02);YY =SUBSTR(TODAY,07,02)
IF (MM>10) THEN;DO;LM=MM-1;END;ELSE;DO;LM='0'||MM-1;END
CDX = YY||MM||DD;CDXM= YY||LM||28
DF1= "'E7440PS.VAN30.FEEDBKV1.N"CDX-1"'";CF1 = SYSDSN(DF1) /='OK';
DF2= "'E7440PS.VAN30.FEEDBKV1.N"CDX-2"'";CF2 = SYSDSN(DF2) /='OK';
DF3= "'E7440PS.VAN30.FEEDBKV1.N"CDX-3"'";CF3 = SYSDSN(DF3) /='OK';
DF4= "'E7440PS.VAN30.FEEDBKV1.N"CDX-4"'";CF4 = SYSDSN(DF4) /='OK';
DF5= "'E7440PS.VAN30.FEEDBKV1.N"CDXM"'";CF5 = SYSDSN(DF5) /='OK';
DF6= "'E7440PS.VAN30.FEEDBKV1.N"CDXM+1"'";CF6 = SYSDSN(DF6) /='OK';
DF7= "'E7440PS.VAN30.FEEDBKV1.N"CDXM+2"'";CF7 = SYSDSN(DF7) /='OK';
DF8= "'E7440PS.VAN30.FEEDBKV1.N"CDXM+3"'";CF8 = SYSDSN(DF8) /='OK';
SELECT
WHEN(CF1=0)THEN;DO;LDX=CDX-1;END;
WHEN(CF2=0)THEN;DO;LDX=CDX-2;END;
WHEN(CF3=0)THEN;DO;LDX=CDX-3;END;
WHEN(CF4=0)THEN;DO;LDX=CDX-4;END;
WHEN(CF8=0)THEN;DO;LDX=CDXM+3;END;
WHEN(CF7=0)THEN;DO;LDX=CDXM+2;END;
WHEN(CF6=0)THEN;DO;LDX=CDXM+1;END;
WHEN(CF5=0)THEN;DO;LDX=CDXM;END;
OTHERWISE;LDX=CDX-1         ;END;
*ENDREXX
  &CD = '&CDX'
  &LD = '&LDX'
  &DB = ''
  &LB = 'K9900P.STGT@A.VTGI.#020371.NLB'
  &STR = ''
  &AMT = CSR
  &PKEY = .PFKEY
)PROC
       VER (&CD,NB,NUM)
       VER (&LD,NB,NUM)
       VER (&DB,NB)
)END
)PANEL
)ATTR
  + TYPE(TEXT)  INTENS(LOW)  COLOR(GREEN)
  ~ TYPE(TEXT)  INTENS(HIGH)  COLOR(RED)
  ! TYPE(TEXT)  INTENS(HIGH)  COLOR(WHITE)
  \ TYPE(INPUT)  INTENS(HIGH)  COLOR(GREEN)  HILITE(USCORE)
  $ TYPE(OUTPUT)  INTENS(HIGH)  HILITE(USCORE)
)BODY WINDOW(30,18)
+        MENU VTG1 CYCLE     +
+
+COMMAND ===> \CMD           +
+
+OPTION ~===>\O+
%===========================
%*        VTG1 CYCLE      %*
%===========================
%*    %1.~VTG1+E7440FAP   %*
%*    %2.~VTG1+E7440XXP   %*
%*    %3.~VTG1+E7440G*P   %*
%*    %4.~VTG1+E7440HKP   %*
%===========================
%*        %X.~EXIT        %*
%*+                       %*
%===========================
)INIT
&PKEY = .PFKEY
)REINIT
)PROC
VER (&O,LIST,'1','2','3','4','X',MSG=REPORTMD)
)END
//E7470RPT JOB ('E7440T0'),TIME=(,3),MSGCLASS=O,NOTIFY=&SYSUID          00010001
/*JOBPARM SYSAFF=N090                                                   00020001
//STEP1    EXEC PGM=IDCAMS                                              00030001
//SYSPRINT DD SYSOUT=O                                                  00040001
//INDD01   DD DISP=SHR,DSN=E7440TT0.IAD21.COMP.CLPROD                   00050002
//OUTDD01  DD DISP=SHR,DSN=E7440TT0.IAD21.DIRECT2                       00060002
//SYSIN    DD *                                                         00070001
      REPRO    INFILE(INDD01)   OUTFILE(OUTDD01) -                      00080001
      REPLACE                                                           00090001
/*                                                                      00100001
//STEP2    EXEC PGM=IDCAMS                                              00110002
//SYSPRINT DD SYSOUT=O                                                  00120001
//INDD01   DD DISP=SHR,DSN=E7440TT0.IAD21.COMP.CLPROD                   00130002
//OUTDD01  DD DISP=SHR,DSN=E7440TT0.IAD21.DIRECT                        00140002
//SYSIN    DD *                                                         00150001
      REPRO    INFILE(INDD01)   OUTFILE(OUTDD01) -                      00160001
      REPLACE                                                           00170001
/*                                                                      00180001
//E7470RPT JOB ('E7445T0'),TIME=(,3),MSGCLASS=D,NOTIFY=&SYSUID          00010001
/*JOBPARM SYSAFF=N090                                                   00020000
//STEP1    EXEC PGM=IDCAMS                                              00030000
//SYSPRINT DD SYSOUT=O                                                  00040000
//INDD01   DD DISP=SHR,DSN=E7445TT0.DB822.RESTRICT.COMP.CLPROD          00050001
//OUTDD01  DD DSN=E7445TT0.RC822.CLPROD,DISP=SHR                        00060001
//SYSIN    DD *                                                         00070000
      REPRO    INFILE(INDD01)   OUTFILE(OUTDD01) -                      00080000
      REPLACE                                                           00090000
/*                                                                      00100000
//E7445RPT JOB ('E7445T0'),TIME=(,3),MSGCLASS=D,NOTIFY=&SYSUID          JOB04211
/*JOBPARM SYSAFF=N090
//STEP1    EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=O
//INDD01   DD DSN=E7445TT0.VAN15.RESTRICT.COMP.CLPROD,DISP=SHR
//OUTDD01  DD DSN=E7445PS0.VAN15.CLPROD,DISP=SHR
//SYSIN    DD *
      REPRO    INFILE(INDD01)   OUTFILE(OUTDD01) -
      REPLACE
/*
//E7445RPT JOB ('E7445T0'),TIME=(,3),MSGCLASS=D,NOTIFY=&SYSUID          00010000
/*JOBPARM SYSAFF=N090                                                   00020000
//STEP1    EXEC PGM=IDCAMS                                              00030000
//SYSPRINT DD SYSOUT=O                                                  00040000
//INDD01   DD DSN=E7445TT0.IB656.RESTRICT.COMP.TRXHIST,DISP=SHR         00050000
//OUTDD01  DD DSN=E7445TT0.IM196.TRXHIST,DISP=SHR                       00060000
//SYSIN    DD *                                                         00070000
      REPRO    INFILE(INDD01)   OUTFILE(OUTDD01) -                      00080000
      REPLACE                                                           00090000
/*                                                                      00100000
/*REXX*/
PARSE ARG DB','SN','LD
/********************************************************************/
/**START**************TSO USER ID***********************************/
URN=USERID()
JOBID=SUBSTR(URN,1,5)
/**END****************TSO USER ID***********************************/
QUEUE "//"JOBID"R"SN"T JOB ('E7432TE',,999),TIME=5,NOTIFY=&SYSUID,             "
QUEUE "//         MSGCLASS=O                                                   "
QUEUE "//*DEVICE=(TAPE3,2)                                                     "
QUEUE "//STEP02   EXEC PGM=IDCAMS                                              "
QUEUE "//SYSPRINT DD  SYSOUT=*                                                 "
QUEUE "//SYSUDUMP DD  SYSOUT=*                                                 "
QUEUE "//IAMOVRID DD *                                                         "
QUEUE "    CREATE DD=&ALLDD,DATACOMPRESS=YES,OVERFLOW=5000                     "
QUEUE "/*                                                                      "
QUEUE "//SYSIN    DD *                                                         "
QUEUE "    DELETE (E7432TS0."DB".CASHFLW"SN") -                                "
QUEUE "       CLUSTER                                                          "
QUEUE "    IF MAXCC > 0 THEN DO                                                "
QUEUE "       SET MAXCC = 0                                                    "
QUEUE "       END                                                              "
QUEUE "        DEFINE CLUSTER(              -                                  "
QUEUE "        NAME(E7432TS0."DB".CASHFLW"SN") -                               "
QUEUE "              VOL(* * * * *)                      -                     "
QUEUE "              MGMTCLAS(D100)            -                               "
QUEUE "              OWNER($IAM)            -                                  "
QUEUE "              UNIQUE                 -                                  "
QUEUE "              FSPC(5 2)              -                                  "
QUEUE "              KEYS(16 0)             -                                  "
QUEUE "              SPEED                  -                                  "
QUEUE "              NOIMBED)               -                                  "
QUEUE "         DATA -                                                         "
QUEUE "        (NAME(E7432TS0."DB".CASHFLW"SN".DATA) -                         "
QUEUE "               CYL(440 440) -                                           "
QUEUE "               RECSZ(28 1432) -                                         "
QUEUE "               CISZ(6144)) -                                            "
QUEUE "         INDEX -                                                        "
QUEUE "        (NAME(E7432TS0."DB".CASHFLW"SN".INDEX) -                        "
QUEUE "               CISZ(1024))                                              "
QUEUE "/*                                                                      "
QUEUE "//STEP03   EXEC PGM=IDCAMS,REGION=3500K,TIME=30                         "
QUEUE "//SYSPRINT DD  SYSOUT=*                                                 "
QUEUE "//SYSUDUMP DD  SYSOUT=*                                                 "
QUEUE "//IAMINFO  DD  SYSOUT=*                                                 "
QUEUE "//INPUT    DD DSN=E7432PS.ULA40.CASHFLW"SN".N"LD",DISP=SHR,             "
QUEUE "//         UNIT=TAPE3                                                   "
QUEUE "//*        UNIT=TAPE3,VOL=SER=N41521                                    "
QUEUE "//OUTPUT   DD DSN=E7432TS0."DB".CASHFLW"SN",                            "
QUEUE "//         DISP=SHR,AMP='BUFND=32'                                      "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    REPRO INFILE(INPUT) -                                               "
QUEUE "          OUTFILE(OUTPUT)                                               "
QUEUE "/*                                                                      "
QUEUE "//"JOBID"F"SN"T JOB TIME=4,NOTIFY=&SYSUID,MSGCLASS=O                    "
QUEUE "//*DEVICE=(TAPE3,2)                                                     "
QUEUE "//STEP02   EXEC PGM=IDCAMS                                              "
QUEUE "//SYSPRINT DD  SYSOUT=*                                                 "
QUEUE "//SYSUDUMP DD  SYSOUT=*                                                 "
QUEUE "//IAMOVRID DD *                                                         "
QUEUE "    CREATE DD=&ALLDD,DATACOMPRESS=YES,OVERFLOW=9000                     "
QUEUE "/*                                                                      "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    DELETE (E7432TS0."DB".FPRAMST"SN") -                                "
QUEUE "       CLUSTER                                                          "
QUEUE "    IF MAXCC > 0 THEN DO                                                "
QUEUE "       SET MAXCC = 0                                                    "
QUEUE "       END                                                              "
QUEUE "    DEFINE CLUSTER(                -                                    "
QUEUE "    NAME(E7432TS0."DB".FPRAMST"SN") -                                   "
QUEUE "           VOL(* *)                -                                    "
QUEUE "           MGMTCLAS(D8)            -                                    "
QUEUE "           OWNER($IAM)             -                                    "
QUEUE "           FSPC(15 2)              -                                    "
QUEUE "           KEYS(30 0)              -                                    "
QUEUE "           IMBED                   -                                    "
QUEUE "           SPEED)                  -                                    "
QUEUE "    DATA -                                                              "
QUEUE "    (NAME(E7432TS0."DB".FPRAMST"SN".DATA) -                             "
QUEUE "           CYL(440 200)            -                                    "
QUEUE "           RECSZ(500 700)          -                                    "
QUEUE "           CISZ (8192))            -                                    "
QUEUE "    INDEX -                                                             "
QUEUE "    (NAME(E7432TS0."DB".FPRAMST"SN".INDEX) -                            "
QUEUE "           CISZ (1024))                                                 "
QUEUE "/*                                                                      "
QUEUE "//STEP03   EXEC PGM=IDCAMS,REGION=3500K,TIME=30                         "
QUEUE "//SYSPRINT DD  SYSOUT=*                                                 "
QUEUE "//SYSUDUMP DD  SYSOUT=*                                                 "
QUEUE "//IAMINFO  DD  SYSOUT=*                                                 "
QUEUE "//INPUT    DD DSN=E7432PS.ULA40.FPRAMST"SN".N"LD",DISP=SHR,             "
QUEUE "//         UNIT=TAPE3                                                   "
QUEUE "//*        UNIT=TAPE3,VOL=SER=N41431                                    "
QUEUE "//OUTPUT   DD DSN=E7432TS0."DB".FPRAMST"SN",                            "
QUEUE "//         DISP=SHR,AMP='BUFND=32'                                      "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    REPRO INFILE(INPUT) -                                               "
QUEUE "          OUTFILE(OUTPUT)                                               "
QUEUE "/*                                                                      "
QUEUE "//"JOBID"U"SN"T JOB TIME=3,NOTIFY=&SYSUID,MSGCLASS=O                    "
QUEUE "//*DEVICE=(TAPE3,2)                                                     "
QUEUE "//STEP02   EXEC PGM=IDCAMS                                              "
QUEUE "//SYSPRINT DD SYSOUT=*                                                  "
QUEUE "//SYSUDUMP DD SYSOUT=*                                                  "
QUEUE "//IAMOVRID DD *                                                         "
QUEUE "    CREATE DD=&ALLDD,DATACOMPRESS=YES,OVERFLOW=7000                     "
QUEUE "/*                                                                      "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    DELETE (E7432TS0."DB".ULAMAST"SN") -                                "
QUEUE "       CLUSTER                                                          "
QUEUE "    IF MAXCC > 0 THEN DO                                                "
QUEUE "       SET MAXCC = 0                                                    "
QUEUE "       END                                                              "
QUEUE "    DEFINE CLUSTER(             -                                       "
QUEUE "    NAME(E7432TS0."DB".ULAMAST"SN") -                                   "
QUEUE "           OWNER($IAM)          -                                       "
QUEUE "           VOL(* *)             -                                       "
QUEUE "           MGMTCLAS(D8)         -                                       "
QUEUE "           FSPC(20 10)          -                                       "
QUEUE "           KEYS(43 0)           -                                       "
QUEUE "           NOIMBED              -                                       "
QUEUE "           SPEED)               -                                       "
QUEUE "     DATA(NAME(E7432TS0."DB".ULAMAST"SN".DATA) -                        "
QUEUE "           CYL(600 10)          -                                       "
QUEUE "           RECSZ(500 700)       -                                       "
QUEUE "           CISZ (8192))         -                                       "
QUEUE "     INDEX (NAME(E7432TS0."DB".ULAMAST"SN".INDEX) -                     "
QUEUE "           CISZ (2048))                                                 "
QUEUE "/*                                                                      "
QUEUE "//STEP03   EXEC PGM=IDCAMS,TIME=30                                      "
QUEUE "//SYSPRINT DD  SYSOUT=*                                                 "
QUEUE "//SYSUDUMP DD  SYSOUT=*                                                 "
QUEUE "//IAMINFO  DD  SYSOUT=*                                                 "
QUEUE "//INPUT    DD DSN=E7432PS.ULA40.ULAMAST"SN".N"LD",DISP=SHR,             "
QUEUE "//         UNIT=TAPE3                                                   "
QUEUE "//*        UNIT=TAPE3,VOL=SER=N41495                                    "
QUEUE "//OUTPUT   DD DSN=E7432TS0."DB".ULAMAST"SN",                            "
QUEUE "//         DISP=SHR                                                     "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    REPRO INFILE(INPUT) -                                               "
QUEUE "          OUTFILE(OUTPUT)                                               "
QUEUE "/*                                                                      "
QUEUE "//"JOBID"V"SN"T JOB TIME=2,NOTIFY=&SYSUID,MSGCLASS=O                    "
QUEUE "//*DEVICE=(TAPE3,2)                                                     "
QUEUE "//STEP02   EXEC PGM=IDCAMS                                              "
QUEUE "//SYSPRINT DD  SYSOUT=*                                                 "
QUEUE "//SYSUDUMP DD  SYSOUT=*                                                 "
QUEUE "//IAMOVRID DD *                                                         "
QUEUE "    CREATE DD=&ALLDD,DATACOMPRESS=YES,OVERFLOW=1500                     "
QUEUE "/*                                                                      "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    DELETE (E7432TS0."DB".CASHVAL"SN") -                                "
QUEUE "       CLUSTER                                                          "
QUEUE "    IF MAXCC > 0 THEN DO                                                "
QUEUE "       SET MAXCC = 0                                                    "
QUEUE "       END                                                              "
QUEUE "        DEFINE CLUSTER(                -                                "
QUEUE "        NAME(E7432TS0."DB".CASHVAL"SN") -                               "
QUEUE "               OWNER($IAM)             -                                "
QUEUE "               VOL(* *)                -                                "
QUEUE "               MGMTCLAS(D8)            -                                "
QUEUE "               KEYS(10 0)              -                                "
QUEUE "               RECORDSIZE(500 1412)    -                                "
QUEUE "               CYL(140 10)             -                                "
QUEUE "               FREESPACE(10 10)        -                                "
QUEUE "               IMBED                   -                                "
QUEUE "               SPEED)-                                                  "
QUEUE "         DATA -                                                         "
QUEUE "         (NAME(E7432TS0."DB".CASHVAL"SN".DATA) -                        "
QUEUE "               CISZ(6144)) -                                            "
QUEUE "         INDEX -                                                        "
QUEUE "         (NAME(E7432TS0."DB".CASHVAL"SN".INDEX) -                       "
QUEUE "               CISZ(1024))                                              "
QUEUE "/*                                                                      "
QUEUE "//STEP03   EXEC PGM=IDCAMS,TIME=30                                      "
QUEUE "//SYSPRINT DD  SYSOUT=*                                                 "
QUEUE "//SYSUDUMP DD  SYSOUT=*                                                 "
QUEUE "//IAMINFO  DD  SYSOUT=*                                                 "
QUEUE "//INPUT    DD DSN=E7432PS.ULA40.CASHVAL"SN".N"LD",DISP=SHR,             "
QUEUE "//         UNIT=TAPE3                                                   "
QUEUE "//*        UNIT=TAPE3,VOL=SER=N41799                                    "
QUEUE "//OUTPUT   DD DSN=E7432TS0."DB".CASHVAL"SN",                            "
QUEUE "//         DISP=SHR                                                     "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    REPRO INFILE(INPUT) -                                               "
QUEUE "          OUTFILE(OUTPUT)                                               "
QUEUE "/*                                                                      "
QUEUE "/*                                                                      "
QUEUE '$$'
ADDRESS TSO 'SUB * END($$)'
//E7445TST JOB ('E7470BV',,99),TIME=(,9),MSGCLASS=O,NOTIFY=&SYSUID
/*JOBPARM S=ANY
//*PROCLIB  JCLLIB ORDER=(E7445TS.VAN15.USERPROC)
//**********************************************************************
//*** THIS JOB WILL PUT ANY GIVEN POLICY(S) IN SOUVKCRESTRICT  *********
//*** 021         = THE COMPANY CODE OF THE POLICY             *********
//*** 993500009B3 = THE POLICY NUMBER YOU WISH TO SOUVK.RESTRICT *********
//**********************************************************************
//STEP1    EXEC PGM=FILEAID,TIME=15
//SYSPRINT DD SYSOUT=*
//SYSUDUMP DD SYSOUT=*
//SYSTOTAL DD SYSOUT=*
//DD01     DD DSN=E7445PS0.VAN15.CLPROD,
//         DISP=SHR
//DD01O    DD DSN=&&CLPROD,
//         DISP=(NEW,PASS,DELETE),
//         SPACE=(CYL,(5,1),RLSE),
//         UNIT=SYSDA,
//         DCB=(RECFM=VB,LRECL=4092,BLKSIZE=0)
//SYSIN    DD *
$$DD01 COPY   KEY=C'021    996605381D1DB',OUT=1
/*
//*
//*********************************************************************
//DELDEF   EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//*
//SYSIN    DD *
   DELETE            (E7445TS0.SOUVK.RESTRICT.CLPROD) CLUSTER
   SET MAXCC=0
  DEFINE                                                    -
  CLUSTER                                                   -
          (NAME     (E7445TS0.SOUVK.RESTRICT.CLPROD)        -
           MGMTCLAS  (D100)                                 -
           MODEL    (E7445PS0.VAN15.CLPROD))
/*
//*
//STEP3    EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//INDD01   DD DSN=&&CLPROD,DISP=OLD
//OUTDD01  DD DSN=E7445TS0.SOUVK.RESTRICT.CLPROD,DISP=SHR
//SYSIN    DD *
      REPRO    INFILE(INDD01)     OUTFILE(OUTDD01)
/*
//*
//* THIS STEP WILL EXPAND THE SOUVK.RESTRICT.CLPROD
//*
//E744511P EXEC E744511P,
//*   SYMBOLICS TO BE SET FOR FILE TO BE DECOMPRESSED
//*        LIB01='MSTCMN.VABR.USERLINK',
//*        LIB01A='MSTCMN.VABR.USERLINK',
//*        PRODLIB='MSTCMN.VABR.USERLINK',
//*        PARMLIB='MSTCMN.VABR.NCCLIB',
//*        RUNLIB='MSTCMN.VABR.NCCLIB',
//         JCLCLS='*',
//         RUNLOG='*',
//         PARMLST='G',             ** FOR CLPROD/OTHERS
//*        PARMLST='GTRXHIST',      ** FOR TRXHIST/CASHFLW/DIRECT/SCHED
//         DNAME='CLPROD',
//         VFLIDI=E7445TS0,         ** VSAM QUAL - INPUT
//         VFLIDO=E7445TS0,         ** VSAM QUAL - OUTPUT
//         VAN15I='SOUVK.RESTRICT', ** INPUT DSN QUALIFIER
//         VAN15O='SOUVK.RESTRICT'  ** OUTPUT DSN QUALIFIER
//*
//* THIS STEP WILL UPDATE THE SOUVK.RESTRICT CODE
//*
//STEP5    EXEC PGM=FILEAID
//SYSPRINT DD SYSOUT=*
//DD01     DD DSN=E7445TS0.SOUVK.RESTRICT.EXPN.CLPROD,DISP=SHR
//DD01O    DD DSN=E7445TS0.SOUVK.RESTRICT.EXPN.CLPROD,DISP=SHR
//SYSIN    DD  *
$$DD01 UPDATE IF=(19,EQ,C'DB'),
              REPL=(102,EQ,C'V',C' ')
/*
//*
//* THIS STEP WILL COMPRESS THE CLPROD
//*
//E744512P EXEC E744512P,
//*   SYMBOLICS TO BE SET FOR FILE TO BE COMPRESSED
//*        LIB02='MSTCMN.VABR.USERLINK',
//*        LIB02A='MSTCMN.VABR.USERLINK',
//*        PRODLIB='MSTCMN.VABR.USERLINK',
//*        PARMLIB='MSTCMN.VABR.NCCLIB',
//*        RUNLIB='MSTCMN.VABR.NCCLIB',
//         JCLCLS='*',
//         RUNLOG='*',
//         PARMLST='P',              ** FOR CLPROD/OTHERS
//*        PARMLST='PTRXHIST',       ** FOR TRXHIST/CASHFLW/DIRECT/SCHED
//         DNAME='CLPROD',
//         VSAMFLE='COMPFLE',        ** CLPROD/OTHERS
//*        VSAMFLE='COMPFLE2',       ** FOR TRXHIST/CASHFLW/DIRECT/SCHED
//         VFLIDI=E7445TS0,          ** VSAM QUAL INPUT
//         VFLIDO=E7445TS0,          ** VSAM QUAL OUTPUT
//         VAN15I='SOUVK.RESTRICT',  ** INPUT DSN QUALIFIER
//         VAN15O='SOUVK.RESTRICT'   ** OUTPUT DSN QUALIFIER
//*
//* THIS STEP WILL COPY THE SOUVKED SOUVK.RESTRICTED POLICY IN PROD CLPROD
//*
//STEP7    EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//SYSOUT   DD SYSOUT=*
//INDD01   DD DSN=E7445TS0.SOUVK.RESTRICT.COMP.CLPROD,DISP=SHR
//OUTDD01  DD DSN=E7445TT0.SOUVB.CLPROD,DISP=SHR
//SYSIN    DD *
      REPRO    INFILE(INDD01)     OUTFILE(OUTDD01) -
      REPLACE
/*
//*
//* THIS STEP WILL DELETE THE TEMPORARY CLPROD
//*
//STEP8    EXEC PGM=IDCAMS,COND=(0,LE)
//SYSPRINT DD SYSOUT=*
//SYSOUT   DD SYSOUT=*
//SYSIN    DD *                                                         MLG00550
   DELETE (E7445TS0.SOUVK.RESTRICT.CLPROD) CLUSTER                            G0
   DELETE (E7445TS0.SOUVK.RESTRICT.EXPN.CLPROD) CLUSTER                       G0
   DELETE (E7445TS0.SOUVK.RESTRICT.COMP.CLPROD) CLUSTER                       G0
/*
//                                                                      MLG00120
/**REXX**/
/* SCHED FILE COPY THIS PRODUCTION INTO TEST */
/* FOR MINIDB CREATION COMPANY CODE PICKUP THE VALUE */
VSAM_FILE="'E7440PS0.VAN30.SCHED'"
SEQ_FILE ="'E7470TS.SAYANI.SCHED'"
ADDRESS TSO "DEL "SEQ_FILE""
"ALLOC FI(INDD) DA("VSAM_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("SEQ_FILE") SHR REUSE",
"NEW SPACE (100,200) DSORG(PS) RECFM(V B) LRECL(1555) BLKSIZE(15550)"
ADDRESS TSO "REPRO INFILE(INDD) OUTFILE(OUTDD) "
"FREE FI(INDD)"
"FREE FI(OUTDD)"

EXIT 0
//E7470CPT JOB NOTIFY=&SYSUID                                           00010000
/*JOBPARM SYSAFF=A090                                                   00020000
// SET NAME=PO113    <- NAME FILE                                       00030000
//E744112P PROC PARMLST=,                   ** PROGRAM PARAMETER LIST   00040000
//         RESOLVE='PMPFILES',              ** SPACE ALLOCATION         00050000
//         LIB01='E7440PS.VAN30.LOADLIB',   ** LOADLIB LVCSCLUS         00060000
//         LIB01A='E7440PS.VAN30.LOADLIB',  ** LOADLIB LVCSCLUS         00070000
//         LIB02='E7440PS.VAN30.LOADLIB',   ** LOADLIB LVCSCPX          00080000
//         LIB02A='E7440PS.VAN30.LOADLIB',  ** LOADLIB LVCSCPX          00090000
//         PRODLIB='E7440PS.VAN30.LOADLIB', ** PRODUCTION LOADLIB       00100000
//         RUNLIB='SYSCMN.PROD.CCLIB.VTGI', ** RUNLIB LIBRARY           00110000
//         PARMLIB='SYSCMN.PROD.CCLIB.VTGI', ** DEL/DEF LIBRARY         00120000
//         LVCSCPX='LVCSCPX',               ** FILE COMPRESS/DECOMPRESS 00130000
//         VAN30I=VAN30,                    ** INPUT DSN QUALIFIER      00140000
//         VAN30O=VAN30,                    ** OUTPUT DSN QUALIFIER     00150000
//         VFLIDI=E7440PS0,                 ** VSAM FILE INPUT          00160000
//         VFLIDO=E7440PS0,                 ** VSAM FILE OUTPUT         00170000
//         DSKUNIT='SYSDA',                 ** DASD UNIT                00180000
//         DNAME='XXXX',                    ** FILE NODE QUALIFIER      00190000
//         VSAMFLE='XXXX',                  ** VSAM FILE PARAMETERS     00200000
//         TIME1='30',                      ** TIME PARAMETER           00210000
//         JCLCLS='O',                      ** JCL OUTPUT CLASS         00220000
//         DUMPCLS='O',                     ** ABEND OUTPUT CLASS       00230000
//         RUNLOG='O'                       ** RUNLOG OUTPUT CLASS      00240000
//*                                                                     00250000
//*                                                                     00260000
//*******************************************************************   00270000
//******** RESOLVE SYMBOLICS FOR VSAM DEL/DEF FOR THE COMP FILE:        00280000
//*******************************************************************   00290000
//STEP01A  EXEC PGM=LVCSCLUS,                                           00300000
//         PARM='&VFLIDO..&VAN30O..COMP,NODASD'                         00310000
//STEPLIB  DD DSN=&LIB01,DISP=SHR                                       00320000
//         DD DSN=&LIB01A,DISP=SHR                                      00330000
//         DD DSN=&PRODLIB,DISP=SHR                                     00340000
//PROTOTYP DD DSN=&PARMLIB(&DNAME),DISP=SHR                             00350000
//OUTPUT   DD DSN=&&RESOLVE1,DISP=(NEW,PASS),                           00360000
//            SPACE=(TRK,(1,1)),UNIT=&DSKUNIT,                          00370000
//            DCB=(RECFM=FB,LRECL=80,BLKSIZE=6400)                      00380000
//RESOLVE  DD DSN=&RUNLIB(&RESOLVE),DISP=SHR                            00390000
//RUNLOG   DD SYSOUT=&RUNLOG,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=6251)     00400000
//SYSOUT   DD SYSOUT=&JCLCLS                                            00410000
//*                                                                     00420000
//*******************************************************************   00430000
//******** DEL/DEF FOR TEMPORARY RESOLVE PARAMETERS FILE                00440000
//*******************************************************************   00450000
//STEP01B  EXEC PGM=IDCAMS                                              00460000
//SYSPRINT DD SYSOUT=&JCLCLS                                            00470000
//SYSIN    DD DSN=&&RESOLVE1,DISP=OLD                                   00480000
//*                                                                     00490000
//********************************************************************  00500000
//******** COMPRESS ORIG FILE INTO COMP FILE (ADJUST PARM= AS NEEDED):  00510000
//********************************************************************  00520000
//STEP02   EXEC PGM=&LVCSCPX,PARM='&PARMLST',TIME=&TIME1                00530000
//STEPLIB  DD DSN=&LIB02,DISP=SHR                                       00540000
//         DD DSN=&LIB02A,DISP=SHR                                      00550000
//         DD DSN=&PRODLIB,DISP=SHR                                     00560000
//*    DECOMPRESSED FILE                                                00570000
//CEINPUT  DD DSN=&VFLIDI..&VAN30I..EXPN.&DNAME,                        00580000
//         DISP=SHR,AMP=(AMORG,'BUFSP=740000')                          00590000
//*    COMPRESSED FILE                                                  00600000
//CEOUTPUT DD DSN=&VFLIDO..&VAN30O..COMP.&DNAME,                        00610000
//         DISP=SHR,AMP=(AMORG,'BUFSP=740000')                          00620000
//VSAMFLE  DD DSN=&PARMLIB(&VSAMFLE),DISP=SHR                           00630000
//RUNLOG   DD SYSOUT=&RUNLOG,DCB=(RECFM=FBA,LRECL=133,BLKSIZE=6251)     00640000
//PRFLOG   DD SYSOUT=&JCLCLS                                            00650000
//SYSUDUMP DD SYSOUT=&DUMPCLS                                           00660000
//SYSABOUT DD SYSOUT=&DUMPCLS                                           00670000
//SYSOUT   DD SYSOUT=&JCLCLS                                            00680000
//*                                                                     00690000
//*                                                                     00700000
//*=====================================================================00710000
//* THIS JOB PROVIDES TWO TYPES OF STAND ALONE COMPRESSION FOR FILES.   00720000
//* THE STANDARD VANTAGE-ONE CHARACTER COMPRESSION IS ALWAYS PERFORMED. 00730000
//* AND, FOR CERTAIN FILES, VANTAGE-ONE "FILE COMPRESSION" (PREPARATION 00740000
//* FOR ENHANCED CHARACTER COMPRESSION) IS ALSO PERFORMED.  THESE       00750000
//* SPECIAL FILES ARE: CASHFLOW, DIRECTORY, SCHEDULE, AND TRX HIST      00760000
//* (LIST IS CURRENT AS OF 1/97).                                       00770000
//*                                                                     00780000
//* THE ABREVIATIONS EXPN AND COMP ARE USED IN THE JCL TO DESIGNATE THE 00790000
//* FILES WHICH ARE USED:                                               00800000
//*     EXPN - DECOMPRESSED VERSION OF THE FILE (INPUT)                 00810000
//*     COMP - COMPRESSED VERSION OF THE FILE   (OUTPUT)                00820000
//*                                                                     00830000
//* MAJOR STEPS:                                                        00840000
//*   #  DEL/DEF THE COMP FILE.                                         00850000
//*   #  COMPRESS THE EXPN FILE INTO THE COMP FILE.                     00860000
//*                                                                     00870000
//*=====================================================================00880000
//* IMPORTANT!!!                                                        00890000
//*                                                                     00900000
//*   IF YOU ARE COMPRESSING A FULLY UNCOMPRESSED FILE, MAKE SURE THAT  00910000
//*   THE COMPFLE VSAMFLE CARD HAS THE INPUT FILE SPECIFIED WITHOUT     00920000
//*   COMPRESSION, AS FOLLOWS:                                          00930000
//*      CEINPUT   N   00R  N         | USE VSAMFLE MEMBER              00940000
//*      CEOUTPUT  N   00O  Y         |     COMPFLE                     00950000
//*                                                                     00960000
//*   IF YOU ARE CONVERTING A CHARACTER-COMPRESSION-FILE TO ALSO HAVE   00970000
//*   FILE-COMPRESSION, MAKE SURE THAT THE COMPFLE VSAMFLE CARD HAS     00980000
//*   THE INPUT FILE SPECIFIED WITH COMPRESSION, AS FOLLOWS:            00990000
//*      CEINPUT   N   00R  Y         | USE VSAMFLE MEMBER              01000000
//*      CEOUTPUT  N   00O  Y         |     COMPFLE2                    01010000
//*                                                                     01020000
//*=====================================================================01030000
//* IMPORTANT!!!                                                        01040000
//*                                                                     01050000
//* ADJUST THE 'PARMLST' FIELD FOR PASSING DATA TO THE PGM:             01060000
//*                                                                     01070000
//* INPUT PARMS:  BYTE  1     = (P) FOR PUT                             01080000
//*               BYTES 2 - 9 = FILE-ID (ONLY IF FILE HAS ENHANCED      01090000
//*                             COMPRESSION):  CASHFLW, DIRECT, SCHED,  01100000
//*                             TRXHIS (LIST IS CURRENT AS OF 1/97)     01110000
//*                                   OR                                01120000
//*                             ENTER THE KEY STARTING BYTE IF IT IS    01130000
//*                             NOT BYTE 1 (IN NNNN FORMAT)             01140000
//*                                   OR                                01150000
//*                             LEAVE BLANK                             01160000
//*                                                                     01170000
//* EXAMPLE: 'PCASHFLW ' - WILL COMPRESS THE INPUT CASHFLOW FILE;       01180000
//*                        THE 'CASHFLW' IS REQUIRED HERE BECAUSE THIS  01190000
//*                        FILE HAS ENHANCED COMPRESSION                01200000
//* EXAMPLE: 'P0028    ' - WILL COMPRESS THE INPUT FILE (ANY FILE)      01210000
//*                        AND ASSUMES THE KEY STARTS IN BYTE 28        01220000
//* EXAMPLE: 'P        ' - WILL COMPRESS THE INPUT FILE (ANY FILE)      01230000
//*                        AND ASSUMES THE KEY STARTS IN BYTE 1         01240000
//*                                                                     01250000
//* NOTE: IT IS NOT NECESSARY TO PAD THE PARM VALUE WITH BLANKS AT      01260000
//*       THE END; I.E. FOR THE ABOVE EXAMPLES, 'PCASHFLW', 'P0028',    01270000
//*       AND 'P' WOULD ALSO WORK.                                      01280000
//*                                                                     01290000
//*==================================================================== 01300000
//*                                                                     01310000
//  PEND                                                                01320000
//E744112P EXEC E744112P,                                               01330000
//         DUMPCLS='*',                                                 01340000
//         JCLCLS='*',                                                  01350000
//         RUNLOG='*',                                                  01360000
//*   SYMBOLICS TO BE SET FOR FILE TO BE COMPRESSED                     01370000
//         PARMLST='P',              ** FOR CLPROD/OTHERS               01380000
//*        PARMLST='PTRXHIST',       ** FOR TRXHIST/CASHFLW/DIRECT/SCHED01390000
//         DNAME='SCHED',                                               01400000
//         VSAMFLE='COMPFLE',        ** CLPROD/OTHERS                   01410000
//*        VSAMFLE='COMPFLE2',       ** FOR TRXHIST/CASHFLW/DIRECT/SCHED01420000
//         VFLIDI=E7440TT0,          ** VSAM QUAL INPUT                 01430000
//         VFLIDO=E7440TT0,          ** VSAM QUAL OUTPUT                01440000
//         VAN30I=&NAME,                                                01450000
//         VAN30O=&NAME                                                 01460000
//*                                                                     01470000
//STEP02.CEINPUT DD DSN=E7440TT0.&NAME..EXPN.SCHED,DISP=SHR             01480000
//*    COMPRESSED FILE                                                  01490000
//*                                                                     01500000
//E7470EST JOB NOTIFY=&SYSUID                                           00010000
/*JOBPARM S=ANY,SYSAFF=ANY                                              00020000
// SET SCHEDF=PO113                                                     00021000
//* CHOOSE THE FILE PROD OR TEST                                        00022001
//* KEY CMP AND P-ID , NLREC AND RECTYP                                 00023001
//* C ALL PO113 YYYYY  FILENAME OF EXPAND                               00024001
//* C ALL SCHED5 SCHED* BASED ON YOUR SECTION POLICY                    00025001
//STEP1    EXEC PGM=FILEMGR,TIME=15                                     00070000
//SYSPRINT DD SYSOUT=*                                                  00080000
//SYSUDUMP DD SYSOUT=*                                                  00090000
//SYSTOTAL DD SYSOUT=*                                                  00100000
//DD01     DD DSN=E7440PS0.VAN30.SCHED5,                                00110001
//         DISP=SHR                                                     00120000
//DD01O    DD DSN=&&TRXHIS,                                             00130000
//         DISP=(NEW,PASS,DELETE),                                      00140000
//         SPACE=(CYL,(5,1),RLSE),                                      00150000
//         UNIT=SYSDA,                                                  00160000
//         DCB=(RECFM=VB,LRECL=20480,BLKSIZE=0)                         00170000
//********************************************************************  00180000
//*  THE CARD BELOW SHOULD HAVE 20 CHARACTERS BETWEEN THE QUOTES        00190000
//*  COLUMN 19 TO 20 - SEGMENT TO ALWAYS BE  'DB'                       00200000
//******************12345678901234567890******************************  00210000
//SYSIN    DD *                                                         00220000
$$FILEM DSC  INPUT=DD01,                                                00230000
$$FILEM   KEY='018    205122084UMLA',                                   00240000
$$FILEM      OUTPUT=DD01O,                                              00250000
$$FILEM      NLRECS=1                                                   00260000
//*                                                                     00310000
//* THIS STEP WILL CREATE A TEMPORARY RESTRICT.TRXHIS FILE              00320000
//*                                                                     00330000
//STEP2    EXEC PGM=IDCAMS                                              00340000
//SYSPRINT DD SYSOUT=*                                                  00350000
//*                                                                     00360000
//SYSIN    DD *                                                         00370000
  DELETE            (E7440TT0.POL1.SCHED1) CLUSTER                      00380000
   IF MAXCC > 0 THEN DO                                                 00390000
      SET MAXCC = 0                                                     00400000
      END                                                               00410000
   DEFINE CLUSTER                          -                            00420000
          (NAME(E7440TT0.POL1.SCHED1)        -                          00430000
          MGMTCLAS(D430M)                  -                            00440000
          VOLUMES(* * * * *  * *)          -                            00450000
          RECORDSIZE(1862 20472)           -                            00460000
          FREESPACE(10 10)                 -                            00470000
          OWNER($IAM)                      -                            00480000
          SHR(3 3)                         -                            00490000
          UNIQUE                           -                            00500000
          NOIMBED                          -                            00510000
          SPEED                            -                            00520000
          KEYS(24 0)                       -                            00530000
          CYL(5 5))                    -                                00540000
   DATA                                    -                            00550000
       (NAME(E7440TT0.POL1.SCHED1.DATA)      -                          00560000
          CISZ(20480))                     -                            00570000
   INDEX                                   -                            00580000
       (NAME(E7440TT0.POL1.SCHED1.INDEX) -                              00590000
          CISZ(512))                                                    00600000
/*                                                                      00610000
//*                                                                     00620000
//* THIS STEP WILL COPY THE RESTRICTED POLICY TO RESTRICT.TRXHIS  FILE  00630000
//*                                                                     00640000
//STEP3    EXEC PGM=IDCAMS                                              00650000
//SYSPRINT DD SYSOUT=*                                                  00660000
//INDD01   DD DSN=&&TRXHIS,DISP=OLD                                     00670000
//OUTDD01  DD DSN=E7440TT0.POL1.SCHED1,DISP=SHR                         00680000
//SYSIN    DD *                                                         00690000
      REPRO    INFILE(INDD01)     OUTFILE(OUTDD01)                      00700000
/*                                                                      00710000
//*                                                                     00720000
//* THIS STEP WILL EXPAND THE TEMP.TRXHIS                               00730000
//*                                                                     00740000
//STEP4    EXEC E744111P,                                               00750000
//*   SYMBOLICS TO BE SET FOR FILE TO BE DECOMPRESSED                   00760000
//         JCLCLS='*',                                                  00770000
//         RUNLOG='*',                                                  00780000
//         PARMLST='G',             ** FOR TRXHIS/OTHERS                00790000
//         DNAME='SCHED',        ** FOR TRXHIS/OTHERS                   00800000
//         VFLIDI=E7440TT0,         ** VSAM QUAL - INPUT                00810000
//         VFLIDO=E7440TT0,         ** VSAM QUAL - OUTPUT               00820000
//         VAN30O=&SCHEDF                                               00830000
//*        POL1O='POL1'               ** OUTPUT DSN QUALIFIER           00840000
//STEP02.CEINPUT DD DSN=E7440TT0.POL1.SCHED1,DISP=SHR                   00850000
//E7470RST JOB ('E7440T0'),TIME=(,3),MSGCLASS=O,NOTIFY=&SYSUID          00010000
/*JOBPARM SYSAFF=N090                                                   00020000
//STEP1    EXEC PGM=IDCAMS                                              00030000
//SYSPRINT DD SYSOUT=O                                                  00040000
//INDD01   DD DISP=SHR,DSN=E7440TT0.PO113.COMP.SCHED                    00050000
//OUTDD01  DD DISP=SHR,DSN=E7440TT0.PO113.SCHED2                        00060000
//SYSIN    DD *                                                         00070000
      REPRO    INFILE(INDD01)   OUTFILE(OUTDD01) -                      00080000
      REPLACE                                                           00090000
/*                                                                      00100000
//STEP2    EXEC PGM=IDCAMS                                              00110000
//SYSPRINT DD SYSOUT=O                                                  00120000
//INDD01   DD DISP=SHR,DSN=E7440TT0.PO113.COMP.SCHED                    00130000
//OUTDD01  DD DISP=SHR,DSN=E7440TT0.PO113.SCHED                         00140000
//SYSIN    DD *                                                         00150000
      REPRO    INFILE(INDD01)   OUTFILE(OUTDD01) -                      00160000
      REPLACE                                                           00170000
/*                                                                      00180000
/*REXX*/
/********************************************************************/
PARSE ARG DB','POLICY
SEC = SUBSTR(POLICY,09,01)
SN = 0
SELECT
WHEN ((SEC=1)|(SEC=2)) THEN; SN=1
WHEN ((SEC=3)|(SEC=4)) THEN; SN=2
WHEN ((SEC=5)|(SEC=6)) THEN; SN=3
WHEN ((SEC=7)|(SEC=8)) THEN; SN=4
WHEN ((SEC=9)|(SEC=0)) THEN; SN=5
OTHERWISE SAY "NO"
END
/********************************************************************/
/**START**************TSO USER ID***********************************/
URN=USERID()
JOBID=SUBSTR(URN,1,5)
/**END****************TSO USER ID***********************************/
/**START**************LAST CYCLE************************************/
TODAY = DATE('E')
DD =SUBSTR(TODAY,01,02);MM =SUBSTR(TODAY,04,02);YY =SUBSTR(TODAY,07,02)
IF (MM>10) THEN;DO;LM=MM-1;END;ELSE;DO;LM='0'||MM-1;END
CDX = YY||MM||DD;CDXM= YY||LM||28
DF1= "'E7432PS.ULA40.CASHFLW2.N"CDX-1"'";CF1 = SYSDSN(DF1) /='OK';
DF2= "'E7432PS.ULA40.CASHFLW2.N"CDX-2"'";CF2 = SYSDSN(DF2) /='OK';
DF3= "'E7432PS.ULA40.CASHFLW2.N"CDX-3"'";CF3 = SYSDSN(DF3) /='OK';
DF4= "'E7432PS.ULA40.CASHFLW2.N"CDX-4"'";CF4 = SYSDSN(DF4) /='OK';
DF5= "'E7432PS.ULA40.CASHFLW2.N"CDXM"'";CF5 = SYSDSN(DF5) /='OK';
DF6= "'E7432PS.ULA40.CASHFLW2.N"CDXM+1"'";CF6 = SYSDSN(DF6) /='OK';
DF7= "'E7432PS.ULA40.CASHFLW2.N"CDXM+2"'";CF7 = SYSDSN(DF7) /='OK';
DF8= "'E7432PS.ULA40.CASHFLW2.N"CDXM+3"'";CF8 = SYSDSN(DF8) /='OK';
SELECT
WHEN(CF1=0)THEN;DO;LDX=CDX-1;END;
WHEN(CF2=0)THEN;DO;LDX=CDX-2;END;
WHEN(CF3=0)THEN;DO;LDX=CDX-3;END;
WHEN(CF4=0)THEN;DO;LDX=CDX-4;END;
WHEN(CF8=0)THEN;DO;LDX=CDXM+3;END;
WHEN(CF7=0)THEN;DO;LDX=CDXM+2;END;
WHEN(CF6=0)THEN;DO;LDX=CDXM+1;END;
WHEN(CF5=0)THEN;DO;LDX=CDXM;END;
OTHERWISE;LDX=CDX-1         ;END;
LD = LDX
/**END****************LAST CYCLE************************************/
QUEUE "//"JOBID"W1W JOB TIME=(,09),MSGCLASS=O,NOTIFY=&SYSUID                   "
QUEUE "/*JOBPARM S=A090"
QUEUE "//STEP00    EXEC PGM=IEFBR14                                            "
QUEUE "//SYSPRINT  DD SYSOUT=*                                                 "
QUEUE "//SYSUDUMP  DD SYSOUT=*                                                 "
QUEUE "//TRX      DD DSN=E7432TS."DB".SORTOUT.SEC"SN".N"LD",                   "
QUEUE "//         DISP=(MOD,DELETE),UNIT=SYSDA,SPACE=(TRK,(1,1))               "
QUEUE "//VAARPT   DD DSN=E7432TS."DB".VAARPT.SEC"SN".N"LD",                    "
QUEUE "//         DISP=(MOD,DELETE),UNIT=SYSDA,SPACE=(TRK,(1,1))               "
QUEUE "//MFES     DD  DSN=E7432TS."DB".MFES.SEC"SN".N"LD",                     "
QUEUE "//         DISP=(MOD,DELETE),UNIT=SYSDA,SPACE=(TRK,(1,1))               "
QUEUE "//TEMP     DD  DSN=E7432TS.ULA40.SORTOUT.SEC"SN".N"LD",                 "
QUEUE "//         DISP=(MOD,DELETE),UNIT=SYSDA,SPACE=(TRK,(1,1))               "
QUEUE "//TRXFIN   DD  DSN=E7432TS."DB".SORTOUT.SEC"SN".N"LD".FINAL,            "
QUEUE "//         DISP=(MOD,DELETE),UNIT=SYSDA,SPACE=(TRK,(1,1))               "
QUEUE "//STEPA1    EXEC PGM=IDCAMS,TIME=20                                     "
QUEUE "//SYSPRINT  DD SYSOUT=*                                                 "
QUEUE "//SYSUDUMP  DD SYSOUT=*                                                 "
QUEUE "/*                                                                      "
QUEUE "//SYSIN     DD *                                                        "
QUEUE "        DELETE (E7432TS0."DB".CASHVAL"SN") -                            "
QUEUE "               CLUSTER                                                  "
QUEUE "    SET MAXCC=0                                                         "
QUEUE "    DEFINE CLUSTER (-                                                   "
QUEUE "      NAME(E7432TS0."DB".CASHVAL"SN")-                                  "
QUEUE "       MGMTCLAS(D200) -                                                 "
QUEUE "       KEYS(10 0)-                                                      "
QUEUE "       RECORDSIZE(500 1412)-                                            "
QUEUE "       TRK(1 1)-                                                        "
QUEUE "       FREESPACE(15 10)-                                                "
QUEUE "       SPEED)-                                                          "
QUEUE "       DATA(-                                                           "
QUEUE "         NAME(E7432TS0."DB".CASHVAL"SN".DATA)-                          "
QUEUE "       CISZ(6144))-                                                     "
QUEUE "       INDEX(-                                                          "
QUEUE "         NAME(E7432TS0."DB".CASHVAL"SN".INDEX) -                        "
QUEUE "       CISZ(1024))                                                      "
QUEUE "/*                                                                      "
QUEUE "//STEPA2   EXEC PGM=IDCAMS                                              "
QUEUE "//DDIN     DD  DSN=E7432PS0.CASHVAL"SN",DISP=SHR                        "
QUEUE "//DDOUT    DD  DSN=E7432TS0."DB".CASHVAL"SN",DISP=SHR                   "
QUEUE "//SYSPRINT DD   SYSOUT=*                                                "
QUEUE "//SYSIN    DD   *                                                       "
QUEUE "    REPRO -                                                             "
QUEUE "      INFILE(DDIN) -                                                    "
QUEUE "      OUTFILE(DDOUT) -                                                  "
QUEUE "      COUNT(1)                                                          "
QUEUE "/*                                                                      "
QUEUE "//STEPB1 EXEC PGM=IDCAMS                                                "
QUEUE "//SYSPRINT  DD  SYSOUT=*                                                "
QUEUE "//SYSUDUMP  DD  SYSOUT=*                                                "
QUEUE "//SYSIN DD *                                                            "
QUEUE "        DELETE (E7432TS0."DB".CASHFLW"SN")-                             "
QUEUE "               CLUSTER                                                  "
QUEUE "    SET MAXCC=0                                                         "
QUEUE "        DEFINE CLUSTER(    -                                            "
QUEUE "               NAME(E7432TS0."DB".CASHFLW"SN") -                        "
QUEUE "               MGMTCLAS(D32NR) -                                        "
QUEUE "               FSPC(5 2) -                                              "
QUEUE "               KEYS(16 0) -                                             "
QUEUE "               SPEED -                                                  "
QUEUE "               NOIMBED) -                                               "
QUEUE "         DATA -                                                         "
QUEUE "               (NAME(E7432TS0."DB".CASHFLW"SN".DATA) -                  "
QUEUE "               CYL(1 5) -                                               "
QUEUE "               RECSZ(28 1432) -                                         "
QUEUE "               CISZ(6144)) -                                            "
QUEUE "         INDEX -                                                        "
QUEUE "               (NAME(E7432TS0."DB".CASHFLW"SN".INDEX) -                 "
QUEUE "               CISZ(1024))                                              "
QUEUE "/*                                                                      "
QUEUE "//STEPB2   EXEC PGM=IDCAMS                                              "
QUEUE "//DDIN     DD  DSN=E7432PS0.CASHFLW"SN",DISP=SHR                        "
QUEUE "//DDOUT    DD  DSN=E7432TS0."DB".CASHFLW"SN",DISP=SHR                   "
QUEUE "//SYSPRINT DD   SYSOUT=*                                                "
QUEUE "//SYSIN    DD   *                                                       "
QUEUE "    REPRO -                                                             "
QUEUE "      INFILE(DDIN) -                                                    "
QUEUE "      OUTFILE(DDOUT) -                                                  "
QUEUE "      COUNT(1)                                                          "
QUEUE "/*                                                                      "
QUEUE "//STEPC1 EXEC PGM=IDCAMS                                                "
QUEUE "//SYSPRINT  DD  SYSOUT=*                                                "
QUEUE "//SYSUDUMP  DD  SYSOUT=*                                                "
QUEUE "//SYSIN DD *                                                            "
QUEUE "         DELETE (E7432TS0."DB".FPRAMST"SN") -                           "
QUEUE "           CLUSTER                                                      "
QUEUE "    SET MAXCC=0                                                         "
QUEUE "    DEFINE CLUSTER(             -                                       "
QUEUE "           NAME(E7432TS0."DB".FPRAMST"SN") -                            "
QUEUE "           MGMTCLAS(D32NR)    -                                         "
QUEUE "           FSPC(15 2)          -                                        "
QUEUE "           KEYS(30 0)           -                                       "
QUEUE "           IMBED                -                                       "
QUEUE "           SPEED)               -                                       "
QUEUE "    DATA -                                                              "
QUEUE "           (NAME(E7432TS0."DB".FPRAMST"SN".DATA)-                       "
QUEUE "           CYL(1 1) -                                                   "
QUEUE "           RECSZ(500 700)       -                                       "
QUEUE "           CISZ (8192))         -                                       "
QUEUE "    INDEX -                                                             "
QUEUE "           (NAME(E7432TS0."DB".FPRAMST"SN".INDEX)-                      "
QUEUE "           CISZ (1024))                                                 "
QUEUE "/*                                                                      "
QUEUE "//********************************************************************* "
QUEUE "//STEPC2   EXEC PGM=IDCAMS                                              "
QUEUE "//DDIN     DD  DSN=E7432PS0.FPRAMST"SN",DISP=SHR                        "
QUEUE "//DDOUT    DD  DSN=E7432TS0."DB".FPRAMST"SN",DISP=SHR                   "
QUEUE "//SYSPRINT DD   SYSOUT=*                                                "
QUEUE "//SYSIN    DD   *                                                       "
QUEUE "    REPRO -                                                             "
QUEUE "      INFILE(DDIN) -                                                    "
QUEUE "      OUTFILE(DDOUT) -                                                  "
QUEUE "      COUNT(4)                                                          "
QUEUE "    REPRO -                                                             "
QUEUE "      INFILE(DDIN) -                                                    "
QUEUE "      OUTFILE(DDOUT) -                                                  "
QUEUE "      FROMKEY('  UL0000000009999999999998')                             "
QUEUE "/*                                                                      "
QUEUE "//STEPD1    EXEC PGM=IDCAMS,TIME=20                                     "
QUEUE "//SYSPRINT  DD  SYSOUT=*                                                "
QUEUE "//SYSUDUMP  DD  SYSOUT=*                                                "
QUEUE "//SYSIN DD *                                                            "
QUEUE "         DELETE (E7432TS0."DB".ULAMAST"SN") -                           "
QUEUE "           CLUSTER                                                      "
QUEUE "    SET MAXCC=0                                                         "
QUEUE "    DEFINE CLUSTER(             -                                       "
QUEUE "           NAME(E7432TS0."DB".ULAMAST"SN")       -                      "
QUEUE "           MGMTCLAS(D32NR)          -                                   "
QUEUE "           CYL(1 5)             -                                       "
QUEUE "           RECSZ(500 700)       -                                       "
QUEUE "           FSPC(20 10)          -                                       "
QUEUE "           KEYS(43 0)           -                                       "
QUEUE "           IMBED                -                                       "
QUEUE "           SPEED                -                                       "
QUEUE "           CISZ (4096))         -                                       "
QUEUE "           DATA(NAME(E7432TS0."DB".ULAMAST"SN".DATA))-                  "
QUEUE "           INDEX (NAME(E7432TS0."DB".ULAMAST"SN".INDEX))                "
QUEUE "/*                                                                      "
QUEUE "//STEPD2   EXEC PGM=IDCAMS                                              "
QUEUE "//SYSPRINT  DD  SYSOUT=*                                                "
QUEUE "//SYSUDUMP  DD  SYSOUT=*                                                "
QUEUE "//DDIN      DD DSN=E7432PS0.ULAMAST"SN",                                "
QUEUE "//          DISP=SHR                                                    "
QUEUE "//DDOUT     DD DSN=E7432TS0."DB".ULAMAST"SN",                           "
QUEUE "//          DISP=SHR                                                    "
QUEUE "    REPRO -                                                             "
QUEUE "      INFILE(DDIN) -                                                    "
QUEUE "      OUTFILE(DDOUT) -                                                  "
QUEUE "      COUNT(1)                                                          "
QUEUE "    REPRO -                                                             "
QUEUE "      INFILE(DDIN) -                                                    "
QUEUE "      OUTFILE(DDOUT) -                                                  "
QUEUE "      FROMKEY('  UL0000000009999999999998')                             "
QUEUE "/*                                                                      "
QUEUE "//STEP01  EXEC PGM=E7432WIF,PARM='2"LD"',TIME=5                         "
QUEUE "//*STEPA   EXEC PGM="DB",PARM='2"LD"',TIME=5                            "
QUEUE "//STEPLIB  DD DSN=SYSCMN.DEV.USERLINK.VCSI,DISP=SHR                     "
QUEUE "//*STEPLIB  DD DSN=E7432TS.RIGHTOR.LOADLIB,DISP=SHR                     "
QUEUE "//PFPRA1    DD DSN=E7432PS0.FPRAMST1,DISP=SHR                           "
QUEUE "//PULA1     DD DSN=E7432PS0.ULAMAST1,DISP=SHR                           "
QUEUE "//PCFFILE1  DD DSN=E7432PS0.CASHFLW1,DISP=SHR                           "
QUEUE "//PFPRA2    DD DSN=E7432PS0.FPRAMST2,DISP=SHR                           "
QUEUE "//PULA2     DD DSN=E7432PS0.ULAMAST2,DISP=SHR                           "
QUEUE "//PCFFILE2  DD DSN=E7432PS0.CASHFLW2,DISP=SHR                           "
QUEUE "//PFPRA3    DD DSN=E7432PS0.FPRAMST3,DISP=SHR                           "
QUEUE "//PULA3     DD DSN=E7432PS0.ULAMAST3,DISP=SHR                           "
QUEUE "//PCFFILE3  DD DSN=E7432PS0.CASHFLW3,DISP=SHR                           "
QUEUE "//PFPRA4    DD DSN=E7432PS0.FPRAMST4,DISP=SHR                           "
QUEUE "//PULA4     DD DSN=E7432PS0.ULAMAST4,DISP=SHR                           "
QUEUE "//PCFFILE4  DD DSN=E7432PS0.CASHFLW4,DISP=SHR                           "
QUEUE "//PFPRA5    DD DSN=E7432PS0.FPRAMST5,DISP=SHR                           "
QUEUE "//PULA5     DD DSN=E7432PS0.ULAMAST5,DISP=SHR                           "
QUEUE "//PCFFILE5  DD DSN=E7432PS0.CASHFLW5,DISP=SHR                           "
QUEUE "//TFPRA     DD DSN=E7432TS0."DB".FPRAMST"SN",                           "
QUEUE "//         AMP='BUFND=30,BUFNI=3',DISP=SHR                              "
QUEUE "//TULA      DD DSN=E7432TS0."DB".ULAMAST"SN",                           "
QUEUE "//         AMP='BUFND=30,BUFNI=3',DISP=SHR                              "
QUEUE "//TCFFILE   DD DSN=E7432TS0."DB".CASHFLW"SN",                           "
QUEUE "//         AMP='BUFND=30,BUFNI=3',DISP=SHR                              "
QUEUE "//TRX      DD DSN=E7432TS."DB".SORTOUT.SEC"SN".N"LD",                   "
QUEUE "//         UNIT=SYSDA,DISP=(NEW,CATLG,DELETE),                          "
QUEUE "//         SPACE=(TRK,(5,5)),                                           "
QUEUE "//         DCB=(RECFM=VB,LRECL=1295,BLKSIZE=0)                          "
QUEUE "//SYSUDUMP DD SYSOUT=*,OUTLIM=20000                                     "
QUEUE "//SYSOUT   DD DUMMY,SYSOUT=*                                            "
QUEUE "//POLS     DD *                                                         "
QUEUE ""POLICY"                                                                "
QUEUE "/*                                                                      "
QUEUE "//STEP02   EXEC    PGM=SORT                                             "
QUEUE "//SORTIN   DD   DSN=E7432PS.ULA40.SORTOUT.SEC"SN".N"LD",DISP=SHR        "
QUEUE "//SORTOUT  DD   DSN=E7432TS.ULA40.SORTOUT.SEC"SN".N"LD",                "
QUEUE "//        DISP=(NEW,CATLG,CATLG),                                       "
QUEUE "//        DCB=(*.SORTIN),                                               "
QUEUE "//        SPACE=(CYL,(10,10),RLSE)                                      "
QUEUE "//SYSOUT   DD   SYSOUT=*                                                "
QUEUE "//SYSPRINT  DD SYSOUT=*                                                 "
QUEUE "//SYSIN DD *                                                            "
QUEUE "    OPTION COPY,STOPAFT=1                                               "
QUEUE "/*                                                                      "
QUEUE "//SORT03   EXEC PGM=SYNCSORT,TIME=10                                    "
QUEUE "//SYSOUT DD SYSOUT=*                                                    "
QUEUE "//SYSUDUMP DD SYSOUT=*                                                  "
QUEUE "//SYSPRINT DD SYSOUT=*                                                  "
QUEUE "//SORTIN   DD DSN=E7432TS.ULA40.SORTOUT.SEC"SN".N"LD",DISP=SHR          "
QUEUE "//         DD DSN=E7432TS."DB".SORTOUT.SEC"SN".N"LD",DISP=SHR           "
QUEUE "//SORTOUT  DD DSN=E7432TS."DB".SORTOUT.SEC"SN".N"LD".FINAL,             "
QUEUE "//         UNIT=DELW,DISP=(NEW,CATLG,DELETE),                           "
QUEUE "//         SPACE=(CYL,(5,5)),                                           "
QUEUE "//         DCB=(RECFM=VB,LRECL=1304,BLKSIZE=0)                          "
QUEUE "//SORTWK01 DD UNIT=SYSDA,SPACE=(CYL,(5,2))                              "
QUEUE "//SORTWK02 DD UNIT=SYSDA,SPACE=(CYL,(5,2))                              "
QUEUE "//SORTWK03 DD UNIT=SYSDA,SPACE=(CYL,(5,2))                              "
QUEUE "//SYSIN    DD *                                                         "
QUEUE " SORT FIELDS=(19,9,CH,A,36,4,CH,A,30,6,CH,A,5,3,CH,A,71,5,CH,A),EQUALS  "
QUEUE "       OMIT COND=(5,3,EQ,C'UXX',OR,5,3,EQ,C'UQQ'),FORMAT=CH             "
QUEUE "/*                                                                      "
QUEUE '$$'
ADDRESS TSO 'SUB * END($$)'
/*******************/
SAY "YOUR SORT FILE NAME:- E7432TS."DB".SORTOUT.SEC"SN".N"LD".FINAL"
SAY "E7432TS0."DB".CASHVAL"SN""
SAY "E7432TS0."DB".CASHFLW"SN""
SAY "E7432TS0."DB".FPRAMST"SN""
SAY "E7432TS0."DB".ULAMAST"SN""
//E7470EXT JOB ('E7440T2',,99),TIME=(1),MSGCLASS=O,NOTIFY=&SYSUID       JOB05369
/*JOBPARM SYSAFF=N090
//*** OUTFILE =
//***  E7440TS0.IM86G.EXPN.TRXHIST
//STEP1    EXEC PGM=FILEMGR,TIME=15
//SYSPRINT DD SYSOUT=*
//SYSUDUMP DD SYSOUT=*
//SYSTOTAL DD SYSOUT=*
//DD01     DD DSN=E7440PS0.VAN30.TRXHIS4,
//         DISP=SHR
//DD01O    DD DSN=&&TRXHIS,
//         DISP=(NEW,PASS,DELETE),
//         SPACE=(CYL,(5,1),RLSE),
//         UNIT=SYSDA,
//         DCB=(RECFM=VB,LRECL=20480,BLKSIZE=0)
//********************************************************************
//*  THE CARD BELOW SHOULD HAVE 20 CHARACTERS BETWEEN THE QUOTES
//*  COLUMN 19 TO 20 - SEGMENT TO ALWAYS BE  'DB'
//******************12345678901234567890******************************
//SYSIN    DD *
$$FILEM DSC  INPUT=DD01,
$$FILEM   KEY='018    206247068UMKA',
$$FILEM      OUTPUT=DD01O,
$$FILEM      NLRECS=1190
/*
//*
//* THIS STEP WILL CREATE A IM86GORARY RESTRICT.TRXHIS FILE
//*
//STEP2    EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//*
//SYSIN    DD *
  DELETE            (E7440TS0.IM86G.TRXHIS4) CLUSTER
   IF MAXCC > 0 THEN DO
      SET MAXCC = 0
      END
   DEFINE CLUSTER                          -                            00000130
          (NAME(E7440TS0.IM86G.TRXHIS4)    -                            00000140
          MGMTCLAS(D430M)                  -                            00000150
          VOLUMES(* * * * *  * *)          -                            00000160
          RECORDSIZE(1862 20472)           -                            00000170
          FREESPACE(10 10)                 -                            00000180
          OWNER($IAM)                      -                            00000190
          SHR(3 3)                         -                            00000200
          UNIQUE                           -                            00000210
          NOIMBED                          -                            00000220
          SPEED                            -                            00000230
          KEYS(24 0)                       -                            00000240
          CYL(800 200))                    -                            00000250
   DATA                                    -                            00000260
       (NAME(E7440TS0.IM86G.TRXHIS4.DATA)  -                            00000270
          CISZ(20480))                     -                            00000280
   INDEX                                   -                            00000290
       (NAME(E7440TS0.IM86G.TRXHIS4.INDEX) -                            00000300
          CISZ(512))                                                    00000310
/*
//*
//* THIS STEP WILL COPY THE RESTRICTED POLICY TO RESTRICT.TRXHIS  FILE
//*
//STEP3    EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//INDD01   DD DSN=&&TRXHIS,DISP=OLD
//OUTDD01  DD DSN=E7440TS0.IM86G.TRXHIS4,DISP=SHR
//SYSIN    DD *
      REPRO    INFILE(INDD01)     OUTFILE(OUTDD01)
/*
//*
//* THIS STEP WILL EXPAND THE IM86G.TRXHIS
//*
//STEP4    EXEC E744111P,
//*   SYMBOLICS TO BE SET FOR FILE TO BE DECOMPRESSED
//         JCLCLS='*',
//         RUNLOG='*',
//         PARMLST='G',             ** FOR TRXHIS/OTHERS
//         DNAME='TRXHIST',        ** FOR TRXHIS/OTHERS
//         VFLIDI=E7440TS0,         ** VSAM QUAL - INPUT
//         VFLIDO=E7440TS0,         ** VSAM QUAL - OUTPUT
//**       VAN30I='IM86G',          ** INPUT DSN QUALIFIER
//         VAN30O='IM86G'           ** OUTPUT DSN QUALIFIER
//STEP02.CEINPUT DD DSN=E7440TS0.IM86G.TRXHIS4,DISP=SHR
//***********************************************
//RUNSTEP1 EXEC PGM=MARKTRXH
//STEPLIB  DD DSN=K9900P.STGT@A.VTGI.#020234.NLB,DISP=SHR
//SYSOUT   DD SYSOUT=O
//SYSUDUMP DD SYSOUT=O,FREE=CLOSE
//EXPNFILE DD DSN=E7440TS0.IM86G.EXPN.TRXHIST,DISP=SHR
//INFILE  DD DISP=SHR,DSN=E7440TS.BSK.EXPAND.TRX.POLICY
//E7470CMA JOB ('E7440T2',,999),TIME=(,30),MSGCLASS=O,NOTIFY=&SYSUID,   00010002
//         CLASS=T                                                      00020000
/*JOBPARM SYSAFF=A090                                                   00030000
//STEP6    EXEC E744112P,                                               00040000
//*   SYMBOLICS TO BE SET FOR FILE TO BE COMPRESSED                     00050000
//         JCLCLS='*',                                                  00060000
//         RUNLOG='*',                                                  00070000
//         PARMLST='P',              ** FOR TRXHIS/OTHERS               00080000
//         DNAME='TRXHIST',           ** FOR TRXHIS/OTHERS              00090000
//         VSAMFLE='COMPFLE',        ** FOR ANY V1 DATASETS             00100000
//         VFLIDI=E7440TS0,          ** VSAM QUAL INPUT                 00110000
//         VFLIDO=E7440TS0,          ** VSAM QUAL OUTPUT                00120000
//         VAN30I='LLB10',            ** INPUT DSN QUALIFIER            00130000
//         VAN30O='LLB10'            ** OUTPUT DSN QUALIFIER            00140000
//*                                                                     00150000
//* THIS STEP WILL COPY THE FIXED TEMP POLICY IN PROD TRXHIS            00160000
//*                                                                     00170000
//E7470EXT JOB ('E7440T2',,99),TIME=(1),MSGCLASS=O,NOTIFY=&SYSUID       JOB05369
/*JOBPARM SYSAFF=N090
//*** OUTFILE =
//***  E7440TS0.IM86G.EXPN.TRXHIST
//STEP1    EXEC PGM=FILEMGR,TIME=15
//SYSPRINT DD SYSOUT=*
//SYSUDUMP DD SYSOUT=*
//SYSTOTAL DD SYSOUT=*
//DD01     DD DSN=E7440PS0.VAN30.TRXHIS4,
//         DISP=SHR
//DD01O    DD DSN=&&TRXHIS,
//         DISP=(NEW,PASS,DELETE),
//         SPACE=(CYL,(5,1),RLSE),
//         UNIT=SYSDA,
//         DCB=(RECFM=VB,LRECL=20480,BLKSIZE=0)
//********************************************************************
//*  THE CARD BELOW SHOULD HAVE 20 CHARACTERS BETWEEN THE QUOTES
//*  COLUMN 19 TO 20 - SEGMENT TO ALWAYS BE  'DB'
//******************12345678901234567890******************************
//SYSIN    DD *
$$FILEM DSC  INPUT=DD01,
$$FILEM   KEY='018    206247068UMKA',
$$FILEM      OUTPUT=DD01O,
$$FILEM      NLRECS=1190
/*
//*
//* THIS STEP WILL CREATE A IM86GORARY RESTRICT.TRXHIS FILE
//*
//STEP2    EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//*
//SYSIN    DD *
  DELETE            (E7440TS0.IM86G.TRXHIS4) CLUSTER
   IF MAXCC > 0 THEN DO
      SET MAXCC = 0
      END
   DEFINE CLUSTER                          -                            00000130
          (NAME(E7440TS0.IM86G.TRXHIS4)    -                            00000140
          MGMTCLAS(D430M)                  -                            00000150
          VOLUMES(* * * * *  * *)          -                            00000160
          RECORDSIZE(1862 20472)           -                            00000170
          FREESPACE(10 10)                 -                            00000180
          OWNER($IAM)                      -                            00000190
          SHR(3 3)                         -                            00000200
          UNIQUE                           -                            00000210
          NOIMBED                          -                            00000220
          SPEED                            -                            00000230
          KEYS(24 0)                       -                            00000240
          CYL(800 200))                    -                            00000250
   DATA                                    -                            00000260
       (NAME(E7440TS0.IM86G.TRXHIS4.DATA)  -                            00000270
          CISZ(20480))                     -                            00000280
   INDEX                                   -                            00000290
       (NAME(E7440TS0.IM86G.TRXHIS4.INDEX) -                            00000300
          CISZ(512))                                                    00000310
/*
//*
//* THIS STEP WILL COPY THE RESTRICTED POLICY TO RESTRICT.TRXHIS  FILE
//*
//STEP3    EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//INDD01   DD DSN=&&TRXHIS,DISP=OLD
//OUTDD01  DD DSN=E7440TS0.IM86G.TRXHIS4,DISP=SHR
//SYSIN    DD *
      REPRO    INFILE(INDD01)     OUTFILE(OUTDD01)
/*
//*
//* THIS STEP WILL EXPAND THE IM86G.TRXHIS
//*
//STEP4    EXEC E744111P,
//*   SYMBOLICS TO BE SET FOR FILE TO BE DECOMPRESSED
//         JCLCLS='*',
//         RUNLOG='*',
//         PARMLST='G',             ** FOR TRXHIS/OTHERS
//         DNAME='TRXHIST',        ** FOR TRXHIS/OTHERS
//         VFLIDI=E7440TS0,         ** VSAM QUAL - INPUT
//         VFLIDO=E7440TS0,         ** VSAM QUAL - OUTPUT
//**       VAN30I='IM86G',          ** INPUT DSN QUALIFIER
//         VAN30O='IM86G'           ** OUTPUT DSN QUALIFIER
//STEP02.CEINPUT DD DSN=E7440TS0.IM86G.TRXHIS4,DISP=SHR
//E7470RCT JOB ('E7440T0'),TIME=(,3),MSGCLASS=O,NOTIFY=&SYSUID          00010002
/*JOBPARM SYSAFF=Y090                                                   00020002
//STEP1    EXEC PGM=IDCAMS                                              00030000
//SYSPRINT DD SYSOUT=O                                                  00040000
//INDD01   DD DISP=SHR,DSN=E7440TS0.DW112.COMP.TRXHIST                  00050002
//OUTDD01  DD DISP=SHR,DSN=E7440TT0.DW112.TRXHIS3                       00060002
//SYSIN    DD *                                                         00070000
      REPRO    INFILE(INDD01)   OUTFILE(OUTDD01) -                      00080000
      REPLACE                                                           00090000
/*                                                                      00100000
)ATTR
 * TYPE(TEXT)   INTENS(HIGH) COLOR(WHITE) CAPS(OFF)
 # TYPE(TEXT)   INTENS(HIGH) COLOR(BLUE)  CAPS(OFF)
 @ TYPE(TEXT)   INTENS(LOW)  COLOR(GREEN) CAPS(OFF) HILITE(BLINK)
 ? TYPE(TEXT)   INTENS(LOW)  COLOR(TURQ)  CAPS(OFF)
 _ TYPE(INPUT)  INTENS(HIGH) COLOR(BLUE) PAD('_')
 / TYPE(OUTPUT)  INTENS(HIGH) COLOR(PINK) HILITE(BLINK)
)BODY
#                             VCSI MAIN Menu
@COMMAND ===> _C CMD
#
#Select one of the following options and press*ENTER.
@
*1 #SORTOUT    -  @Creating sortout file and blank DB
*2 #DBCOPY     -  @Copy the OLD-DB into NEW-DB
*3 #RESTORE    -  @Sectionalized Restore of VCSI given prod cycle
*4 #MINIDB     -  @Policy specific MINI-DB VCSI
@
@
)INIT
 &C = ''
 &AMT = CSR
 &PKEY = .PFKEY
)PROC
      VER (&C,NB,RANGE,1,9)
)END
)PANEL
)ATTR
  + TYPE(TEXT)  INTENS(LOW)  COLOR(GREEN)
  ~ TYPE(TEXT)  INTENS(HIGH)  COLOR(RED)
  % TYPE(TEXT)  INTENS(HIGH)  COLOR(WHITE)
  \ TYPE(INPUT)  INTENS(HIGH)  COLOR(GREEN)  HILITE(USCORE)
  $ TYPE(OUTPUT)  INTENS(HIGH)  HILITE(USCORE)
)BODY WINDOW(30,13)
+
+COMMAND ===> \O CMD       +
+
%===========================
%*+SORTOUT FILE%&+BLANK DB%*
%===========================
%* POL-NUM=>~\POL        ~%*
%* DB-NAME=>~\D    ~      %*
%===========================
%*        %1.~RUN         %*
%===========================
)INIT
&PKEY = .PFKEY
)REINIT
)PROC
VER (&O,NUM)
VER (&POL,NB)
VER (&D,NB)
)END
)ATTR
  + TYPE(TEXT)  INTENS(LOW)  COLOR(GREEN)
  ~ TYPE(TEXT)  INTENS(HIGH)  COLOR(RED)
  % TYPE(TEXT)  INTENS(HIGH)  COLOR(WHITE)
  \ TYPE(INPUT)  INTENS(HIGH)  COLOR(GREEN)  HILITE(USCORE)
  $ TYPE(OUTPUT)  INTENS(HIGH)  HILITE(USCORE)
)BODY WINDOW(30,15)
+
+COMMAND ===> \O CMD       +
+
%===========================
%*  +OLD-DB%INTO+NEW-DB   %*
%===========================
%* SEC-NUM=>~\S~          %*
%* OLD DB =>~\ODB  ~      %*
%* NEW DB =>~\NDB  ~      %*
%===========================
%*        %1.~RUN         %*
%===========================
)INIT
&PKEY = .PFKEY
)REINIT
)PROC
VER (&O,RANGE,0,1)
VER (&ODB,NB)
VER (&NDB,NB)
VER (&S,NB,NUM)
)END
)ATTR
  + TYPE(TEXT)  INTENS(LOW)  COLOR(GREEN)
  ~ TYPE(TEXT)  INTENS(HIGH)  COLOR(RED)
  % TYPE(TEXT)  INTENS(HIGH)  COLOR(WHITE)
  \ TYPE(INPUT)  INTENS(HIGH)  COLOR(GREEN)  HILITE(USCORE)
  $ TYPE(OUTPUT)  INTENS(HIGH)  HILITE(USCORE)
)BODY WINDOW(30,15)
+
+COMMAND ===> \O CMD       +
+
%===========================
%*     +VCSI RESTORE      %*
%===========================
%* SEC-NUM=>~\S~          %*
%* DB-NAME=>~\DB   ~      %*
%* LASTCYC=>~\LD    ~     %*
%===========================
%*        %1.~RUN         %*
%===========================
)INIT
*REXX(LDX)
TODAY = DATE('E')
DD =SUBSTR(TODAY,01,02);MM =SUBSTR(TODAY,04,02);YY =SUBSTR(TODAY,07,02)
IF (MM>10) THEN;DO;LM=MM-1;END;ELSE;DO;LM='0'||MM-1;END
CDX = YY||MM||DD;CDXM= YY||LM||28
DF1= "'E7432PS.ULA40.CASHFLW2.N"CDX-1"'";CF1 = SYSDSN(DF1) /='OK';
DF2= "'E7432PS.ULA40.CASHFLW2.N"CDX-2"'";CF2 = SYSDSN(DF2) /='OK';
DF3= "'E7432PS.ULA40.CASHFLW2.N"CDX-3"'";CF3 = SYSDSN(DF3) /='OK';
DF4= "'E7432PS.ULA40.CASHFLW2.N"CDX-4"'";CF4 = SYSDSN(DF4) /='OK';
DF5= "'E7432PS.ULA40.CASHFLW2.N"CDXM"'";CF5 = SYSDSN(DF5) /='OK';
DF6= "'E7432PS.ULA40.CASHFLW2.N"CDXM+1"'";CF6 = SYSDSN(DF6) /='OK';
DF7= "'E7432PS.ULA40.CASHFLW2.N"CDXM+2"'";CF7 = SYSDSN(DF7) /='OK';
DF8= "'E7432PS.ULA40.CASHFLW2.N"CDXM+3"'";CF8 = SYSDSN(DF8) /='OK';
SELECT
WHEN(CF1=0)THEN;DO;LDX=CDX-1;END;
WHEN(CF2=0)THEN;DO;LDX=CDX-2;END;
WHEN(CF3=0)THEN;DO;LDX=CDX-3;END;
WHEN(CF4=0)THEN;DO;LDX=CDX-4;END;
WHEN(CF8=0)THEN;DO;LDX=CDXM+3;END;
WHEN(CF7=0)THEN;DO;LDX=CDXM+2;END;
WHEN(CF6=0)THEN;DO;LDX=CDXM+1;END;
WHEN(CF5=0)THEN;DO;LDX=CDXM;END;
OTHERWISE;LDX=CDX-1         ;END;
*ENDREXX
  &LD = '&LDX'
  &DB = ' '
  &S = ' '
&PKEY = .PFKEY
)REINIT
)PROC
VER (&O,RANGE,0,1)
VER (&LD,NB,NUM)
VER (&DB,NB)
VER (&S,NB,NUM)
)END
)PANEL
)ATTR
  + TYPE(TEXT)  INTENS(LOW)  COLOR(GREEN)
  ~ TYPE(TEXT)  INTENS(HIGH)  COLOR(RED)
  % TYPE(TEXT)  INTENS(HIGH)  COLOR(WHITE)
  \ TYPE(INPUT)  INTENS(HIGH)  COLOR(GREEN)  HILITE(USCORE)
  $ TYPE(OUTPUT)  INTENS(HIGH)  HILITE(USCORE)
)BODY WINDOW(30,13)
+
+COMMAND ===> \O CMD       +
+
%===========================
%*+POLICY SPECFIC MINI DB%*
%===========================
%* POL-NUM=>~\POL        ~%*
%* DB-NAME=>~\D    ~      %*
%===========================
%*        %1.~RUN         %*
%===========================
)INIT
&PKEY = .PFKEY
)REINIT
)PROC
VER (&O,NUM)
VER (&POL,NB)
VER (&D,NB)
)END
/**REXX**/
PANEL_CODE_PDS = E7432TS.BSK.VCS1.REXX.PANEL.LIB
LOGIC_CODE_PDS = E7432TS.BSK.VCS1.REXX.PANEL.LIB
"ISPEXEC LIBDEF ISPPLIB DATASET ID('"PANEL_CODE_PDS"')"
MAIN_CODE:
DO FOREVER
ADDRESS TSO "ISPEXEC DISPLAY PANEL(VCSIP01)"
  IF RC = 8 THEN LEAVE
  SELECT
    WHEN C = ' ' THEN DO
      "DISPLAY PANEL(REPORTMD()) CURSOR(C)"
    END
    WHEN C = '1' THEN DO;CALL SORTCR;END
    WHEN C = '2' THEN DO;CALL COPY;END
    WHEN C = '3' THEN DO;CALL RESTORE;END
    WHEN C = '4' THEN DO;CALL MINIDB;END
    WHEN C = '9' THEN
    DO
    LEAVE
    END
    OTHERWISE NOP
  END
  C = ""
END


EXIT 0
END
/**/
SORTCR:
      ADDRESS 'ISPEXEC'
      "ADDPOP ROW(1) COLUMN(2)"
      "DISPLAY PANEL(VCSIP02) CURSOR(O)"
      "REMPOP"
      IF O=1 THEN
      DO
        IF((D \= " ")&(POL \= " ")&(LENGTH(D) == 5)&(LENGTH(POL) == 11),
          )THEN DO
      ADDRESS TSO EXEC "'"LOGIC_CODE_PDS"(SORTCR1)'",
                       "'"D","POL"'"
        END
      END
      ELSE
        CALL MAIN_CODE
RETURN;
/**/
COPY:
      ADDRESS 'ISPEXEC'
      "ADDPOP ROW(1) COLUMN(2)"
      "DISPLAY PANEL(VCSIP03) CURSOR(O)"
      "REMPOP"
      IF O =1 THEN
      DO
        IF((ODB \= " ")&,
           (NDB \= " ")&,
           (S \= " ")&,
           (LENGTH(S) == 1)&,
           (LENGTH(ODB) == 5)&,
           (LENGTH(NDB) == 5),
          )THEN DO
      ADDRESS TSO EXEC "'"LOGIC_CODE_PDS"(COPYDB)'",
                       "'"ODB","NDB","S"'"
        END
      END
      ELSE
        IF O=0 THEN
        DO
        CALL MAIN_CODE
        END
RETURN;
/**/
RESTORE:
      ADDRESS 'ISPEXEC'
      "ADDPOP ROW(1) COLUMN(2)"
      "DISPLAY PANEL(VCSIP04) CURSOR(O)"
      "REMPOP"
      IF O=1 THEN
      DO
        IF((DB \= " ")&(S \= " ")&,
           (LENGTH(DB) == 5)&(LENGTH(S) == 1),
          )THEN DO
      ADDRESS TSO EXEC "'"LOGIC_CODE_PDS"(RESTORE)'",
                       "'"DB","S","LD"'"
        END
      END
      ELSE
        CALL MAIN_CODE
RETURN;
/***/

MINIDB:
      ADDRESS 'ISPEXEC'
      "ADDPOP ROW(1) COLUMN(2)"
      "DISPLAY PANEL(VCSIP05) CURSOR(O)"
      "REMPOP"
      IF O=1 THEN
      DO
        IF((D \= " ")&(POL \= " ")&(LENGTH(D) == 5)&(LENGTH(POL) == 11),
          )THEN DO
      ADDRESS TSO EXEC "'"LOGIC_CODE_PDS"(MINIDBCR)'",
                       "'"D","POL"'"
        END
      END
      ELSE
        CALL MAIN_CODE
RETURN;
/**REXX**/
TPDS = "E7440TS."||USERID()||".VTGI.AUTO.TEMP.PDS"
C = SYSDSN("'"||TPDS||"'") /='OK' ; IF(C==1)THEN ; DO
ADDRESS TSO "ALLOC DA('"||TPDS||"') NEW REU RECFM(F B) LRECL(80)",
"DIR(255) SPACE(50,500) TRACKS UNIT(SYSDA) " ; END
/**********************************************************************/
PARM = "E7440TS."||USERID()||".VTGI.PARMLIB.PDS"
P = SYSDSN("'"||PARM||"'") /='OK' ; IF(P==1)THEN ; DO
ADDRESS TSO "ALLOC DA('"||PARM||"') NEW REU RECFM(F B) LRECL(80)",
"DIR(255) SPACE(50,500) TRACKS UNIT(SYSDA) " ; END
/**********************************************************************/
/**REXX**/
ADDRESS TSO
"ISPEXEC LMINIT DATAID(ID) DATASET('"||TPDS||"')ENQ(EXCLU)"
"ISPEXEC LMCOMP DATAID("ID")"
"ISPEXEC LMFREE DATAID("ID")"
"ISPEXEC LMINIT DATAID(ID1) DATASET('"||PARM||"')ENQ(EXCLU)"
"ISPEXEC LMCOMP DATAID("ID1")"
"ISPEXEC LMFREE DATAID("ID1")"
/**********************************************************************/
/*PANEL LIBARY PATH */
PAN = E7440TS.VTGI.PANEL.LIB
/*TEMPORARY FILE PATH */
PDS = TPDS
/*PARMLIB PATH */
PARMLIB = PARM
URN=USERID()
JOB=SUBSTR(URN,1,5)

/**********************************************************************/
ADDRESS
"ISPEXEC LIBDEF ISPPLIB DATASET ID('"||PAN||"')"
  "ISPEXEC DISPLAY PANEL(PVTG1) CURSOR(DB)"
/**********************************************************************/
CDATE =CD
LDATE =LD
DBNAME =DB
STRIPOUT=STR

IF (,
    (DBNAME \= " ")&(LENGTH(DBNAME)== 5),
   &(CDATE \= " "),
   &(LDATE \= " "),
   ) THEN
DO
CALL BATTRX_FILE
SAY "NEW BATTRX FILE CREATED WITH NAME OF "NEW_BATTRX
CALL FAT
CALL XXT
CALL GAT
CALL HKT
CALL PARMLIB
SAY "PARMLIB MEMBER'S ARE EDITED IN "PARMLIB
CALL JCL2REXX
/********PANEL2**/
DO FOREVER
ADDRESS 'ISPEXEC'
"ADDPOP ROW(1) COLUMN(2)"
"DISPLAY PANEL(PVTG2) CURSOR(O)"
"REMPOP"
  IF RC = 8 THEN LEAVE
  SELECT
    WHEN O = '0' THEN DO
      "DISPLAY PANEL(REPORTMD()) CURSOR(O)"
    END
    WHEN O = '1' THEN DO
     SAY 'E7440FAT JOB SUBMITTING'
     ADDRESS TSO EXEC "'"||PDS||"(RFAP)'"
    END
    WHEN O = '2' THEN DO
     SAY 'E7440XXT JOB SUBMITTING'
     ADDRESS TSO EXEC "'"||PDS||"(RXXP)'"
    END
    WHEN O = '3' THEN DO
     SAY 'TEMP CONTROL FILE DELETING....'
     CALL CONTROL_FILES
     SAY 'ALL FIVE SECTION FILES ARE EDIT WITH THE CORRECT DATA'
     SAY 'E7470G*T JOB SUBMITTING'
     ADDRESS TSO EXEC "'"||PDS||"(RGAP)'"
    END
    WHEN O = '4' THEN DO
     SAY 'E7470HKT JOB SUBMITTING'
     ADDRESS TSO EXEC "'"||PDS||"(RHKP)'"
    END
    WHEN O = 'X' THEN
    DO
    CALL DELALL
    LEAVE
    END
    OTHERWISE NOP
  END
  O = ""
END


EXIT 0
END
ELSE
DO
/*SAY "ERROR YOUR DATA IS INCORRECT"*/
EXIT
END
/*******************************************************************/
FAT:
IN1 = "'"||PDS||"(AFAP)'"
IF (STRIPOUT = ' ') THEN
DO
STLINE1="//SFAP0025.DD07 DD DUMMY                                "
STLINE2="//*SFAP0025.DD07 DD DSN="||STRIPOUT||",                 "
STLINE3="//*          DISP=SHR                                   "
END
ELSE
DO
STLINE1="//*SFAP0025.DD07 DD DUMMY                              "
STLINE2="//SFAP0025.DD07 DD DSN="||STRIPOUT||",                 "
STLINE3="//          DISP=SHR                                   "
END

/*ALLOCATING FILE*/
"ALLOC DA("||IN1||") FI(OUTPUT1) SHR REUSE"
/*PUTTING DATA TO STEAM*/
A.1 = "//"JOB"FAT JOB ("||URN||"),MSGCLASS=O,                  "
A.2 = "//           NOTIFY=&SYSUID                             "
A.3 = "/*JOBPARM S=ANY,SYSAFF=ANY                              "
A.4 = "//E7441FAP EXEC E7441FAP,                               "
A.5 = "//           DSN1=E7440TS,                              "
A.6 = "//           DSN2=E7440TSH,                             "
A.7 = "//           GL0066="||CDATE||",                        "
A.8 = "//           FICHECLS=O,                                "
A.9 = "//           GT2=GT,            ** USE LE FOR XPEDIT    "
A.10 = "//          RRIND=LE,                                  "
A.11 = "//          GL0067="||LDATE||",                        "
A.12 = "//          JCLCLS='*',        ** JCL OUTPUT CLASS     "
A.13 = "//          DUMPCLS='*',       ** ABEND OUTPUT CLAS    "
A.14 = "//          RUNLOG='*',        ** RUNLOG OUTPUT CLA    "
A.15 = "//          UNIT=DELQ,                                 "
A.16 = "//          DMY=,                                      "
A.17 = "//          DMY1=,                                     "
A.18 = "//          DMY2=,                                     "
A.19 = "//          DMY3=,                                     "
A.20 = "//          DMY5=,                                     "
A.21 = "//          DMY6=,                                     "
A.22 = "//          DMY7=,                                     "
A.23 = "//          DMY8=,                                     "
A.24 = "//          DMY11=,                                    "
A.25 = "//          DMY12=,                                    "
A.26 = "//          VAN30="||DBNAME||",                        "
A.27 = "//          COND.SFAP0120=(0,LE),                      "
A.28 = "//          VDSN=E7440TT0                              "
A.29 = "//SFAP0025.DD01 DD DUMMY                               "
A.30 = "//SFAP0025.DD02 DD DUMMY                               "
A.31 = "//SFAP0025.DD03 DD DUMMY                               "
A.32 = "//SFAP0025.DD04 DD DUMMY                               "
A.33 = "//SFAP0025.DD05 DD DUMMY                               "
A.34 = "//SFAP0025.DD06 DD DUMMY                               "
A.35 = STLINE1
A.36 = STLINE2
A.37 = STLINE3
A.38 = "//SFAP0025.DD08 DD DUMMY                               "
A.39 = "//SFAP0025.DD09 DD DUMMY                               "
A.40 = "//SFAP0025.DD10 DD DUMMY                               "
A.41 = "//SFAP0025.DD11 DD DUMMY                               "
A.42 = "//SFAP0025.DD12 DD DUMMY                               "
A.43 = "//SFAP0025.DD13 DD DUMMY                               "
A.44 = "//*                                                    "
A.45 = "//SFAP0030.SORTIN DD DSN="||NEW_BATTRX1||",             "
A.46 = "//             DISP=SHR"
A.47 = "//                 DD DSN=&&PROD,DISP=SHR              "
A.48 = "//                 DD DUMMY                            "
A.49 = "//                 DD DUMMY                            "
A.50 = "//                 DD DUMMY                            "
A.51 = "//                 DD DUMMY                            "
A.52 = "//                 DD DUMMY                            "
A.53 = "//                 DD DUMMY                            "
A.54 = "//                 DD DUMMY                            "
A.55 = "//                 DD DUMMY                            "
A.56 = "//                 DD DUMMY                            "
A.57 = "//                 DD DUMMY                            "
A.58 = "//                 DD DUMMY                            "
A.59 = "//                 DD DUMMY                            "
A.60 = "//SFAP0030.SYSIN   DD *                                "
A.61 = "   SORT FIELDS=(5,3,CH,A,34,4,CH,A)                    "
A.62 = "   END                                                 "
A.63 = "/*                                                     "
A.64 = "//SFAP0055.INPUT1   DD DISP=SHR,                       "
A.65 = "//         DSN=E7440TSH.VAN15.CONTROL.BACKUP2.N090123  "
A.66 = "//************************************************     "
A.67 = "//*C ALL "||CDATE||" YYMMDD ==>CURRENT DATE*******     "
A.68 = "//*C ALL "||LDATE||" YYMMDD ==>LASTCYCLE DATE*****     "
A.69 = "//*C ALL "||DBNAME||" IM65N ==>MINIDB NAME********     "
A.70 = "//*EDIT THE BATTRIG FILE WITH ZE CUREENT DATE*****     "
A.71 = "//*REPLACE THE YOUR OWN STRIPOUT******************     "
A.72 = "//*JJ 5,2,MAXCC=004*******************************     "
A.73 = "//************************************************     "
A.74 = "//*ABCQUEUE '$$'                                       "
A.75 = "//*ABCADDRESS TSO 'SUB * END($$)'                      "
/*WRITING STEM DATA FILE*/
"EXECIO 75 DISKW OUTPUT1 (FINIS STEM A."
"FREE FI(OUTPUT1)"
RETURN;
/*****************************************************************/
/*****************************************************************/
XXT:
IN2 = "'"||PDS||"(BXXP)'"
/*ALLOCATING FILE*/
"ALLOC DA("||IN2||") FI(OUTPUT2) SHR REUSE"
/*PUTTING DATA TO STEAM*/
X.1 = "//"JOB"XXT    JOB  ("||URN||"),MSGCLASS=O,             "
X.2 = "//          NOTIFY=&SYSUID                                     "
X.3 = "/*JOBPARM S=ANY,SYSAFF=ANY"
X.4 = "//*==> C ALL "||DBNAME||" XXXXX                                "
X.5 = "//STEP01     EXEC PGM=IEFBR14                                  "
X.6 = "//DD100 DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT1,            "
X.7 = "//        DISP=(MOD,DELETE)                                    "
X.8 = "//DD200 DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT2,            "
X.9 = "//        DISP=(MOD,DELETE)                                    "
X.10 = "//DD300 DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT3,           "
X.11 = "//       DISP=(MOD,DELETE)                                    "
X.12 = "//DD400 DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT4,           "
X.13 = "//       DISP=(MOD,DELETE)                                    "
X.14 = "//DD500 DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT5,           "
X.15 = "//       DISP=(MOD,DELETE)                                    "
X.16 = "//DD600 DD DSN=E7440TS."||DBNAME||".CHKPOINT,                 "
X.17 = "//       DISP=(MOD,DELETE)                                    "
X.18 = "//STEP02    EXEC PGM=IDCAMS                                   "
X.19 = "//SYSOUT    DD   SYSOUT=(*)                                   "
X.20 = "//SYSLIST   DD   SYSOUT=(*)                                   "
X.21 = "//SYSPRINT DD    SYSOUT=(*)                                   "
X.22 = "//SYSIN     DD   *                                            "
X.23 = "       DELETE (E7440TT0."||DBNAME||".BEDELETE.FILE)           "
X.24 = "       DELETE (E7440TT0."||DBNAME||".FUNDFILE)                "
X.25 = "       SET MAXCC=0                                            "
X.26 = "       DEFINE CLUSTER(             -                          "
X.27 = "              NAME(E7440TT0."||DBNAME||".BEDELETE.FILE) -     "
X.28 = "              MODEL(E7440PS0.VAN30.BEDELETE.FILE) -           "
X.29 = "              CYLINDERS(500 50))                              "
X.30 = "       DEFINE CLUSTER(             -                          "
X.31 = "              NAME(E7440TT0."||DBNAME||".FUNDFILE) -          "
X.32 = "              MODEL(E7440PS0.VAN30.FUNDFILE) -                "
X.33 = "              CYLINDERS(500 50))                              "
X.34 = "/*                                                            "
X.35 = "//STEP03    EXEC PGM=IDCAMS                                   "
X.36 = "//SYSOUT    DD   SYSOUT=(*)                                   "
X.37 = "//SYSLIST   DD   SYSOUT=(*)                                   "
X.38 = "//SYSPRINT DD    SYSOUT=(*)                                   "
X.39 = "//INDSET    DD   DSN=E7440PS0.VAN30.BEDELETE.FILE,DISP=SHR    "
X.40 = "//OUTDSET   DD   DISP=OLD,AMP='BUFND=32',                     "
X.41 = "//          DSN=E7440TT0."||DBNAME||".BEDELETE.FILE           "
X.42 = "//INDSET1   DD   DSN=E7440PS0.VAN30.FUNDFILE,DISP=SHR         "
X.43 = "//OUTDSET1 DD    DISP=OLD,AMP='BUFND=32',                     "
X.44 = "//          DSN=E7440TT0."||DBNAME||".FUNDFILE                "
X.45 = "//SYSIN     DD   *                                            "
X.46 = "   REPRO INFILE(INDSET) OUTFILE(OUTDSET)                      "
X.47 = "   REPRO INFILE(INDSET1) OUTFILE(OUTDSET1)                    "
X.48 = "/*                                                            "
X.49 = "//STEP04A EXEC PGM=FILEMGR                                    "
X.50 = "//SYSPRINT DD SYSOUT=*                                        "
X.51 = "//DD01      DD DSN=E7440PS.VAN30.CHKPOINT.SECT1,DISP=SHR      "
X.52 = "//DD01O     DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT1,       "
X.53 = "//          DISP=(NEW,CATLG,DELETE),UNIT=DELW,                "
X.54 = "//          SPACE=(CYL,(1,1),RLSE),                           "
X.55 = "//          DCB=(DSORG=PS,RECFM=FB,LRECL=80,BLKSIZE=800)      "
X.56 = "//SYSIN     DD DISP=SHR,DSN=SYSCMN.PROD.CCLIB(E7440KO0)       "
X.57 = "//STEP04B EXEC PGM=FILEMGR                                    "
X.58 = "//SYSPRINT DD SYSOUT=*                                        "
X.59 = "//DD01      DD DSN=E7440PS.VAN30.CHKPOINT.SECT2,DISP=SHR      "
X.60 = "//DD01O     DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT2,       "
X.61 = "//          DISP=(NEW,CATLG,DELETE),UNIT=DELW,                "
X.62 = "//          SPACE=(CYL,(1,1),RLSE),                           "
X.63 = "//          DCB=(DSORG=PS,RECFM=FB,LRECL=80,BLKSIZE=800)      "
X.64 = "//SYSIN     DD DISP=SHR,DSN=SYSCMN.PROD.CCLIB(E7440KO0)       "
X.65 = "//STEP04C EXEC PGM=FILEMGR                                    "
X.66 = "//SYSPRINT DD SYSOUT=*                                        "
X.67 = "//DD01      DD DSN=E7440PS.VAN30.CHKPOINT.SECT3,DISP=SHR      "
X.68 = "//DD01O     DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT3,       "
X.69 = "//          DISP=(NEW,CATLG,DELETE),UNIT=DELW,                "
X.70 = "//          SPACE=(CYL,(1,1),RLSE),                           "
X.71 = "//          DCB=(DSORG=PS,RECFM=FB,LRECL=80,BLKSIZE=800)      "
X.72 = "//SYSIN     DD DISP=SHR,DSN=SYSCMN.PROD.CCLIB(E7440KO0)       "
X.73 = "//STEP04D EXEC PGM=FILEMGR                                    "
X.74 = "//SYSPRINT DD SYSOUT=*                                        "
X.75 = "//DD01      DD DSN=E7440PS.VAN30.CHKPOINT.SECT4,DISP=SHR      "
X.76 = "//DD01O     DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT4,       "
X.77 = "//          DISP=(NEW,CATLG,DELETE),UNIT=DELW,                "
X.78 = "//          SPACE=(CYL,(1,1),RLSE),                           "
X.79 = "//          DCB=(DSORG=PS,RECFM=FB,LRECL=80,BLKSIZE=800)      "
X.80 = "//SYSIN     DD DISP=SHR,DSN=SYSCMN.PROD.CCLIB(E7440KO0)       "
X.81 = "//STEP04E EXEC PGM=FILEMGR                                    "
X.82 = "//SYSPRINT DD SYSOUT=*                                        "
X.83 = "//DD01      DD DSN=E7440PS.VAN30.CHKPOINT.SECT5,DISP=SHR      "
X.84 = "//DD01O     DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT5,       "
X.85 = "//          DISP=(NEW,CATLG,DELETE),UNIT=DELW,                "
X.86 = "//          SPACE=(CYL,(1,1),RLSE),                           "
X.87 = "//          DCB=(DSORG=PS,RECFM=FB,LRECL=80,BLKSIZE=800)      "
X.88 = "//SYSIN     DD DISP=SHR,DSN=SYSCMN.PROD.CCLIB(E7440KO0)       "
X.89 = "//STEP04F EXEC PGM=FILEMGR                                    "
X.90 = "//SYSPRINT DD SYSOUT=*                                        "
X.91 = "//DD01      DD DSN=E7440PS.VAN30.CHKPOINT,DISP=SHR            "
X.92 = "//DD01O     DD DSN=E7440TS."||DBNAME||".CHKPOINT,             "
X.93 = "//          DISP=(NEW,CATLG,DELETE),UNIT=DELW,                "
X.94 = "//          SPACE=(CYL,(1,1),RLSE),                           "
X.95 = "//          DCB=(DSORG=PS,RECFM=FB,LRECL=80,BLKSIZE=800)      "
X.96 = "//SYSIN     DD DISP=SHR,DSN=SYSCMN.PROD.CCLIB(E7440KO0)       "
X.97 = "//*ABCQUEUE '$$'                                       "
X.98 = "//*ABCADDRESS TSO 'SUB * END($$)'                      "
/*WRITING STEM DATA FILE*/
"EXECIO 98 DISKW OUTPUT2 (FINIS STEM X."
"FREE FI(OUTPUT2)" ;
RETURN;
/*****************************************************************/
GAT:
IN3 = "'"||PDS||"(CGAP)'"
/*LOADLIB FIND*/
IF (LB = ' ') THEN
DO
LBLINE ="//*         LOADLIB='"||LB||"',                          "
END
ELSE
DO
LBLINE ="//          LOADLIB='"||LB||"',                          "
END

/*ALLOCATING FILE*/
"ALLOC DA("||IN3||") FI(OUTPUT3) SHR REUSE"
/*PUTTING DATA TO STEAM*/
C.1 = "//"JOB"G1T JOB ("||URN||"),MSGCLASS=O,TIME=(5,30),        "
C.2 = "//     LINES=999999,NOTIFY=&SYSUID                "
C.3 = "//E7441G1P EXEC E7441GAP,                                 "
C.4 = "//           GAP=E7440G1P,                                "
C.5 = "//           JOBNAME=E7440G1P,                            "
C.6 = "//           SECT=1,                                      "
C.7 = "//           HO=N,                                        "
C.8 = "//           GL0066="||CDATE||",                          "
C.9 = "//           GL0067="||LDATE||",                          "
C.10 = "//          GL0917=2"||LDATE||",                         "
C.11 = "//          DSN=E7440TS,                                 "
C.12 = "//          DSNM=E7440TS,                                "
C.13 = "//          DSND=E7440TS,                                "
C.14 = "//          COND.SGAP0250=(0,LE),                        "
C.15 = "//          COND.SGAP0300=(0,LE),                        "
C.16 = "//          DSN1=E7440TS,                                "
C.17 = "//          VDSN=E7440TT0,                               "
C.18 = "//          VAN30="||DBNAME||",                          "
C.19 = LBLINE
C.20 = "//          PARMLIB1='"||PARMLIB||"'                     "
C.21 = "//SGAP0100.INDD01 DD DISP=SHR,                           "
C.22 = "//          DSN=E7440TS."||DBNAME||".PCKTFLE1.N"||CDATE||" "
C.23 = "//SGAP0200.MATRX DD DSN=E7440PS.VAN30.MATRX1.SORTED,     "
C.24 = "//          DISP=SHR                                     "
C.25 = "//SGAP0200.ADMNTBL DD DSN=E7440PS0.VAN30.TABLES,         "
C.26 = "//          DISP=SHR                                     "
C.27 = "//***************************************************** "
C.28 = "//"JOB"G2T JOB ("||URN||"),MSGCLASS=O,TIME=(5,30),       "
C.29 = "//    LINES=999999,NOTIFY=&SYSUID                "
C.30 = "//E7441G2P EXEC E7441GAP,                                "
C.31 = "//          GAP=E7440G2P,                                "
C.32 = "//          JOBNAME=E7440G2P,                            "
C.33 = "//          SECT=2,                                      "
C.34 = "//          HO=N,                                        "
C.35 = "//          GL0066="||CDATE||",                          "
C.36 = "//          GL0067="||LDATE||",                          "
C.37 = "//          GL0917=2"||LDATE||",                         "
C.38 = "//          DSN=E7440TS,                                 "
C.39 = "//          DSNM=E7440TS,                                "
C.40 = "//          DSND=E7440TS,                                "
C.41 = "//          COND.SGAP0250=(0,LE),                        "
C.42 = "//          COND.SGAP0300=(0,LE),                        "
C.43 = "//          DSN1=E7440TS,                                "
C.44 = "//          VDSN=E7440TT0,                               "
C.45 = "//          VAN30="||DBNAME||",                          "
C.46 = LBLINE
C.47 = "//          PARMLIB1='"||PARMLIB||"'                     "
C.48 = "//SGAP0100.INDD01 DD DISP=SHR,                           "
C.49 = "//          DSN=E7440TS."||DBNAME||".PCKTFLE2.N"||CDATE||" "
C.50 = "//SGAP0200.MATRX DD DSN=E7440PS.VAN30.MATRX2.SORTED,     "
C.51 = "//          DISP=SHR                                     "
C.52 = "//SGAP0200.ADMNTBL DD DSN=E7440PS0.VAN30.TABLES,         "
C.53 = "//          DISP=SHR                                     "
C.54 = "//***************************************************** "
C.55 = "//"JOB"G3T JOB ("||URN||"),MSGCLASS=O,TIME=(5,30),       "
C.56 = "//    LINES=999999,NOTIFY=&SYSUID                "
C.57 = "//E7441G3P EXEC E7441GAP,                                "
C.58 = "//          GAP=E7440G3P,                                "
C.59 = "//          JOBNAME=E7440G3P,                            "
C.60 = "//          SECT=3,                                      "
C.61 = "//          HO=N,                                        "
C.62 = "//          GL0066="||CDATE||",                          "
C.63 = "//          GL0067="||LDATE||",                          "
C.64 = "//          GL0917=2"||LDATE||",                         "
C.65 = "//          DSN=E7440TS,                                 "
C.66 = "//          DSNM=E7440TS,                                "
C.67 = "//          DSND=E7440TS,                                "
C.68 = "//          COND.SGAP0250=(0,LE),                        "
C.69 = "//          COND.SGAP0300=(0,LE),                        "
C.70 = "//          DSN1=E7440TS,                                "
C.71 = "//          VDSN=E7440TT0,                               "
C.72 = "//          VAN30="||DBNAME||",                          "
C.73 = LBLINE
C.74 = "//          PARMLIB1='"||PARMLIB||"'                     "
C.75 = "//SGAP0100.INDD01 DD DISP=SHR,                           "
C.76 = "//          DSN=E7440TS."||DBNAME||".PCKTFLE3.N"||CDATE||" "
C.77 = "//SGAP0200.MATRX DD DSN=E7440PS.VAN30.MATRX3.SORTED,     "
C.78 = "//          DISP=SHR                                     "
C.79 = "//SGAP0200.ADMNTBL DD DSN=E7440PS0.VAN30.TABLES,         "
C.80 = "//          DISP=SHR                                     "
C.81 = "//***************************************************** "
C.82 = "//"JOB"G4T JOB ("||URN||"),MSGCLASS=O,TIME=(5,30),       "
C.83 = "//    LINES=999999,NOTIFY=&SYSUID                "
C.84 = "//E7441G4P EXEC E7441GAP,                                "
C.85 = "//          GAP=E7440G4P,                                "
C.86 = "//          JOBNAME=E7440G4P,                            "
C.87 = "//          SECT=4,                                      "
C.88 = "//          HO=N,                                        "
C.89 = "//          GL0066="||CDATE||",                          "
C.90 = "//          GL0067="||LDATE||",                          "
C.91 = "//          GL0917=2"||LDATE||",                         "
C.92 = "//          DSN=E7440TS,                                 "
C.93 = "//          DSNM=E7440TS,                                "
C.94 = "//          DSND=E7440TS,                                "
C.95 = "//          COND.SGAP0250=(0,LE),                        "
C.96 = "//          COND.SGAP0300=(0,LE),                        "
C.97 = "//          DSN1=E7440TS,                                "
C.98 = "//          VDSN=E7440TT0,                               "
C.99 = "//          VAN30="||DBNAME||",                          "
C.100 = LBLINE
C.101 = "//         PARMLIB1='"||PARMLIB||"'                     "
C.102 = "//SGAP0100.INDD01 DD DISP=SHR,                          "
C.103 = "//         DSN=E7440TS."||DBNAME||".PCKTFLE4.N"||CDATE||" "
C.104 = "//SGAP0200.MATRX DD DSN=E7440PS.VAN30.MATRX4.SORTED,    "
C.105 = "//         DISP=SHR                                     "
C.106 = "//SGAP0200.ADMNTBL DD DSN=E7440PS0.VAN30.TABLES,        "
C.107 = "//         DISP=SHR                                     "
C.108 = "//***************************************************** "
C.109 = "//"JOB"G5T JOB ("||URN||"),MSGCLASS=O,TIME=(5,30),      "
C.110 = "//   LINES=999999,NOTIFY=&SYSUID                "
C.111 = "//E7441G5P EXEC E7441GAP,                               "
C.112 = "//         GAP=E7440G5P,                                "
C.113 = "//         JOBNAME=E7440G5P,                            "
C.114 = "//         SECT=5,                                      "
C.115 = "//         HO=N,                                        "
C.116 = "//         GL0066="||CDATE||",                          "
C.117 = "//         GL0067="||LDATE||",                          "
C.118 = "//         GL0917=2"||LDATE||",                         "
C.119 = "//         DSN=E7440TS,                                 "
C.120 = "//         DSNM=E7440TS,                                "
C.121 = "//         DSND=E7440TS,                                "
C.122 = "//         COND.SGAP0250=(0,LE),                        "
C.123 = "//         COND.SGAP0300=(0,LE),                        "
C.124 = "//         DSN1=E7440TS,                                "
C.125 = "//         VDSN=E7440TT0,                               "
C.126 = "//         VAN30="||DBNAME||",                          "
C.127 = LBLINE
C.128 = "//         PARMLIB1='"||PARMLIB||"'                     "
C.129 = "//SGAP0100.INDD01 DD DISP=SHR,                          "
C.130 = "//         DSN=E7440TS."||DBNAME||".PCKTFLE5.N"||CDATE||" "
C.131 = "//SGAP0200.MATRX DD DSN=E7440PS.VAN30.MATRX5.SORTED,    "
C.132 = "//         DISP=SHR                                     "
C.133 = "//SGAP0200.ADMNTBL DD DSN=E7440PS0.VAN30.TABLES,        "
C.134 = "//         DISP=SHR                                     "
C.135 = "//***************************************************** "
C.136 = "//*ABCQUEUE '$$'                                       "
C.137 = "//*ABCADDRESS TSO 'SUB * END($$)'                      "
/*WRITING STEM DATA FILE*/
"EXECIO 137 DISKW OUTPUT3 (FINIS STEM C."
"FREE FI(OUTPUT3)"
RETURN;
/*****************************************************************/
HKT:
IN4 = "'"||PDS||"(DHKP)'"
/*ALLOCATING FILE*/
"ALLOC DA("||IN4||") FI(OUTPUT4) SHR REUSE"
/*PUTTING DATA TO STEAM*/
D.1 = "//"JOB"HKT    JOB  ('E0082AG'),TIME=(1),            "
D.2 = "//      MSGCLASS=O,NOTIFY=&SYSUID                   "
D.3 = "//*"
D.4 = "/*JOBPARM S=ANY,SYSAFF=ANY"
D.5 = "//E7441HKP    EXEC E7441HKP,                        "
D.6 = "//            GT12=GT,                              "
D.7 = "//            GT13=GT,                              "
D.8 = "//            GT14=GT,                              "
D.9 = "//            GT34=GT,                              "
D.10 = "//           GT35=GT,                              "
D.11 = "//*          GT36=GT,                              "
D.12 = "//           DSN2=E7440TS,                         "
D.13 = "//           GL0066="||CDATE||",                   "
D.14 = "//           GL0069="||CDATE||",                   "
D.15 = "//           VDSN=E7440TT0,                        "
D.16 = "//           VAN30="||DBNAME||",                   "
D.17 = "//           COND.STEP13C=(0,LE),                  "
D.18 = "//           COND.STEP13D=(0,LE),                  "
D.19 = "//           COND.STEP0=(0,LE),                    "
D.20 = "//           JCLCLS='*',                           "
D.21 = "//           DUMPCLS='*',                          "
D.22 = "//           RUNLOG='*'                            "
D.23 = "//STEP4.SYSIN     DD  *                            "
D.24 = "   MERGE FIELDS=(5,24,CH,A)                        "
D.25 = "   SUM FIELDS=NONE                                 "
D.26 = "/*                                                 "
D.27 = "//STEP5.SYSIN     DD  *                            "
D.28 = "   MERGE FIELDS=(5,24,CH,A)                        "
D.29 = "   SUM FIELDS=NONE                                 "
D.30 = "/*                                                 "
D.31 = "//STEP6.SYSIN     DD  *                            "
D.32 = "   MERGE FIELDS=(5,24,CH,A)                        "
D.33 = "   SUM FIELDS=NONE                                 "
D.34 = "/*                                                 "
D.35 = "//STEP7.SYSIN     DD  *                            "
D.36 = "   MERGE FIELDS=(5,24,CH,A)                        "
D.37 = "   SUM FIELDS=NONE                                 "
D.38 = "/*                                                 "
D.39 = "//STEP8.SYSIN     DD  *                            "
D.40 = "   MERGE FIELDS=(5,132,CH,A)                       "
D.41 = "   SUM FIELDS=NONE                                 "
D.42 = "/*                                                 "
D.43 = "//STEP9.SYSIN     DD  *                            "
D.44 = "   MERGE FIELDS=(9,49,CH,A)                        "
D.45 = "   SUM FIELDS=NONE                                 "
D.46 = "/*                                                 "
D.47 = "//STEP10.SYSIN    DD  DISP=SHR,                    "
D.48 = "// DSN=SYSCMN.PROD.CCLIB(E7440KO0)                 "
D.49 = "//STEP11.SYSIN     DD  *                           "
D.50 = "   MERGE FIELDS=(9,10,CH,A)                        "
D.51 = "   SUM FIELDS=NONE                                 "
D.52 = "/*                                                 "
D.53 = "//STEP12.SYSIN     DD  *                           "
D.54 = "   MERGE FIELDS=(5,5,CH,A)                         "
D.55 = "   SUM FIELDS=NONE                                 "
D.56 = "/*                                                 "
D.57 = "//STEP13.SYSIN     DD  *                           "
D.58 = "   MERGE FIELDS=(5,10,CH,A)                        "
D.59 = "   SUM FIELDS=NONE                                 "
D.60 = "/*                                                 "
D.61 = "//STEP14.SYSIN     DD  *                           "
D.62 = "   MERGE FIELDS=(5,10,CH,A)                        "
D.63 = "   SUM FIELDS=NONE                                 "
D.64 = "/*                                                 "
D.65 = "//STEP15.SYSIN     DD  *                           "
D.66 = "   MERGE FIELDS=(5,10,CH,A)                        "
D.67 = "   SUM FIELDS=NONE                                 "
D.68 = "/*                                                 "
D.69 = "//STEP16.SYSIN     DD  *                           "
D.70 = "   MERGE FIELDS=(5,10,CH,A)                        "
D.71 = "   SUM FIELDS=NONE                                 "
D.72 = "/*                                                 "
D.73 = "//STEP17.SYSIN     DD  *                           "
D.74 = "   MERGE FIELDS=(5,10,CH,A)                        "
D.75 = "   SUM FIELDS=NONE                                 "
D.76 = "/*                                                 "
D.77 = "//STEP18.SYSIN     DD  *                           "
D.78 = "   MERGE FIELDS=(5,10,CH,A)                        "
D.79 = "   SUM FIELDS=NONE                                 "
D.80 = "/*                                                 "
D.81 = "//STEP19.SYSIN     DD  *                           "
D.82 = "   MERGE FIELDS=(5,10,CH,A)                        "
D.83 = "   SUM FIELDS=NONE                                 "
D.84 = "/*                                                 "
D.85 = "//STEP20.SYSIN     DD  *                           "
D.86 = "   MERGE FIELDS=(5,10,CH,A)                        "
D.87 = "   SUM FIELDS=NONE                                 "
D.88 = "/*                                                 "
D.89 = "//************************************************"
D.90 = "//* CHANGE ARE GL0066 IS CURRENT DATE ,VAN30=MINID"
D.91 = "//* ==> C ALL "||CDATE||" YYMMDD                   "
D.92 = "//* ==> C ALL "||DBNAME||" XXXXX                   "
D.93 = "//* JJ=5,11=16 SUB=MAXCC004                        "
D.94 = "//*ABCQUEUE '$$'                                       "
D.95 = "//*ABCADDRESS TSO 'SUB * END($$)'                      "
/*WRITING STEM DATA FILE*/
"EXECIO 095 DISKW OUTPUT4 (FINIS STEM D."
"FREE FI(OUTPUT4)"
RETURN;
/*****************************************************************/
/*****************************************************************/
PARMLIB:
/* INPUT FILE ALLOCATION */
IN1 = "'"||PARMLIB||"(E7440G1P)'"
IN2 = "'"||PARMLIB||"(E7440G2P)'"
IN3 = "'"||PARMLIB||"(E7440G3P)'"
IN4 = "'"||PARMLIB||"(E7440G4P)'"
IN5 = "'"||PARMLIB||"(E7440G5P)'"

/*******************************************************************/
/*ALLOCATING FILE*/
"ALLOC DA("||IN1||") FI(OUTPUT1) SHR REUSE"
/*PUTTING DATA TO STEAM*/
V.1 = "   DELETE (E7440TT0."||DBNAME||".EXPLODE1) -        "
V.2 = "          CLUSTER                                   "
V.3 = "   IF LASTCC GT 4 THEN SET MAXCC=0                  "
V.4 = "   DEFINE CLUSTER -                                 "
V.5 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE1) -   "
V.6 = "          UNIQUE -                                  "
V.7 = "          SHAREOPTIONS(2 3) -                       "
V.8 = "          MGMTCLAS(D32M) -                          "
V.9 = "          VOLUMES(* * * * *) -                      "
V.10 = "          SPEED) -                                  "
V.11 = "   DATA -                                           "
V.12 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE1.DATA) - "
V.13 = "          RECORDSIZE(2000,20472) -                  "
V.14 = "          FREESPACE(0 0) -                          "
V.15 = "          CISZ(20480) -                             "
V.16 = "          CYL(10 5) -                               "
V.17 = "          KEYS(10,4) ) -                            "
V.18 = "   INDEX -                                          "
V.19 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE1.INDEX) - "
V.20 = "          CYL(10 5)  -                              "
V.21 = "          CISZ(512) )                               "
V.22 = "                                                    "
V.23 = "   DELETE (E7440TT0."||DBNAME||".ERRTRIG1) -        "
V.24 = "          CLUSTER                                   "
V.25 = "   IF LASTCC GT 4 THEN SET MAXCC=0                  "
V.26 = "                                                    "
V.27 = "   DEFINE CLUSTER -                                 "
V.28 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG1) -   "
V.29 = "          UNIQUE -                                  "
V.30 = "          SHAREOPTIONS(2 3) -                       "
V.31 = "          MGMTCLAS(D32M) -                          "
V.32 = "          VOLUMES(* * * * *) -                      "
V.33 = "          SPEED) -                                  "
V.34 = "   DATA -                                           "
V.35 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG1.DATA) - "
V.36 = "          RECORDSIZE(2000 20472) -                  "
V.37 = "          FREESPACE(0 0) -                          "
V.38 = "          CISZ(20480) -                             "
V.39 = "          CYL(10 5) -                               "
V.40 = "          KEYS(10 0) ) -                            "
V.41 = "   INDEX -                                          "
V.42 = "       (NAME(E7440TT0."||DBNAME||".ERRTRIG1.INDEX) - "
V.43 = "          CYL(10 5) -                               "
V.44 = "          CISZ(512) )                               "
V.45 = "                                                    "
V.46 = "   DELETE (E7440TT0."||DBNAME||".REAPPLY1) -        "
V.47 = "          CLUSTER                                   "
V.48 = "   IF LASTCC GT 4 THEN SET MAXCC=0                  "
V.49 = "                                                    "
V.50 = "   DEFINE CLUSTER         -                         "
V.51 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY1) -   "
V.52 = "          UNIQUE -                                  "
V.53 = "          SHAREOPTIONS(2 3) -                       "
V.54 = "          MGMTCLAS(D32M) -                          "
V.55 = "          VOLUMES(* * * * *) -                      "
V.56 = "          SPEED) -                                  "
V.57 = "   DATA -                                           "
V.58 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY1.DATA) - "
V.59 = "          RECORDSIZE(2000,20472) -                  "
V.60 = "          FREESPACE(0 0) -                          "
V.61 = "          CISZ(20480) -                             "
V.62 = "          CYL(10 5) -                               "
V.63 = "          KEYS(10,4) ) -                            "
V.64 = "   INDEX -                                          "
V.65 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY1.INDEX) - "
V.66 = "          CYL(10 5) -                               "
V.67 = "          CISZ(512) )                               "
V.68 = "                                                    "
V.69 = "   DELETE (E7440TT0."||DBNAME||".DBPBFLG1) -        "
V.70 = "          CLUSTER                                   "
V.71 = "   IF LASTCC GT 4 THEN SET MAXCC=0                  "
V.72 = "                                                    "
V.73 = "   DEFINE CLUSTER -                                 "
V.74 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG1) -   "
V.75 = "          UNIQUE -                                  "
V.76 = "          SHAREOPTIONS(2 3) -                       "
V.77 = "          MGMTCLAS(D32) -                           "
V.78 = "          VOLUMES(* * * *) -                        "
V.79 = "          SPEED) -                                  "
V.80 = "   DATA -                                           "
V.81 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG1.DATA) - "
V.82 = "          RECORDSIZE(20472 20472) -                 "
V.83 = "          FREESPACE(0 0) -                          "
V.84 = "          CISZ(20480) -                             "
V.85 = "          CYL(10 5) -                               "
V.86 = "          KEYS(5 0) ) -                             "
V.87 = "   INDEX -                                          "
V.88 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG1.INDEX) - "
V.89 = "          CYL(10 5) -                               "
V.90 = "          CISZ(512) )                               "
V.91 = "                                                    "
V.92 = "   DELETE E7440TT0."||DBNAME||".CKPTCTL1 -          "
V.93 = "          CLUSTER                                   "
V.94 = "   IF LASTCC GT 4 THEN SET MAXCC=0                  "
V.95 = "                                                    "
V.96 = "   DEFINE CLUSTER -                                 "
V.97 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL1) -   "
V.98 = "          UNIQUE -                                  "
V.99 = "          SHAREOPTIONS(2 3) -                       "
V.100 = "          MGMTCLAS(D32M) -                          "
V.101 = "          VOLUMES(* * * * *) -                      "
V.102 = "          SPEED) -                                  "
V.103 = "   DATA -                                           "
V.104 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL1.DATA) - "
V.105 = "          RECORDSIZE(1500 20472) -                  "
V.106 = "          FREESPACE(0 0) -                          "
V.107 = "          CISZ(20480) -                             "
V.108 = "          CYL(10 5) -                               "
V.109 = "          KEYS(9 0) ) -                             "
V.110 = "   INDEX -                                          "
V.111 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL1.INDEX) - "
V.112 = "          CYL(10 5) -                               "
V.113 = "          CISZ(512) )                               "
V.114 = "                                                    "
V.115 = "   DELETE (E7440TT0."||DBNAME||".GRPEXPL1) -        "
V.116 = "          CLUSTER                                   "
V.117 = "   IF LASTCC GT 4 THEN SET MAXCC=0                  "
V.118 = "                                                    "
V.119 = "   DEFINE CLUSTER -                                 "
V.120 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL1) -   "
V.121 = "          UNIQUE -                                  "
V.122 = "          SHAREOPTIONS(2 3) -                       "
V.123 = "          MGMTCLAS(D32M) -                          "
V.124 = "          VOLUMES(* * * * *) -                      "
V.125 = "          SPEED) -                                  "
V.126 = "   DATA -                                           "
V.127 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL1.DATA) - "
V.128 = "          RECORDSIZE(2000,20472) -                  "
V.129 = "          FREESPACE(0 0) -                          "
V.130 = "          CISZ(20480) -                             "
V.131 = "          CYL(10 5) -                               "
V.132 = "          KEYS(10,4) ) -                            "
V.133 = "   INDEX -                                          "
V.134 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL1.INDEX) - "
V.135 = "          CYL(10 5) -                               "
V.136 = "          CISZ(512) )                               "
V.137 = "                                                    "
V.138 = "   DELETE (E7440TT0."||DBNAME||".PCKTFLE1) -        "
V.139 = "          CLUSTER                                   "
V.140 = "   IF LASTCC GT 4 THEN SET MAXCC=0                  "
V.141 = "                                                    "
V.142 = "   DEFINE CLUSTER -                                 "
V.143 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE1) -   "
V.144 = "          UNIQUE -                                  "
V.145 = "          SHAREOPTIONS(2 3) -                       "
V.146 = "          MGMTCLAS(D32M) -                          "
V.147 = "          VOLUMES(* * * * *) -                      "
V.148 = "          SPEED) -                                  "
V.149 = "   DATA -                                           "
V.150 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE1.DATA) - "
V.151 = "          RECORDSIZE(2102 20480) -                  "
V.152 = "          FREESPACE(10 10) -                        "
V.153 = "          CISZ(20480) -                             "
V.154 = "          CYL(10 5) -                               "
V.155 = "          KEYS(71 0) ) -                            "
V.156 = "   INDEX -                                          "
V.157 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE1.INDEX) - "
V.158 = "          CYL(10 5) -                               "
V.159 = "          CISZ(512) )                               "
V.160 = "                                                    "
/*WRITING STEM DATA FILE*/
"EXECIO 160 DISKW OUTPUT1 (FINIS STEM V."
"FREE FI(OUTPUT1)" ;
/*****************************************************************/
/*ALLOCATING FILE*/
"ALLOC DA("||IN2||") FI(OUTPUT2) SHR REUSE"
/*PUTTING DATA TO STEAM*/
W.1 = "   DELETE (E7440TT0."||DBNAME||".EXPLODE2) -           "
W.2 = "          CLUSTER                                      "
W.3 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
W.4 = "   DEFINE CLUSTER -                                    "
W.5 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE2) -      "
W.6 = "          UNIQUE -                                     "
W.7 = "          SHAREOPTIONS(2 3) -                          "
W.8 = "          MGMTCLAS(D32M) -                             "
W.9 = "          VOLUMES(* * * * *) -                         "
W.10 = "          SPEED) -                                     "
W.11 = "   DATA -                                              "
W.12 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE2.DATA) - "
W.13 = "          RECORDSIZE(2000,20472) -                     "
W.14 = "          FREESPACE(0 0) -                             "
W.15 = "          CISZ(20480) -                                "
W.16 = "          CYL(10 5) -                                  "
W.17 = "          KEYS(10,4) ) -                               "
W.18 = "   INDEX -                                             "
W.19 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE2.INDEX) - "
W.20 = "          CYL(10 5)  -                                 "
W.21 = "          CISZ(512) )                                  "
W.22 = "                                                       "
W.23 = "   DELETE (E7440TT0."||DBNAME||".ERRTRIG2) -           "
W.24 = "          CLUSTER                                      "
W.25 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
W.26 = "   DEFINE CLUSTER -                                    "
W.27 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG2) -      "
W.28 = "          UNIQUE -                                     "
W.29 = "          SHAREOPTIONS(2 3) -                          "
W.30 = "          MGMTCLAS(D32M) -                             "
W.31 = "          VOLUMES(* * * * *) -                         "
W.32 = "          SPEED) -                                     "
W.33 = "   DATA -                                              "
W.34 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG2.DATA) - "
W.35 = "          RECORDSIZE(2000 20472) -                     "
W.36 = "          FREESPACE(0 0) -                             "
W.37 = "          CISZ(20480) -                                "
W.38 = "          CYL(10 5) -                                  "
W.39 = "          KEYS(10 0) ) -                               "
W.40 = "   INDEX -                                             "
W.41 = "       (NAME(E7440TT0."||DBNAME||".ERRTRIG2.INDEX) -   "
W.42 = "          CYL(10 5) -                                  "
W.43 = "          CISZ(512) )                                  "
W.44 = "                                                       "
W.45 = "   DELETE (E7440TT0."||DBNAME||".REAPPLY2) -           "
W.46 = "          CLUSTER                                      "
W.47 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
W.48 = "   DEFINE CLUSTER         -                            "
W.49 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY2) -      "
W.50 = "          UNIQUE -                                     "
W.51 = "          SHAREOPTIONS(2 3) -                          "
W.52 = "          MGMTCLAS(D32M) -                             "
W.53 = "          VOLUMES(* * * * *) -                         "
W.54 = "          SPEED) -                                     "
W.55 = "   DATA -                                              "
W.56 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY2.DATA) - "
W.57 = "          RECORDSIZE(2000,20472) -                     "
W.58 = "          FREESPACE(0 0) -                             "
W.59 = "          CISZ(20480) -                                "
W.60 = "          CYL(10 5) -                                  "
W.61 = "          KEYS(10,4) ) -                               "
W.62 = "   INDEX -                                             "
W.63 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY2.INDEX) - "
W.64 = "          CYL(10 5) -                                  "
W.65 = "          CISZ(512) )                                  "
W.66 = "                                                       "
W.67 = "   DELETE (E7440TT0."||DBNAME||".DBPBFLG2) -           "
W.68 = "          CLUSTER                                      "
W.69 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
W.70 = "   DEFINE CLUSTER -                                    "
W.71 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG2) -      "
W.72 = "          UNIQUE -                                     "
W.73 = "          SHAREOPTIONS(2 3) -                          "
W.74 = "          MGMTCLAS(D32) -                              "
W.75 = "          VOLUMES(* * * *) -                           "
W.76 = "          SPEED) -                                     "
W.77 = "   DATA -                                              "
W.78 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG2.DATA) - "
W.79 = "          RECORDSIZE(20472 20472) -                    "
W.80 = "          FREESPACE(0 0) -                             "
W.81 = "          CISZ(20480) -                                "
W.82 = "          CYL(10 5) -                                  "
W.83 = "          KEYS(5 0) ) -                                "
W.84 = "   INDEX -                                             "
W.85 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG2.INDEX) - "
W.86 = "          CYL(10 5) -                                  "
W.87 = "          CISZ(512) )                                  "
W.88 = "                                                       "
W.89 = "   DELETE E7440TT0."||DBNAME||".CKPTCTL2 -             "
W.90 = "          CLUSTER                                      "
W.91 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
W.92 = "   DEFINE CLUSTER -                                    "
W.93 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL2) -      "
W.94 = "          UNIQUE -                                     "
W.95 = "          SHAREOPTIONS(2 3) -                          "
W.96 = "          MGMTCLAS(D32M) -                             "
W.97 = "          VOLUMES(* * * * *) -                         "
W.98 = "          SPEED) -                                     "
W.99 = "   DATA -                                              "
W.100 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL2.DATA) - "
W.101 = "          RECORDSIZE(1500 20472) -                     "
W.102 = "          FREESPACE(0 0) -                             "
W.103 = "          CISZ(20480) -                                "
W.104 = "          CYL(10 5) -                                  "
W.105 = "          KEYS(9 0) ) -                                "
W.106 = "   INDEX -                                             "
W.107 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL2.INDEX) - "
W.108 = "          CYL(10 5) -                                  "
W.109 = "          CISZ(512) )                                  "
W.110 = "                                                       "
W.111 = "   DELETE (E7440TT0."||DBNAME||".GRPEXPL2) -           "
W.112 = "          CLUSTER                                      "
W.113 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
W.114 = "   DEFINE CLUSTER -                                    "
W.115 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL2) -      "
W.116 = "          UNIQUE -                                     "
W.117 = "          SHAREOPTIONS(2 3) -                          "
W.118 = "          MGMTCLAS(D32M) -                             "
W.119 = "          VOLUMES(* * * * *) -                         "
W.120 = "          SPEED) -                                     "
W.121 = "   DATA -                                              "
W.122 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL2.DATA) - "
W.123 = "          RECORDSIZE(2000,20472) -                     "
W.124 = "          FREESPACE(0 0) -                             "
W.125 = "          CISZ(20480) -                                "
W.126 = "          CYL(10 5) -                                  "
W.127 = "          KEYS(10,4) ) -                               "
W.128 = "   INDEX -                                             "
W.129 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL2.INDEX) - "
W.130 = "          CYL(10 5) -                                  "
W.131 = "          CISZ(512) )                                  "
W.132 = "                                                       "
W.133 = "   DELETE (E7440TT0."||DBNAME||".PCKTFLE2) -           "
W.134 = "          CLUSTER                                      "
W.135 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
W.136 = "   DEFINE CLUSTER -                                    "
W.137 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE2) -      "
W.138 = "          UNIQUE -                                     "
W.139 = "          SHAREOPTIONS(2 3) -                          "
W.140 = "          MGMTCLAS(D32M) -                             "
W.141 = "          VOLUMES(* * * * *) -                         "
W.142 = "          SPEED) -                                     "
W.143 = "   DATA -                                              "
W.144 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE2.DATA) - "
W.145 = "          RECORDSIZE(2102 20480) -                     "
W.146 = "          FREESPACE(10 10) -                           "
W.147 = "          CISZ(20480) -                                "
W.148 = "          CYL(10 5) -                                  "
W.149 = "          KEYS(71 0) ) -                               "
W.150 = "   INDEX -                                             "
W.151 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE2.INDEX) - "
W.152 = "          CYL(10 5) -                                  "
W.153 = "          CISZ(512) )                                  "
W.154 = "                                                       "
/*WRITING STEM DATA FILE*/
"EXECIO 154 DISKW OUTPUT2 (FINIS STEM W."
"FREE FI(OUTPUT2)" ;
/*****************************************************************/
/*ALLOCATING FILE*/
"ALLOC DA("||IN3||") FI(OUTPUT3) SHR REUSE"
/*PUTTING DATA TO STEAM*/
X.1 = "   DELETE (E7440TT0."||DBNAME||".EXPLODE3) -           "
X.2 = "          CLUSTER                                      "
X.3 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
X.4 = "   DEFINE CLUSTER -                                    "
X.5 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE3) -      "
X.6 = "          UNIQUE -                                     "
X.7 = "          SHAREOPTIONS(2 3) -                          "
X.8 = "          MGMTCLAS(D32M) -                             "
X.9 = "          VOLUMES(* * * * *) -                         "
X.10 = "          SPEED) -                                     "
X.11 = "   DATA -                                              "
X.12 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE3.DATA) - "
X.13 = "          RECORDSIZE(2000,20472) -                     "
X.14 = "          FREESPACE(0 0) -                             "
X.15 = "          CISZ(20480) -                                "
X.16 = "          CYL(10 5) -                                  "
X.17 = "          KEYS(10,4) ) -                               "
X.18 = "   INDEX -                                             "
X.19 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE3.INDEX) - "
X.20 = "          CYL(10 5)  -                                 "
X.21 = "          CISZ(512) )                                  "
X.22 = "                                                       "
X.23 = "   DELETE (E7440TT0."||DBNAME||".ERRTRIG3) -           "
X.24 = "          CLUSTER                                      "
X.25 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
X.26 = "   DEFINE CLUSTER -                                    "
X.27 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG3) -      "
X.28 = "          UNIQUE -                                     "
X.29 = "          SHAREOPTIONS(2 3) -                          "
X.30 = "          MGMTCLAS(D32M) -                             "
X.31 = "          VOLUMES(* * * * *) -                         "
X.32 = "          SPEED) -                                     "
X.33 = "   DATA -                                              "
X.34 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG3.DATA) - "
X.35 = "          RECORDSIZE(2000 20472) -                     "
X.36 = "          FREESPACE(0 0) -                             "
X.37 = "          CISZ(20480) -                                "
X.38 = "          CYL(10 5) -                                  "
X.39 = "          KEYS(10 0) ) -                               "
X.40 = "   INDEX -                                             "
X.41 = "       (NAME(E7440TT0."||DBNAME||".ERRTRIG3.INDEX) -   "
X.42 = "          CYL(10 5) -                                  "
X.43 = "          CISZ(512) )                                  "
X.44 = "                                                       "
X.45 = "   DELETE (E7440TT0."||DBNAME||".REAPPLY3) -           "
X.46 = "          CLUSTER                                      "
X.47 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
X.48 = "   DEFINE CLUSTER         -                            "
X.49 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY3) -      "
X.50 = "          UNIQUE -                                     "
X.51 = "          SHAREOPTIONS(2 3) -                          "
X.52 = "          MGMTCLAS(D32M) -                             "
X.53 = "          VOLUMES(* * * * *) -                         "
X.54 = "          SPEED) -                                     "
X.55 = "   DATA -                                              "
X.56 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY3.DATA) - "
X.57 = "          RECORDSIZE(2000,20472) -                     "
X.58 = "          FREESPACE(0 0) -                             "
X.59 = "          CISZ(20480) -                                "
X.60 = "          CYL(10 5) -                                  "
X.61 = "          KEYS(10,4) ) -                               "
X.62 = "   INDEX -                                             "
X.63 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY3.INDEX) - "
X.64 = "          CYL(10 5) -                                  "
X.65 = "          CISZ(512) )                                  "
X.66 = "                                                       "
X.67 = "   DELETE (E7440TT0."||DBNAME||".DBPBFLG3) -           "
X.68 = "          CLUSTER                                      "
X.69 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
X.70 = "   DEFINE CLUSTER -                                    "
X.71 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG3) -      "
X.72 = "          UNIQUE -                                     "
X.73 = "          SHAREOPTIONS(2 3) -                          "
X.74 = "          MGMTCLAS(D32) -                              "
X.75 = "          VOLUMES(* * * *) -                           "
X.76 = "          SPEED) -                                     "
X.77 = "   DATA -                                              "
X.78 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG3.DATA) - "
X.79 = "          RECORDSIZE(20472 20472) -                    "
X.80 = "          FREESPACE(0 0) -                             "
X.81 = "          CISZ(20480) -                                "
X.82 = "          CYL(10 5) -                                  "
X.83 = "          KEYS(5 0) ) -                                "
X.84 = "   INDEX -                                             "
X.85 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG3.INDEX) - "
X.86 = "          CYL(10 5) -                                  "
X.87 = "          CISZ(512) )                                  "
X.88 = "                                                       "
X.89 = "   DELETE E7440TT0."||DBNAME||".CKPTCTL3 -             "
X.90 = "          CLUSTER                                      "
X.91 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
X.92 = "   DEFINE CLUSTER -                                    "
X.93 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL3) -      "
X.94 = "          UNIQUE -                                     "
X.95 = "          SHAREOPTIONS(2 3) -                          "
X.96 = "          MGMTCLAS(D32M) -                             "
X.97 = "          VOLUMES(* * * * *) -                         "
X.98 = "          SPEED) -                                     "
X.99 = "   DATA -                                              "
X.100 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL3.DATA) - "
X.101 = "          RECORDSIZE(1500 20472) -                     "
X.102 = "          FREESPACE(0 0) -                             "
X.103 = "          CISZ(20480) -                                "
X.104 = "          CYL(10 5) -                                  "
X.105 = "          KEYS(9 0) ) -                                "
X.106 = "   INDEX -                                             "
X.107 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL3.INDEX) - "
X.108 = "          CYL(10 5) -                                  "
X.109 = "          CISZ(512) )                                  "
X.110 = "                                                       "
X.111 = "   DELETE (E7440TT0."||DBNAME||".GRPEXPL3) -           "
X.112 = "          CLUSTER                                      "
X.113 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
X.114 = "   DEFINE CLUSTER -                                    "
X.115 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL3) -      "
X.116 = "          UNIQUE -                                     "
X.117 = "          SHAREOPTIONS(2 3) -                          "
X.118 = "          MGMTCLAS(D32M) -                             "
X.119 = "          VOLUMES(* * * * *) -                         "
X.120 = "          SPEED) -                                     "
X.121 = "   DATA -                                              "
X.122 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL3.DATA) - "
X.123 = "          RECORDSIZE(2000,20472) -                     "
X.124 = "          FREESPACE(0 0) -                             "
X.125 = "          CISZ(20480) -                                "
X.126 = "          CYL(10 5) -                                  "
X.127 = "          KEYS(10,4) ) -                               "
X.128 = "   INDEX -                                             "
X.129 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL3.INDEX) - "
X.130 = "          CYL(10 5) -                                  "
X.131 = "          CISZ(512) )                                  "
X.132 = "                                                       "
X.133 = "   DELETE (E7440TT0."||DBNAME||".PCKTFLE3) -           "
X.134 = "          CLUSTER                                      "
X.135 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
X.136 = "   DEFINE CLUSTER -                                    "
X.137 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE3) -      "
X.138 = "          UNIQUE -                                     "
X.139 = "          SHAREOPTIONS(2 3) -                          "
X.140 = "          MGMTCLAS(D32M) -                             "
X.141 = "          VOLUMES(* * * * *) -                         "
X.142 = "          SPEED) -                                     "
X.143 = "   DATA -                                              "
X.144 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE3.DATA) - "
X.145 = "          RECORDSIZE(2102 20480) -                     "
X.146 = "          FREESPACE(10 10) -                           "
X.147 = "          CISZ(20480) -                                "
X.148 = "          CYL(10 5) -                                  "
X.149 = "          KEYS(71 0) ) -                               "
X.150 = "   INDEX -                                             "
X.151 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE3.INDEX) - "
X.152 = "          CYL(10 5) -                                  "
X.153 = "          CISZ(512) )                                  "
X.154 = "                                                       "
/*WRITING STEM DATA FILE*/
"EXECIO 154 DISKW OUTPUT3 (FINIS STEM X."
"FREE FI(OUTPUT3)" ;
/*****************************************************************/
/*ALLOCATING FILE*/
"ALLOC DA("||IN4||") FI(OUTPUT4) SHR REUSE"
/*PUTTING DATA TO STEAM*/
Y.1 = "   DELETE (E7440TT0."||DBNAME||".EXPLODE4) -           "
Y.2 = "          CLUSTER                                      "
Y.3 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Y.4 = "   DEFINE CLUSTER -                                    "
Y.5 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE4) -      "
Y.6 = "          UNIQUE -                                     "
Y.7 = "          SHAREOPTIONS(2 3) -                          "
Y.8 = "          MGMTCLAS(D32M) -                             "
Y.9 = "          VOLUMES(* * * * *) -                         "
Y.10 = "          SPEED) -                                     "
Y.11 = "   DATA -                                              "
Y.12 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE4.DATA) - "
Y.13 = "          RECORDSIZE(2000,20472) -                     "
Y.14 = "          FREESPACE(0 0) -                             "
Y.15 = "          CISZ(20480) -                                "
Y.16 = "          CYL(10 5) -                                  "
Y.17 = "          KEYS(10,4) ) -                               "
Y.18 = "   INDEX -                                             "
Y.19 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE4.INDEX) - "
Y.20 = "          CYL(10 5)  -                                 "
Y.21 = "          CISZ(512) )                                  "
Y.22 = "                                                       "
Y.23 = "   DELETE (E7440TT0."||DBNAME||".ERRTRIG4) -           "
Y.24 = "          CLUSTER                                      "
Y.25 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Y.26 = "   DEFINE CLUSTER -                                    "
Y.27 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG4) -      "
Y.28 = "          UNIQUE -                                     "
Y.29 = "          SHAREOPTIONS(2 3) -                          "
Y.30 = "          MGMTCLAS(D32M) -                             "
Y.31 = "          VOLUMES(* * * * *) -                         "
Y.32 = "          SPEED) -                                     "
Y.33 = "   DATA -                                              "
Y.34 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG4.DATA) - "
Y.35 = "          RECORDSIZE(2000 20472) -                     "
Y.36 = "          FREESPACE(0 0) -                             "
Y.37 = "          CISZ(20480) -                                "
Y.38 = "          CYL(10 5) -                                  "
Y.39 = "          KEYS(10 0) ) -                               "
Y.40 = "   INDEX -                                             "
Y.41 = "       (NAME(E7440TT0."||DBNAME||".ERRTRIG4.INDEX) -   "
Y.42 = "          CYL(10 5) -                                  "
Y.43 = "          CISZ(512) )                                  "
Y.44 = "                                                       "
Y.45 = "   DELETE (E7440TT0."||DBNAME||".REAPPLY4) -           "
Y.46 = "          CLUSTER                                      "
Y.47 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Y.48 = "   DEFINE CLUSTER         -                            "
Y.49 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY4) -      "
Y.50 = "          UNIQUE -                                     "
Y.51 = "          SHAREOPTIONS(2 3) -                          "
Y.52 = "          MGMTCLAS(D32M) -                             "
Y.53 = "          VOLUMES(* * * * *) -                         "
Y.54 = "          SPEED) -                                     "
Y.55 = "   DATA -                                              "
Y.56 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY4.DATA) - "
Y.57 = "          RECORDSIZE(2000,20472) -                     "
Y.58 = "          FREESPACE(0 0) -                             "
Y.59 = "          CISZ(20480) -                                "
Y.60 = "          CYL(10 5) -                                  "
Y.61 = "          KEYS(10,4) ) -                               "
Y.62 = "   INDEX -                                             "
Y.63 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY4.INDEX) - "
Y.64 = "          CYL(10 5) -                                  "
Y.65 = "          CISZ(512) )                                  "
Y.66 = "                                                       "
Y.67 = "   DELETE (E7440TT0."||DBNAME||".DBPBFLG4) -           "
Y.68 = "          CLUSTER                                      "
Y.69 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Y.70 = "   DEFINE CLUSTER -                                    "
Y.71 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG4) -      "
Y.72 = "          UNIQUE -                                     "
Y.73 = "          SHAREOPTIONS(2 3) -                          "
Y.74 = "          MGMTCLAS(D32) -                              "
Y.75 = "          VOLUMES(* * * *) -                           "
Y.76 = "          SPEED) -                                     "
Y.77 = "   DATA -                                              "
Y.78 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG4.DATA) - "
Y.79 = "          RECORDSIZE(20472 20472) -                    "
Y.80 = "          FREESPACE(0 0) -                             "
Y.81 = "          CISZ(20480) -                                "
Y.82 = "          CYL(10 5) -                                  "
Y.83 = "          KEYS(5 0) ) -                                "
Y.84 = "   INDEX -                                             "
Y.85 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG4.INDEX) - "
Y.86 = "          CYL(10 5) -                                  "
Y.87 = "          CISZ(512) )                                  "
Y.88 = "                                                       "
Y.89 = "   DELETE E7440TT0."||DBNAME||".CKPTCTL4 -             "
Y.90 = "          CLUSTER                                      "
Y.91 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Y.92 = "   DEFINE CLUSTER -                                    "
Y.93 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL4) -      "
Y.94 = "          UNIQUE -                                     "
Y.95 = "          SHAREOPTIONS(2 3) -                          "
Y.96 = "          MGMTCLAS(D32M) -                             "
Y.97 = "          VOLUMES(* * * * *) -                         "
Y.98 = "          SPEED) -                                     "
Y.99 = "   DATA -                                              "
Y.100 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL4.DATA) - "
Y.101 = "          RECORDSIZE(1500 20472) -                     "
Y.102 = "          FREESPACE(0 0) -                             "
Y.103 = "          CISZ(20480) -                                "
Y.104 = "          CYL(10 5) -                                  "
Y.105 = "          KEYS(9 0) ) -                                "
Y.106 = "   INDEX -                                             "
Y.107 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL4.INDEX) - "
Y.108 = "          CYL(10 5) -                                  "
Y.109 = "          CISZ(512) )                                  "
Y.110 = "                                                       "
Y.111 = "   DELETE (E7440TT0."||DBNAME||".GRPEXPL4) -           "
Y.112 = "          CLUSTER                                      "
Y.113 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Y.114 = "   DEFINE CLUSTER -                                    "
Y.115 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL4) -      "
Y.116 = "          UNIQUE -                                     "
Y.117 = "          SHAREOPTIONS(2 3) -                          "
Y.118 = "          MGMTCLAS(D32M) -                             "
Y.119 = "          VOLUMES(* * * * *) -                         "
Y.120 = "          SPEED) -                                     "
Y.121 = "   DATA -                                              "
Y.122 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL4.DATA) - "
Y.123 = "          RECORDSIZE(2000,20472) -                     "
Y.124 = "          FREESPACE(0 0) -                             "
Y.125 = "          CISZ(20480) -                                "
Y.126 = "          CYL(10 5) -                                  "
Y.127 = "          KEYS(10,4) ) -                               "
Y.128 = "   INDEX -                                             "
Y.129 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL4.INDEX) - "
Y.130 = "          CYL(10 5) -                                  "
Y.131 = "          CISZ(512) )                                  "
Y.132 = "                                                       "
Y.133 = "   DELETE (E7440TT0."||DBNAME||".PCKTFLE4) -           "
Y.134 = "          CLUSTER                                      "
Y.135 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Y.136 = "   DEFINE CLUSTER -                                    "
Y.137 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE4) -      "
Y.138 = "          UNIQUE -                                     "
Y.139 = "          SHAREOPTIONS(2 3) -                          "
Y.140 = "          MGMTCLAS(D32M) -                             "
Y.141 = "          VOLUMES(* * * * *) -                         "
Y.142 = "          SPEED) -                                     "
Y.143 = "   DATA -                                              "
Y.144 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE4.DATA) - "
Y.145 = "          RECORDSIZE(2102 20480) -                     "
Y.146 = "          FREESPACE(10 10) -                           "
Y.147 = "          CISZ(20480) -                                "
Y.148 = "          CYL(10 5) -                                  "
Y.149 = "          KEYS(71 0) ) -                               "
Y.150 = "   INDEX -                                             "
Y.151 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE4.INDEX) - "
Y.152 = "          CYL(10 5) -                                  "
Y.153 = "          CISZ(512) )                                  "
Y.154 = "                                                       "
/*WRITING STEM DATA FILE*/
"EXECIO 154 DISKW OUTPUT4 (FINIS STEM Y."
"FREE FI(OUTPUT4)" ;
/*****************************************************************/
/*****************************************************************/
/*ALLOCATING FILE*/
"ALLOC DA("||IN5||") FI(OUTPUT5) SHR REUSE"
/*PUTTING DATA TO STEAM*/
Z.1 = "   DELETE (E7440TT0."||DBNAME||".EXPLODE5) -           "
Z.2 = "          CLUSTER                                      "
Z.3 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Z.4 = "   DEFINE CLUSTER -                                    "
Z.5 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE5) -      "
Z.6 = "          UNIQUE -                                     "
Z.7 = "          SHAREOPTIONS(2 3) -                          "
Z.8 = "          MGMTCLAS(D32M) -                             "
Z.9 = "          VOLUMES(* * * * *) -                         "
Z.10 = "          SPEED) -                                     "
Z.11 = "   DATA -                                              "
Z.12 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE5.DATA) - "
Z.13 = "          RECORDSIZE(2000,20472) -                     "
Z.14 = "          FREESPACE(0 0) -                             "
Z.15 = "          CISZ(20480) -                                "
Z.16 = "          CYL(10 5) -                                  "
Z.17 = "          KEYS(10,4) ) -                               "
Z.18 = "   INDEX -                                             "
Z.19 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE5.INDEX) - "
Z.20 = "          CYL(10 5)  -                                 "
Z.21 = "          CISZ(512) )                                  "
Z.22 = "                                                       "
Z.23 = "   DELETE (E7440TT0."||DBNAME||".ERRTRIG5) -           "
Z.24 = "          CLUSTER                                      "
Z.25 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Z.26 = "   DEFINE CLUSTER -                                    "
Z.27 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG5) -      "
Z.28 = "          UNIQUE -                                     "
Z.29 = "          SHAREOPTIONS(2 3) -                          "
Z.30 = "          MGMTCLAS(D32M) -                             "
Z.31 = "          VOLUMES(* * * * *) -                         "
Z.32 = "          SPEED) -                                     "
Z.33 = "   DATA -                                              "
Z.34 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG5.DATA) - "
Z.35 = "          RECORDSIZE(2000 20472) -                     "
Z.36 = "          FREESPACE(0 0) -                             "
Z.37 = "          CISZ(20480) -                                "
Z.38 = "          CYL(10 5) -                                  "
Z.39 = "          KEYS(10 0) ) -                               "
Z.40 = "   INDEX -                                             "
Z.41 = "       (NAME(E7440TT0."||DBNAME||".ERRTRIG5.INDEX) -   "
Z.42 = "          CYL(10 5) -                                  "
Z.43 = "          CISZ(512) )                                  "
Z.44 = "                                                       "
Z.45 = "   DELETE (E7440TT0."||DBNAME||".REAPPLY5) -           "
Z.46 = "          CLUSTER                                      "
Z.47 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Z.48 = "   DEFINE CLUSTER         -                            "
Z.49 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY5) -      "
Z.50 = "          UNIQUE -                                     "
Z.51 = "          SHAREOPTIONS(2 3) -                          "
Z.52 = "          MGMTCLAS(D32M) -                             "
Z.53 = "          VOLUMES(* * * * *) -                         "
Z.54 = "          SPEED) -                                     "
Z.55 = "   DATA -                                              "
Z.56 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY5.DATA) - "
Z.57 = "          RECORDSIZE(2000,20472) -                     "
Z.58 = "          FREESPACE(0 0) -                             "
Z.59 = "          CISZ(20480) -                                "
Z.60 = "          CYL(10 5) -                                  "
Z.61 = "          KEYS(10,4) ) -                               "
Z.62 = "   INDEX -                                             "
Z.63 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY5.INDEX) - "
Z.64 = "          CYL(10 5) -                                  "
Z.65 = "          CISZ(512) )                                  "
Z.66 = "                                                       "
Z.67 = "   DELETE (E7440TT0."||DBNAME||".DBPBFLG5) -           "
Z.68 = "          CLUSTER                                      "
Z.69 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Z.70 = "   DEFINE CLUSTER -                                    "
Z.71 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG5) -      "
Z.72 = "          UNIQUE -                                     "
Z.73 = "          SHAREOPTIONS(2 3) -                          "
Z.74 = "          MGMTCLAS(D32) -                              "
Z.75 = "          VOLUMES(* * * *) -                           "
Z.76 = "          SPEED) -                                     "
Z.77 = "   DATA -                                              "
Z.78 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG5.DATA) - "
Z.79 = "          RECORDSIZE(20472 20472) -                    "
Z.80 = "          FREESPACE(0 0) -                             "
Z.81 = "          CISZ(20480) -                                "
Z.82 = "          CYL(10 5) -                                  "
Z.83 = "          KEYS(5 0) ) -                                "
Z.84 = "   INDEX -                                             "
Z.85 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG5.INDEX) - "
Z.86 = "          CYL(10 5) -                                  "
Z.87 = "          CISZ(512) )                                  "
Z.88 = "                                                       "
Z.89 = "   DELETE E7440TT0."||DBNAME||".CKPTCTL5 -             "
Z.90 = "          CLUSTER                                      "
Z.91 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Z.92 = "   DEFINE CLUSTER -                                    "
Z.93 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL5) -      "
Z.94 = "          UNIQUE -                                     "
Z.95 = "          SHAREOPTIONS(2 3) -                          "
Z.96 = "          MGMTCLAS(D32M) -                             "
Z.97 = "          VOLUMES(* * * * *) -                         "
Z.98 = "          SPEED) -                                     "
Z.99 = "   DATA -                                              "
Z.100 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL5.DATA) - "
Z.101 = "          RECORDSIZE(1500 20472) -                     "
Z.102 = "          FREESPACE(0 0) -                             "
Z.103 = "          CISZ(20480) -                                "
Z.104 = "          CYL(10 5) -                                  "
Z.105 = "          KEYS(9 0) ) -                                "
Z.106 = "   INDEX -                                             "
Z.107 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL5.INDEX) - "
Z.108 = "          CYL(10 5) -                                  "
Z.109 = "          CISZ(512) )                                  "
Z.110 = "                                                       "
Z.111 = "   DELETE (E7440TT0."||DBNAME||".GRPEXPL5) -           "
Z.112 = "          CLUSTER                                      "
Z.113 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Z.114 = "   DEFINE CLUSTER -                                    "
Z.115 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL5) -      "
Z.116 = "          UNIQUE -                                     "
Z.117 = "          SHAREOPTIONS(2 3) -                          "
Z.118 = "          MGMTCLAS(D32M) -                             "
Z.119 = "          VOLUMES(* * * * *) -                         "
Z.120 = "          SPEED) -                                     "
Z.121 = "   DATA -                                              "
Z.122 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL5.DATA) - "
Z.123 = "          RECORDSIZE(2000,20472) -                     "
Z.124 = "          FREESPACE(0 0) -                             "
Z.125 = "          CISZ(20480) -                                "
Z.126 = "          CYL(10 5) -                                  "
Z.127 = "          KEYS(10,4) ) -                               "
Z.128 = "   INDEX -                                             "
Z.129 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL5.INDEX) - "
Z.130 = "          CYL(10 5) -                                  "
Z.131 = "          CISZ(512) )                                  "
Z.132 = "                                                       "
Z.133 = "   DELETE (E7440TT0."||DBNAME||".PCKTFLE5) -           "
Z.134 = "          CLUSTER                                      "
Z.135 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Z.136 = "   DEFINE CLUSTER -                                    "
Z.137 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE5) -      "
Z.138 = "          UNIQUE -                                     "
Z.139 = "          SHAREOPTIONS(2 3) -                          "
Z.140 = "          MGMTCLAS(D32M) -                             "
Z.141 = "          VOLUMES(* * * * *) -                         "
Z.142 = "          SPEED) -                                     "
Z.143 = "   DATA -                                              "
Z.144 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE5.DATA) - "
Z.145 = "          RECORDSIZE(2102 20480) -                     "
Z.146 = "          FREESPACE(10 10) -                           "
Z.147 = "          CISZ(20480) -                                "
Z.148 = "          CYL(10 5) -                                  "
Z.149 = "          KEYS(71 0) ) -                               "
Z.150 = "   INDEX -                                             "
Z.151 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE5.INDEX) - "
Z.152 = "          CYL(10 5) -                                  "
Z.153 = "          CISZ(512) )                                  "
Z.154 = "                                                       "
/*WRITING STEM DATA FILE*/
"EXECIO 154 DISKW OUTPUT5 (FINIS STEM Z."
"FREE FI(OUTPUT5)" ;
/*****************************************************************/
RETURN;
/*****************************************************************/
BATTRX_FILE:
/*YOUR BATTRX OLD AND NEW FILE NAME*/
MASTER_BATTRX="'E7440TS.SSSSS.BATTRX.N444444'"
NEW_BATTRX ="'E7440TS."||URN||".BATTRX.N123456'"
/**BATTRX FILE CREATION*/
ADDRESS TSO "DEL "NEW_BATTRX""
"ALLOC FI(OUTDD) DA("NEW_BATTRX") SHR REUSE",
"NEW SPACE (100,200) DSORG(PS) RECFM(F B) LRECL(20476) BLKSIZE(20476)"
"FREE FI(OUTDD)"
ADDRESS TSO
"ALLOC F(INFILE) DSN("MASTER_BATTRX") SHR REUSE"
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
I=1
DO WHILE I <= MYFILE.0
MF.I = SUBSTR(MYFILE.I,01,25)||CDATE||,
     SUBSTR(MYFILE.I,32,08)||CDATE||SUBSTR(MYFILE.I,46,19885)||,
     CDATE||SUBSTR(MYFILE.I,19937,540)
"ALLOC DA("NEW_BATTRX") FI(OUTPUT) SHR REUSE"
  /*PUTTING DATA TO STEAM*/
  MYSTEM.I = MF.I
  /*WRITING STEM DATA FILE*/
  "EXECIO * DISKW OUTPUT (FINIS STEM MYSTEM."
  "FREE FI(OUTPUT)"
   I = I + 1
END
NEW_BATTRX1="E7440TS."||URN||".BATTRX.N123456"
RETURN ;
/******************************/
DELALL:
DF1 = "'"||PDS||"(AFAP)'"
DF2 = "'"||PDS||"(BXXP)'"
DF3 = "'"||PDS||"(CGAP)'"
DF4 = "'"||PDS||"(DHKP)'"
DF5 = "'"||PDS||"(TEMPF)'"
DF6 = "'"||PDS||"(TEMPL)'"
DF7 = "'"||PDS||"(TFAP)'"
DF8 = "'"||PDS||"(TXXP)'"
DF9 = "'"||PDS||"(TGAP)'"
DF10= "'"||PDS||"(THKP)'"
DF11= "'"||PDS||"(RFAP)'"
DF12= "'"||PDS||"(RXXP)'"
DF13= "'"||PDS||"(RGAP)'"
DF14= "'"||PDS||"(RHKP)'"
CF1 = SYSDSN(DF1) /='OK'
CF2 = SYSDSN(DF2) /='OK'
CF3 = SYSDSN(DF3) /='OK'
CF4 = SYSDSN(DF4) /='OK'
CF5 = SYSDSN(DF5) /='OK'
CF6 = SYSDSN(DF6) /='OK'
CF7 = SYSDSN(DF7) /='OK'
CF8 = SYSDSN(DF8) /='OK'
CF9 = SYSDSN(DF9) /='OK'
CF10 = SYSDSN(DF10) /='OK'
CF11 = SYSDSN(DF11) /='OK'
CF12 = SYSDSN(DF12) /='OK'
CF13 = SYSDSN(DF13) /='OK'
CF14 = SYSDSN(DF14) /='OK'
SAY "TEMP FILES ARE DELETING........"
IF CF1  =0 THEN;DO;ADDRESS TSO "DEL "||DF1||"";END ;
IF CF2  =0 THEN;DO;ADDRESS TSO "DEL "||DF2||"";END ;
IF CF3  =0 THEN;DO;ADDRESS TSO "DEL "||DF3||"";END ;
IF CF4  =0 THEN;DO;ADDRESS TSO "DEL "||DF4||"";END ;
IF CF5  =0 THEN;DO;ADDRESS TSO "DEL "||DF5||"";END ;
IF CF6  =0 THEN;DO;ADDRESS TSO "DEL "||DF6||"";END ;
IF CF7  =0 THEN;DO;ADDRESS TSO "DEL "||DF7||"";END ;
IF CF8  =0 THEN;DO;ADDRESS TSO "DEL "||DF8||"";END ;
IF CF9  =0 THEN;DO;ADDRESS TSO "DEL "||DF9||"";END ;
IF CF10 =0 THEN;DO;ADDRESS TSO "DEL "||DF10||"";END;
IF CF11 =0 THEN;DO;ADDRESS TSO "DEL "||DF11||"";END;
IF CF12 =0 THEN;DO;ADDRESS TSO "DEL "||DF12||"";END;
IF CF13 =0 THEN;DO;ADDRESS TSO "DEL "||DF13||"";END;
IF CF14 =0 THEN;DO;ADDRESS TSO "DEL "||DF14||"";END;
SAY "TEMP FILES ARE DELETED!!!!!!!!!"
RETURN ;
/*********************************************************************/
CONTROL_FILES:
VSAM_FILE="'E7440TT0."||DBNAME||".CONTROL'"
SEQ_FILE ="'E7440TS."||URN||".CONTROL'"
VSAM_C1="'E7440TT0."||DBNAME||".CONTROL1'"
VSAM_C2="'E7440TT0."||DBNAME||".CONTROL2'"
VSAM_C3="'E7440TT0."||DBNAME||".CONTROL3'"
VSAM_C4="'E7440TT0."||DBNAME||".CONTROL4'"
VSAM_C5="'E7440TT0."||DBNAME||".CONTROL5'"
ADDRESS TSO "DEL "SEQ_FILE""
ADDRESS TSO
"ALLOC FI(INDD) DA("VSAM_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("SEQ_FILE") SHR REUSE",
"NEW SPACE (100,200) DSORG(PS) RECFM(V B) LRECL(4092) BLKSIZE(8184)"
"REPRO INFILE(INDD) OUTFILE(OUTDD) COUNT(1)"
"FREE FI(INDD)"
"FREE FI(OUTDD)"
/****************/
ADDRESS TSO
"ALLOC FI(INDD) DA("SEQ_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("VSAM_C1") SHR REUSE"
"REPRO INFILE(INDD) OUTFILE(OUTDD) REPLACE"
"FREE FI(INDD)"
"FREE FI(OUTDD)"
/****************/
ADDRESS TSO
"ALLOC FI(INDD) DA("SEQ_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("VSAM_C2") SHR REUSE"
"REPRO INFILE(INDD) OUTFILE(OUTDD) REPLACE"
"FREE FI(INDD)"
"FREE FI(OUTDD)"
/****************/
ADDRESS TSO
"ALLOC FI(INDD) DA("SEQ_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("VSAM_C3") SHR REUSE"
"REPRO INFILE(INDD) OUTFILE(OUTDD) REPLACE"
"FREE FI(INDD)"
"FREE FI(OUTDD)"
/****************/
ADDRESS TSO
"ALLOC FI(INDD) DA("SEQ_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("VSAM_C4") SHR REUSE"
"REPRO INFILE(INDD) OUTFILE(OUTDD) REPLACE"
"FREE FI(INDD)"
"FREE FI(OUTDD)"
/****************/
ADDRESS TSO
"ALLOC FI(INDD) DA("SEQ_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("VSAM_C5") SHR REUSE"
"REPRO INFILE(INDD) OUTFILE(OUTDD) REPLACE"
"FREE FI(INDD)"
"FREE FI(OUTDD)"
/****************/
RETURN ;
/*********************************************************************/
JCL2REXX:
TEMPF="'"||PDS||"(TEMPF)'"
TEMPL="'"||PDS||"(TEMPL)'"
JCL1="'"||PDS||"(AFAP)'"
TEMPA="'"||PDS||"(TFAP)'"
REXXA="'"||PDS||"(RFAP)'"
JCL2="'"||PDS||"(BXXP)'"
TEMPB="'"||PDS||"(TXXP)'"
REXXB="'"||PDS||"(RXXP)'"
JCL3="'"||PDS||"(CGAP)'"
TEMPC="'"||PDS||"(TGAP)'"
REXXC="'"||PDS||"(RGAP)'"
JCL4="'"||PDS||"(DHKP)'"
TEMPD="'"||PDS||"(THKP)'"
REXXD="'"||PDS||"(RHKP)'"
/**************************************************************/
/**TEMP FIRST AND LAST**/
ADDRESS TSO "ALLOC DA("TEMPF") FI(OUTPUT) SHR REUSE"
  MYSTEM.1 = "/*REXX*/"
"EXECIO 1 DISKW OUTPUT (FINIS STEM MYSTEM."
"FREE FI(OUTPUT)"
ADDRESS TSO "ALLOC DA("TEMPL") FI(OUTPUT) SHR REUSE"
  MYSTEM.1 = "QUEUE '$$'"
  MYSTEM.2 = "ADDRESS TSO 'SUB * END($$)'"
"EXECIO 2 DISKW OUTPUT (FINIS STEM MYSTEM."
"FREE FI(OUTPUT)"
/**************************************************************/
ADDRESS TSO "ALLOC F(INFILE) DSN("JCL1") SHR REUSE"
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
I=1
DO WHILE I<=MYFILE.0
MF.I="QUEUE "||'"'||SUBSTR(MYFILE.I,1,72)||'"' ;
ADDRESS TSO "ALLOC DA("TEMPA") FI(OUTPUT) SHR REUSE"
  MYSTEM.I = MF.I
  "EXECIO * DISKW OUTPUT (FINIS STEM MYSTEM."
  "FREE FI(OUTPUT)"
   I = I + 1
END
ADDRESS TSO
"ALLOC F(INFILE) DSN("TEMPF","TEMPA","TEMPL") SHR REUSE "
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
"ALLOC DA("REXXA") FI(OUTPUT) SHR REUSE"
  "EXECIO * DISKW OUTPUT (FINIS STEM MYFILE."
  "FREE FI(OUTPUT)"
/**************************************************************/
ADDRESS TSO "ALLOC F(INFILE) DSN("JCL2") SHR REUSE"
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
I=1
DO WHILE I<=MYFILE.0
MF.I="QUEUE "||'"'||SUBSTR(MYFILE.I,1,72)||'"' ;
ADDRESS TSO "ALLOC DA("TEMPB") FI(OUTPUT) SHR REUSE"
  MYSTEM.I = MF.I
  "EXECIO * DISKW OUTPUT (FINIS STEM MYSTEM."
  "FREE FI(OUTPUT)"
   I = I + 1
END
ADDRESS TSO
"ALLOC F(INFILE) DSN("TEMPF","TEMPB","TEMPL") SHR REUSE "
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
"ALLOC DA("REXXB") FI(OUTPUT) SHR REUSE"
  "EXECIO * DISKW OUTPUT (FINIS STEM MYFILE."
  "FREE FI(OUTPUT)"
/**************************************************************/
ADDRESS TSO "ALLOC F(INFILE) DSN("JCL3") SHR REUSE"
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
I=1
DO WHILE I<=MYFILE.0
MF.I="QUEUE "||'"'||SUBSTR(MYFILE.I,1,72)||'"' ;
ADDRESS TSO "ALLOC DA("TEMPC") FI(OUTPUT) SHR REUSE"
  MYSTEM.I = MF.I
  "EXECIO * DISKW OUTPUT (FINIS STEM MYSTEM."
  "FREE FI(OUTPUT)"
   I = I + 1
END
ADDRESS TSO
"ALLOC F(INFILE) DSN("TEMPF","TEMPC","TEMPL") SHR REUSE "
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
"ALLOC DA("REXXC") FI(OUTPUT) SHR REUSE"
  "EXECIO * DISKW OUTPUT (FINIS STEM MYFILE."
  "FREE FI(OUTPUT)"
/**************************************************************/
ADDRESS TSO "ALLOC F(INFILE) DSN("JCL4") SHR REUSE"
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
I=1
DO WHILE I<=MYFILE.0
MF.I="QUEUE "||'"'||SUBSTR(MYFILE.I,1,72)||'"' ;
ADDRESS TSO "ALLOC DA("TEMPD") FI(OUTPUT) SHR REUSE"
  MYSTEM.I = MF.I
  "EXECIO 95 DISKW OUTPUT (FINIS STEM MYSTEM."
  "FREE FI(OUTPUT)"
   I = I + 1
END
ADDRESS TSO
"ALLOC F(INFILE) DSN("TEMPF","TEMPD","TEMPL") SHR REUSE "
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
"ALLOC DA("REXXD") FI(OUTPUT) SHR REUSE"
  "EXECIO 98 DISKW OUTPUT (FINIS STEM MYFILE."
  "FREE FI(OUTPUT)"
RETURN ;
/*********************************************************************/
/**REXX**/
/** YOUR FILE PDS NAME **/
IN1 = E7470TS.BSK.MINIDB.VTGI.REXX
/*USERID*/
STR=USERID()
STR1=SUBSTR(STR,1,5)
/*WELCOME MSG*/
SAY "***************************************************************"
SAY "***********WELCOME TO VTGI MINIDB CREATION*********************"
SAY "***************YOUR TSO-ID:!!" STR "!!***********************"
SAY "***************************************************************"
/*WAITING MSG*/
W1= "***************************************************************"
WMS1=W1;WMS5=W1
WMS2="****ENTER Y FOR CONTINUE THE VTG1 MINIDB CREATION PROCESS*****"
WMS3="*************************OR**********************************"
WMS4="***ENTER N FOR TERMINATION THE VTG1 MINIDB CREATION PROCESS***"

JOBNAME=STR1
/*FILE_NAME*/
SAY "YOU SHOULD ENTER NEW MIDDLE QUALIFER NOT MORETHAN 5 CHAR"
SAY "ENTER NEW MIDDLE QUALIFER ::-->"
PULL FILE_NAME
IM65N =FILE_NAME
SAY "YOU SHOULD ENTER LAST CYCLE DATE IN FORMAT OF NUMERIC AND YYMMDD"
SAY "ENTER THE LAST CYCLE DATE IN FORMAT YYMMDD ::-->"
PULL LASTDATE
IF ((IM65N \= " ")&,
    (LASTDATE \= " ")&,
    (LENGTH(IM65N)== 5)&,
    (LENGTH(LASTDATE)== 6)&,
    (DATATYPE(LASTDATE) == "NUM"),
   ) THEN
DO
/*GETTING THE TYPE OF MINIDB */
    SAY "WHAT TYPE OF MINIDB BLANK=B OR SPECFIC=S"
    PULL X
        IF (X="B") THEN DO
             Y="XMINIDB4"
             TEST = "BLANK MINIDB"
           /*ALLOCATING FILE*/
         "ALLOC DA('"||IN1||"("||Y||")') FI(OUTPUT) SHR REUSE"
           /*PUTTING DATA TO STEAM*/
           MYSTEM.1 = 'COPY'
           MYSTEM.2 = 'COMPANY     018'
           MYSTEM.3 = 'COMPANY     021'
           MYSTEM.4 = 'COMPANY     022'
           MYSTEM.5 = 'CLIENT      018UM0000000000000'
           MYSTEM.6 = 'CLIENT      021UM0000000000000'
           MYSTEM.7 = 'CLIENT      022UM0000000000000'
           /*WRITING STEM DATA FILE*/
           "EXECIO * DISKW OUTPUT (FINIS STEM MYSTEM."
           "FREE FI(OUTPUT)"
        END
        ELSE IF (X="S") THEN DO
             Y="XMINIDB2"
           /* GETTING A VALUES FROM USER POLICY AND COMPANY */
           SAY "ENTER THE POLICY NUMBER "
           PULL P
/**********************************************************************/
POLICY = P
ADDRESS TSO
"ALLOC F(INFILE) DSN('E7470TS.BSK.SCHED') SHR REUSE"
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
I=1
DO WHILE I <= MYFILE.0
   POLNUM = SUBSTR(MYFILE.I,8,11)
   COMID = SUBSTR(MYFILE.I,1,3)
    IF (POLICY = POLNUM) THEN
    DO
       SAY "COMPANY " COMID
       C=COMID
    END
   I = I + 1
END
/**********************************************************************/
           IF ( ((C = 021) | (C = 018) | (C = 022))&,
                (P \= " ") & (C\= " ") ) THEN
           DO
           TEST = "POLICY      "||C||"    "||P||""
           END
           ELSE DO
           SAY "INVALID COMPANY CODE OR SOME DATA EMPTY"
           EXIT
           END
           /*ALLOCATING FILE*/
         "ALLOC DA('"||IN1||"("||Y||")') FI(OUTPUT) SHR REUSE"
           /*PUTTING DATA TO STEAM*/
           MYSTEM.1 = 'COPY'
           MYSTEM.2 = 'COMPANY     018'
           MYSTEM.3 = 'COMPANY     021'
           MYSTEM.4 = 'COMPANY     022'
           MYSTEM.5 = 'CLIENT      018UM0000000000000'
           MYSTEM.6 = 'CLIENT      021UM0000000000000'
           MYSTEM.7 = 'CLIENT      022UM0000000000000'
           MYSTEM.8 = TEST
           /*WRITING STEM DATA FILE*/
           "EXECIO * DISKW OUTPUT (FINIS STEM MYSTEM."
           "FREE FI(OUTPUT)"
        END
        ELSE
        DO
        SAY "YOUR CHOICE IS WRONG"
        END
/* CHECKING PRESENT DATASET ALREADY */
F1 = SYSDSN("'E7440TT0."||IM65N||".ALFAKEY1'") /='OK'
F2 = SYSDSN("'E7440TT0."||IM65N||".ARCHNDX1'") /='OK'
F3 = SYSDSN("'E7440TT0."||IM65N||".CASHFLW1'") /='OK'
F4 = SYSDSN("'E7440TT0."||IM65N||".CLPROD1'") /='OK'
F5 = SYSDSN("'E7440TT0."||IM65N||".NEXTNUM1'") /='OK'
F6 = SYSDSN("'E7440TT0."||IM65N||".COSUSPN1'") /='OK'
F7 = SYSDSN("'E7440TT0."||IM65N||".DIRECT1'") /='OK'
F8 = SYSDSN("'E7440TT0."||IM65N||".MONYFND1'") /='OK'
F9 = SYSDSN("'E7440TT0."||IM65N||".SCHED1'") /='OK'
F10 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE1'") /='OK'
F11 = SYSDSN("'E7440TT0."||IM65N||".TRXHIS1'") /='OK'
F12 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT1'") /='OK'
F13 = SYSDSN("'E7440TT0."||IM65N||".GROUP1'") /='OK'
F14 = SYSDSN("'E7440TT0."||IM65N||".ADMERR1'") /='OK'
F15 = SYSDSN("'E7440TT0."||IM65N||".CAIX1'") /='OK'
F16 = SYSDSN("'E7440TT0."||IM65N||".DBPBFLG1'") /='OK'
F17 = SYSDSN("'E7440TT0."||IM65N||".VCANTAX1'") /='OK'
F18 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER1'") /='OK'
F19 = SYSDSN("'E7440TT0."||IM65N||".UVHIST1'") /='OK'
F20 = SYSDSN("'E7440TT0."||IM65N||".CONTROL1'") /='OK'
F21 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE1'") /='OK'
F22 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE1.TICKET'") /='OK'
F23 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE1.NAME'") /='OK'
F24 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE1.ORIG'") /='OK'
F25 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT1'") /='OK'
F26 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT1.CLTEVTX'") /='OK'
F27 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER1.AGTHIERX'") /='OK'
F28 = SYSDSN("'E7440TT0."||IM65N||".ALFAKEY2'") /='OK'
F29 = SYSDSN("'E7440TT0."||IM65N||".ARCHNDX2'") /='OK'
F30 = SYSDSN("'E7440TT0."||IM65N||".CASHFLW2'") /='OK'
F31 = SYSDSN("'E7440TT0."||IM65N||".CLPROD2'") /='OK'
F32 = SYSDSN("'E7440TT0."||IM65N||".NEXTNUM2'") /='OK'
F33 = SYSDSN("'E7440TT0."||IM65N||".COSUSPN2'") /='OK'
F34 = SYSDSN("'E7440TT0."||IM65N||".DIRECT2'") /='OK'
F35 = SYSDSN("'E7440TT0."||IM65N||".MONYFND2'") /='OK'
F36 = SYSDSN("'E7440TT0."||IM65N||".SCHED2'") /='OK'
F37 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE2'") /='OK'
F38 = SYSDSN("'E7440TT0."||IM65N||".TRXHIS2'") /='OK'
F39 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT2'") /='OK'
F40 = SYSDSN("'E7440TT0."||IM65N||".GROUP2'") /='OK'
F41 = SYSDSN("'E7440TT0."||IM65N||".ADMERR2'") /='OK'
F42 = SYSDSN("'E7440TT0."||IM65N||".CAIX2'") /='OK'
F43 = SYSDSN("'E7440TT0."||IM65N||".DBPBFLG2'") /='OK'
F44 = SYSDSN("'E7440TT0."||IM65N||".VCANTAX2'") /='OK'
F45 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER2'") /='OK'
F46 = SYSDSN("'E7440TT0."||IM65N||".UVHIST2'") /='OK'
F47 = SYSDSN("'E7440TT0."||IM65N||".CONTROL2'") /='OK'
F48 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE2'") /='OK'
F49 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE2.TICKET'") /='OK'
F50 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE2.NAME'") /='OK'
F51 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE2.ORIG'") /='OK'
F52 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT2'") /='OK'
F53 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT2.CLTEVTX'") /='OK'
F54 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER2.AGTHIERX'") /='OK'
F55 = SYSDSN("'E7440TT0."||IM65N||".ALFAKEY3'") /='OK'
F56 = SYSDSN("'E7440TT0."||IM65N||".ARCHNDX3'") /='OK'
F57 = SYSDSN("'E7440TT0."||IM65N||".CASHFLW3'") /='OK'
F58 = SYSDSN("'E7440TT0."||IM65N||".CLPROD3'") /='OK'
F59 = SYSDSN("'E7440TT0."||IM65N||".NEXTNUM3'") /='OK'
F60 = SYSDSN("'E7440TT0."||IM65N||".COSUSPN3'") /='OK'
F61 = SYSDSN("'E7440TT0."||IM65N||".DIRECT3'") /='OK'
F62 = SYSDSN("'E7440TT0."||IM65N||".MONYFND3'") /='OK'
F63 = SYSDSN("'E7440TT0."||IM65N||".SCHED3'") /='OK'
F64 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE3'") /='OK'
F65 = SYSDSN("'E7440TT0."||IM65N||".TRXHIS3'") /='OK'
F66 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT3'") /='OK'
F67 = SYSDSN("'E7440TT0."||IM65N||".GROUP3'") /='OK'
F68 = SYSDSN("'E7440TT0."||IM65N||".ADMERR3'") /='OK'
F69 = SYSDSN("'E7440TT0."||IM65N||".CAIX3'") /='OK'
F70 = SYSDSN("'E7440TT0."||IM65N||".DBPBFLG3'") /='OK'
F71 = SYSDSN("'E7440TT0."||IM65N||".VCANTAX3'") /='OK'
F72 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER3'") /='OK'
F73 = SYSDSN("'E7440TT0."||IM65N||".UVHIST3'") /='OK'
F74 = SYSDSN("'E7440TT0."||IM65N||".CONTROL3'") /='OK'
F75 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE3'") /='OK'
F76 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE3.TICKET'") /='OK'
F77 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE3.NAME'") /='OK'
F78 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE3.ORIG'") /='OK'
F79 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT3'") /='OK'
F80 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT3.CLTEVTX'") /='OK'
F81 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER3.AGTHIERX'") /='OK'
F82 = SYSDSN("'E7440TT0."||IM65N||".ALFAKEY4'") /='OK'
F83 = SYSDSN("'E7440TT0."||IM65N||".ARCHNDX4'") /='OK'
F84 = SYSDSN("'E7440TT0."||IM65N||".CASHFLW4'") /='OK'
F85 = SYSDSN("'E7440TT0."||IM65N||".CLPROD4'") /='OK'
F86 = SYSDSN("'E7440TT0."||IM65N||".NEXTNUM4'") /='OK'
F87 = SYSDSN("'E7440TT0."||IM65N||".COSUSPN4'") /='OK'
F88 = SYSDSN("'E7440TT0."||IM65N||".DIRECT4'") /='OK'
F89 = SYSDSN("'E7440TT0."||IM65N||".MONYFND4'") /='OK'
F90 = SYSDSN("'E7440TT0."||IM65N||".SCHED4'") /='OK'
F91 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE4'") /='OK'
F92 = SYSDSN("'E7440TT0."||IM65N||".TRXHIS4'") /='OK'
F93 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT4'") /='OK'
F94 = SYSDSN("'E7440TT0."||IM65N||".GROUP4'") /='OK'
F95 = SYSDSN("'E7440TT0."||IM65N||".ADMERR4'") /='OK'
F96 = SYSDSN("'E7440TT0."||IM65N||".CAIX4'") /='OK'
F97 = SYSDSN("'E7440TT0."||IM65N||".DBPBFLG4'") /='OK'
F98 = SYSDSN("'E7440TT0."||IM65N||".VCANTAX4'") /='OK'
F99 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER4'") /='OK'
F100 = SYSDSN("'E7440TT0."||IM65N||".UVHIST4'") /='OK'
F101 = SYSDSN("'E7440TT0."||IM65N||".CONTROL4'") /='OK'
F102 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE4'") /='OK'
F103 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE4.TICKET'") /='OK'
F104 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE4.NAME'") /='OK'
F105 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE4.ORIG'") /='OK'
F106 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT4'") /='OK'
F107 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT4.CLTEVTX'") /='OK'
F108 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER4.AGTHIERX'") /='OK'
F109 = SYSDSN("'E7440TT0."||IM65N||".ALFAKEY5'") /='OK'
F110 = SYSDSN("'E7440TT0."||IM65N||".ARCHNDX5'") /='OK'
F111 = SYSDSN("'E7440TT0."||IM65N||".CASHFLW5'") /='OK'
F112 = SYSDSN("'E7440TT0."||IM65N||".CLPROD5'") /='OK'
F113 = SYSDSN("'E7440TT0."||IM65N||".NEXTNUM5'") /='OK'
F114 = SYSDSN("'E7440TT0."||IM65N||".COSUSPN5'") /='OK'
F115 = SYSDSN("'E7440TT0."||IM65N||".DIRECT5'") /='OK'
F116 = SYSDSN("'E7440TT0."||IM65N||".MONYFND5'") /='OK'
F117 = SYSDSN("'E7440TT0."||IM65N||".SCHED5'") /='OK'
F118 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE5'") /='OK'
F119 = SYSDSN("'E7440TT0."||IM65N||".TRXHIS5'") /='OK'
F120 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT5'") /='OK'
F121 = SYSDSN("'E7440TT0."||IM65N||".GROUP5'") /='OK'
F122 = SYSDSN("'E7440TT0."||IM65N||".ADMERR5'") /='OK'
F123 = SYSDSN("'E7440TT0."||IM65N||".CAIX5'") /='OK'
F124 = SYSDSN("'E7440TT0."||IM65N||".DBPBFLG5'") /='OK'
F125 = SYSDSN("'E7440TT0."||IM65N||".VCANTAX5'") /='OK'
F126 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER5'") /='OK'
F127 = SYSDSN("'E7440TT0."||IM65N||".UVHIST5'") /='OK'
F128 = SYSDSN("'E7440TT0."||IM65N||".CONTROL5'") /='OK'
F129 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE5'") /='OK'
F130 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE5.TICKET'") /='OK'
F131 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE5.NAME'") /='OK'
F132 = SYSDSN("'E7440TT0."||IM65N||".SUSPNSE5.ORIG'") /='OK'
F133 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT5'") /='OK'
F134 = SYSDSN("'E7440TT0."||IM65N||".CLTEVT5.CLTEVTX'") /='OK'
F135 = SYSDSN("'E7440TT0."||IM65N||".AGTHIER5.AGTHIERX'") /='OK'
/*SAY F1  F16  F31  F46  F61  F76  F91  F106  F121
SAY F2  F17  F32  F47  F62  F77  F92  F107  F122
SAY F3  F18  F33  F48  F63  F78  F93  F108  F123
SAY F4  F19  F34  F49  F64  F79  F94  F109  F124
SAY F5  F20  F35  F50  F65  F80  F95  F110  F125
SAY F6  F21  F36  F51  F66  F81  F96  F111  F126
SAY F7  F22  F37  F52  F67  F82  F97  F112  F127
SAY F8  F23  F38  F53  F68  F83  F98  F113  F128
SAY F9  F24  F39  F54  F69  F84  F99  F114  F129
SAY F10  F25  F40  F55  F70  F85  F100  F115  F130
SAY F11  F26  F41  F56  F71  F86  F101  F116  F131
SAY F12  F27  F42  F57  F72  F87  F102  F117  F132
SAY F13  F28  F43  F58  F73  F88  F103  F118  F133
SAY F14  F29  F44  F59  F74  F89  F104  F119  F134
SAY F15  F30  F45  F60  F75  F90  F105  F120  F135*/
IF (F1&F16&F31&F46&F61&F76&F91&F106&F121&,
    F2&F17&F32&F47&F62&F77&F92&F107&F122&,
    F3&F18&F33&F48&F63&F78&F93&F108&F123&,
    F4&F19&F34&F49&F64&F79&F94&F109&F124&,
    F5&F20&F35&F50&F65&F80&F95&F110&F125&,
    F6&F21&F36&F51&F66&F81&F96&F111&F126&,
    F7&F22&F37&F52&F67&F82&F97&F112&F127&,
    F8&F23&F38&F53&F68&F83&F98&F113&F128&,
    F9&F24&F39&F54&F69&F84&F99&F114&F129&,
    F10&F25&F40&F55&F70&F85&F100&F115&F130&,
    F11&F26&F41&F56&F71&F86&F101&F116&F131&,
    F12&F27&F42&F57&F72&F87&F102&F117&F132&,
    F13&F28&F43&F58&F73&F88&F103&F118&F133&,
    F14&F29&F44&F59&F74&F89&F104&F119&F134&,
    F15&F30&F45&F60&F75&F90&F105&F120&F135)==1 THEN
   DO
   SAY "DATASET DOESN'T EXIST:-->" IM65N
SAY "***************************************************************"
SAY "YOUR VTG1 MINIDB IS CREATING WITH THE DATABASE NAME *!" IM65N "!*"
SAY "WITH THE CYCLE DATE *!"LASTDATE"!* AND *!" TEST "!*"
SAY "***************************************************************"
/*********************BUILD JOB*************************************/
DO I = 1 TO 5 BY 1
QUEUE "//"JOBNAME"B"I"T JOB TIME=(,9),MSGCLASS=A,NOTIFY=&SYSUID,"
QUEUE "//           LINES=999999,PRTY=15,CLASS=T"
QUEUE "//*C ALL IM65N XXXXX"
QUEUE "/*JOBPARM S=A090"
QUEUE "//PROCLIB  JCLLIB ORDER=(E7440TS.LIB.MINI.PROCLIB)"
QUEUE "//E747013P   EXEC E744113P,"
QUEUE "//         LIB01='E7440PS.VAN30.LOADLIB',   ** LVCSCLUS"
QUEUE "//         LIB01A='E7440PS.VAN30.LOADLIB',  ** LVCSCLUS"
QUEUE "//         LIB02='E7440PS.VAN30.LOADLIB',   ** VCSABORT"
QUEUE "//         LIB02A='E7440PS.VAN30.LOADLIB',    ** VCSABORT"
QUEUE "//         PRODLIB='E7440PS.VAN30.LOADLIB',   ** SECOND LOADLIB"
QUEUE "//         JCLCLS='*',"
QUEUE "//         PARMLIB='E7440PS.VAN30.PARMLIB',"
QUEUE "//         PARMLIB2='E7440TS.LIB.MINI.PARMLIB',"
QUEUE "//         RUNLIB='E7440TS.LIB.MINI.PARMLIB',"
QUEUE "//         VFLIDI='E7440PS0',             ** VSAM QUAL INPUT"
QUEUE "//         VFLIDO='E7440TT0',             ** VSAM QUAL OUTPUT"
QUEUE "//         VAN30I='VAN30',             ** INPUT 2ND QUALIFIER"
QUEUE "//         VAN30O="||IM65N||",        ** OUTPUT 2ND QUALIFIER"
QUEUE "//         SECT="I","
QUEUE "//         FILEDEF=PMPFILES"
QUEUE "/* "
QUEUE "$$"
ADDRESS TSO "SUB * END($$)"
END
/*WAITING FUNCTION*/
DO UNTIL POS(ANS,'Y')\==0 & LENGTH(ANS)==1
SAY WMS1;SAY WMS2;SAY WMS3;SAY WMS4;SAY WMS5
PULL ANS
ANS=SPACE(ANS, 0)
IF (ANS=='N') THEN
DO
SAY "EXIT FROM THE VTG1 MINIDB CREATION PROCESS"
EXIT
END
END
/***********LOAD JOB*********************/
DO J = 1 TO 5 BY 1
QUEUE "//"JOBNAME"L"J"T JOB MSGCLASS=A,NOTIFY=&SYSUID,PRTY=15,CLASS=T,"
QUEUE "//          TIME=(0,40)"
QUEUE "/*JOBPARM S=A090"
QUEUE "//DBCPY    EXEC  E744114P,"
QUEUE "//         JCLCLS='*',"
QUEUE "//         LIB01='E7440TS.LIB.MINI.LOADLIB',"
QUEUE "//         LIB01A='E7440TS.LIB.MINI.LOADLIB',"
QUEUE "//         LIB02='E7440TS.LIB.MINI.LOADLIB',"
QUEUE "//         LIB02A='E7440TS.LIB.MINI.LOADLIB',"
QUEUE "//         LIB03='E7440PS.VAN30.LOADLIB',"
QUEUE "//         LIB03A='E7440PS.VAN30.LOADLIB', "
QUEUE "//         LIB04='E7440TS.LIB.MINI.LOADLIB', "
QUEUE "//         LIB04A='E7440TS.LIB.MINI.LOADLIB',"
QUEUE "//         LIB05='E7440TS.LIB.MINI.LOADLIB',"
QUEUE "//         LIB05A='E7440TS.LIB.MINI.LOADLIB',"
QUEUE "//         PRODLIB='E7440PS.VAN30.LOADLIB',"
QUEUE "//         PARMLIB='E7440PS.VAN30.PARMLIB',"
QUEUE "//         RUNLOG='*,FREE=CLOSE',   /* RUNLOG SYSOUT"
QUEUE "//         DUMPCLS='*',             /* DUMP SYSOUT"
QUEUE "//         DSKUNIT='DELW,VOL=SER=', /* DFLID UNIT"
QUEUE "//         WRKUNIT=SYSDA,           /* WORKFILE UNIT"
QUEUE "//         SECT="J", "
QUEUE "//         DFLID='E7440TS."||IM65N||".UTIL', "
QUEUE "//*           QSAM DSN'S"
QUEUE "//         VFLIDS='E7440PS0.VAN30', /* SOURCE DATABASE"
QUEUE "//         VFLIDT='E7440TT0."||IM65N||"' "
QUEUE "//*           TARGET DATABASE"
QUEUE "//DBCPY42.VSAMFLE DD DSN=E7440TS.LIB.MAM.PARMLIB(VVVXXUP),"
QUEUE "//            DISP=SHR"
QUEUE "//DBCPY33.VSAMFLE DD DSN=E7440PS.VAN30.PARMLIB(VSAMREAD), "
QUEUE "//            DISP=SHR"
QUEUE "//DBCPY23.VSAMFLE DD DSN=E7440PS.VAN30.PARMLIB(VSAMREAD),"
QUEUE "//            DISP=SHR"
QUEUE "//DBCPY13.VSAMFLE DD DSN=E7440TS.LIB.MAM.PARMLIB(VVVXXSE),"
QUEUE "//            DISP=SHR "
QUEUE "//DBCPY13.SYSOUT DD SYSOUT=O "
QUEUE "//DBCPY13.SYSUDUMP DD SYSOUT=O "
QUEUE "//DBCPY13.SYSABEND DD SYSOUT=O "
QUEUE "//DBCPY42.SYSOUT DD SYSOUT=O "
QUEUE "//DBCPY42.SYSUDUMP DD SYSOUT=O "
QUEUE "//DBCPY42.SYSABEND DD SYSOUT=O "
QUEUE "//DBCPY13.CARDIN DD DSN="||IN1||"("||Y||"), "
QUEUE "//             DISP=SHR "
QUEUE "/* "
QUEUE "$$"
ADDRESS TSO "SUB * END($$)"
END
/*WAITING FUNCTION*/
DO UNTIL POS(ANS,'Y')\==0 & LENGTH(ANS)==1
SAY WMS1;SAY WMS2;SAY WMS3;SAY WMS4;SAY WMS5
PULL ANS
ANS=SPACE(ANS, 0)
IF (ANS=='N') THEN
DO
SAY "EXIT FROM THE VTG1 MINIDB CREATION PROCESS"
EXIT
END
END
/***********REPAIR JOB*******************/
QUEUE "//"JOBNAME"H1A JOB ('BSK'),TIME=(1),MSGCLASS=A,"
QUEUE "//      CLASS=T,PRTY=15,NOTIFY=&SYSUID "
QUEUE "/*JOBPARM S=A090 "
QUEUE "//E7441HKP  EXEC E7441HKP,"
QUEUE "//          GT12=GT, "
QUEUE "//          GT13=GT, "
QUEUE "//          GT14=GT, "
QUEUE "//          GT34=GT, "
QUEUE "//          GT35=GT, "
QUEUE "//*         GT36=GT, "
QUEUE "//          DSN2=E7440TS, "
QUEUE "//          GL0066="LASTDATE", "
QUEUE "//          GL0069="LASTDATE", "
QUEUE "//          VDSN=E7440TT0, "
QUEUE "//          VAN30="||IM65N||", "
QUEUE "//          COND.STEP13C=(0,LE), "
QUEUE "//          COND.STEP13D=(0,LE), "
QUEUE "//          COND.STEP0=(0,LE), "
QUEUE "//          JCLCLS='*', "
QUEUE "//          DUMPCLS='*', "
QUEUE "//          RUNLOG='*' "
QUEUE "//STEP4.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,24,CH,A)"
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP5.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,24,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP6.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,24,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP7.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,24,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP8.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,132,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP9.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(9,49,CH,A)"
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP10.SYSIN    DD  DSN=SYSCMN.PROD.CCLIB(E7440KO0),DISP=SHR "
QUEUE "/* "
QUEUE "//STEP11.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(9,10,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP12.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,5,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP13.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,10,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP14.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,10,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP15.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,10,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP16.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,10,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP17.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,10,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP18.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,10,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP19.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,10,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP20.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,10,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "$$"
ADDRESS TSO "SUB * END($$)"
/*WAITING FUNCTION*/
DO UNTIL POS(ANS,'Y')\==0 & LENGTH(ANS)==1
SAY WMS1;SAY WMS2;SAY WMS3;SAY WMS4;SAY WMS5
PULL ANS
ANS=SPACE(ANS, 0)
IF (ANS=='N') THEN
DO
SAY "EXIT FROM THE VTG1 MINIDB CREATION PROCESS"
EXIT
END
END
/***********REPAIR JOB*******************/
QUEUE "//**************************************** "
QUEUE "//"JOBNAME"H1A JOB ('BSK'),TIME=(1),MSGCLASS=A, "
QUEUE "//      CLASS=T,PRTY=15,NOTIFY=&SYSUID, "
QUEUE "//      RESTART=E7441HKP.STEP14 "
QUEUE "/*JOBPARM S=A090 "
QUEUE "//************************************************** "
QUEUE "//*CHANGE ARE IM65N , LASTCYCLEDATE "
QUEUE "//*==> C ALL IM65N XXXXX "
QUEUE "//*==> C ALL 210831 YYMMDD "
QUEUE "//*REPAIR 1 JJ=103,SUB=JCL "
QUEUE "//*REMOVE THE COMMA "
QUEUE "//*REPAIR 2 JJ=10,29,SUB=S0000 "
QUEUE "//************************************************** "
QUEUE "//E7441HKP  EXEC E7441HKP,"
QUEUE "//          GT12=GT, "
QUEUE "//          GT13=GT, "
QUEUE "//          GT14=GT, "
QUEUE "//          GT34=GT, "
QUEUE "//          GT35=GT, "
QUEUE "//*         GT36=GT, "
QUEUE "//          DSN2=E7440TS, "
QUEUE "//          GL0066="LASTDATE", "
QUEUE "//          GL0069="LASTDATE", "
QUEUE "//          VDSN=E7440TT0, "
QUEUE "//          VAN30="||IM65N||", "
QUEUE "//          COND.STEP13C=(0,LE), "
QUEUE "//          COND.STEP13D=(0,LE), "
QUEUE "//          COND.STEP0=(0,LE), "
QUEUE "//          JCLCLS='*', "
QUEUE "//          DUMPCLS='*', "
QUEUE "//          RUNLOG='*' "
QUEUE "//STEP4.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,24,CH,A)"
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP5.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,24,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP6.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,24,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP7.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,24,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP8.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,132,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP9.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(9,49,CH,A)"
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP10.SYSIN    DD  DSN=SYSCMN.PROD.CCLIB(E7440KO0),DISP=SHR "
QUEUE "/* "
QUEUE "//STEP11.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(9,10,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP12.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,5,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP13.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,10,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP14.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,10,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP15.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,10,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP16.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,10,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP17.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,10,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP18.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,10,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP19.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,10,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "//STEP20.SYSIN    DD  * "
QUEUE "  MERGE FIELDS=(5,10,CH,A) "
QUEUE "  SUM FIELDS=NONE "
QUEUE "/* "
QUEUE "$$"
ADDRESS TSO "SUB * END($$)"
/**********************************************************************/
SAY "***************************************************************"
SAY "*******YOUR VTG1 MINIDB WAS CREATED SUCCESSFULLY***************"
SAY "YOUR VTG1 MINIDB WAS CREATED WITH THE DATABASE NAME *!" IM65N "!*"
SAY "WITH THE CYCLE DATE *!"LASTDATE"!* AND *!" TEST "!*"
SAY "***************************************************************"
END
/**********************************************************************/
/***CHECKING THE DATASET PRESENT SYSTEM*******ELSE PART****************/
ELSE
   DO
   SAY "DATESET IS ALREADY PRESENT IN SYSTEM:-->" IM65N
   EXIT
   END
/**********************************************************************/
EXIT
/**********************************************************************/
END
ELSE
DO
SAY "ANYONE OF THE DATA IS EMPTY OR INVAILD DATA "
EXIT
END
/**REXX**/
TPDS = "E7440TS."||USERID()||".VTGI.AUTO.TEMP.PDS"
C = SYSDSN("'"||TPDS||"'") /='OK' ; IF(C==1)THEN ; DO
ADDRESS TSO "ALLOC DA('"||TPDS||"') NEW REU RECFM(F B) LRECL(80)",
"DIR(255) SPACE(50,500) TRACKS UNIT(SYSDA) FI(INPDS)" ;
"FREE FI(INPDS)"
END
/**********************************************************************/
PARM = "E7440TS."||USERID()||".VTGI.PARMLIB.PDS"
P = SYSDSN("'"||PARM||"'") /='OK' ; IF(P==1)THEN ; DO
ADDRESS TSO "ALLOC DA('"||PARM||"') NEW REU RECFM(F B) LRECL(80)",
"DIR(255) SPACE(50,500) TRACKS UNIT(SYSDA) " ;  END
/**********************************************************************/
/**REXX**/
ADDRESS TSO
"ISPEXEC LMINIT DATAID(ID) DATASET('"||TPDS||"')ENQ(EXCLU)"
"ISPEXEC LMCOMP DATAID("ID")"
"ISPEXEC LMFREE DATAID("ID")"
"ISPEXEC LMINIT DATAID(ID1) DATASET('"||PARM||"')ENQ(EXCLU)"
"ISPEXEC LMCOMP DATAID("ID1")"
"ISPEXEC LMFREE DATAID("ID1")"
ADDRESS TSO
PDS1 = "'"||TPDS||"'"
PDS2 = "'"||PARM||"'"
"ALLOC DSN("PDS1","PDS2") FI(INPDS) SHR REUSE"
"FREE FI(INPDS)"
/**********************************************************************/
/*PANEL LIBARY PATH */
PAN = E7440TS.VTGI.PANEL.LIB
/*TEMPORARY FILE PATH */
PDS = TPDS
/*PARMLIB PATH */
PARMLIB = PARM
URN=USERID()
JOB=SUBSTR(URN,1,5)

/**********************************************************************/
ADDRESS
"ISPEXEC LIBDEF ISPPLIB DATASET ID('"||PAN||"')"
  "ISPEXEC DISPLAY PANEL(PVTG1) CURSOR(DB)"
/**********************************************************************/
CDATE =CD
LDATE =LD
DBNAME =DB
STRIPOUT=STR

IF (,
    (DBNAME \= " ")&(LENGTH(DBNAME)== 5),
   &(CDATE \= " "),
   &(LDATE \= " "),
   ) THEN
DO
CALL BATTRX_FILE
SAY "NEW BATTRX FILE CREATED WITH NAME OF "NEW_BATTRX
CALL FAT
CALL XXT
CALL GAT
CALL HKT
CALL PARMLIB
SAY "PARMLIB MEMBER'S ARE EDITED IN "PARMLIB
CALL JCL2REXX
/********PANEL2**/
DO FOREVER
ADDRESS 'ISPEXEC'
"ADDPOP ROW(1) COLUMN(2)"
"DISPLAY PANEL(PVTG2) CURSOR(O)"
"REMPOP"
  IF RC = 8 THEN LEAVE
  SELECT
    WHEN O = '0' THEN DO
      "DISPLAY PANEL(REPORTMD()) CURSOR(O)"
    END
    WHEN O = '1' THEN DO
     SAY 'E7440FAT JOB SUBMITTING'
     ADDRESS TSO EXEC "'"||PDS||"(RFAP)'"
    END
    WHEN O = '2' THEN DO
     SAY 'E7440XXT JOB SUBMITTING'
     ADDRESS TSO EXEC "'"||PDS||"(RXXP)'"
    END
    WHEN O = '3' THEN DO
     SAY 'TEMP CONTROL FILE DELETING....'
     CALL CONTROL_FILES
     SAY 'ALL FIVE SECTION FILES ARE EDIT WITH THE CORRECT DATA'
     SAY 'E7470G*T JOB SUBMITTING'
     ADDRESS TSO EXEC "'"||PDS||"(RGAP)'"
    END
    WHEN O = '4' THEN DO
     SAY 'E7470HKT JOB SUBMITTING'
     ADDRESS TSO EXEC "'"||PDS||"(RHKP)'"
    END
    WHEN O = 'X' THEN
    DO
    CALL DELALL
    LEAVE
    END
    OTHERWISE NOP
  END
  O = ""
END


EXIT 0
END
ELSE
DO
/*SAY "ERROR YOUR DATA IS INCORRECT"*/
EXIT
END
/*******************************************************************/
FAT:
IN1 = "'"||PDS||"(AFAP)'"
IF (STRIPOUT = ' ') THEN
DO
STLINE1="//SFAP0025.DD07 DD DUMMY                                "
STLINE2="//*SFAP0025.DD07 DD DSN="||STRIPOUT||",                 "
STLINE3="//*          DISP=SHR                                   "
END
ELSE
DO
STLINE1="//*SFAP0025.DD07 DD DUMMY                              "
STLINE2="//SFAP0025.DD07 DD DSN="||STRIPOUT||",                 "
STLINE3="//          DISP=SHR                                   "
END

/*ALLOCATING FILE*/
"ALLOC DA("||IN1||") FI(OUTPUT1) SHR REUSE"
/*PUTTING DATA TO STEAM*/
A.1 = "//"JOB"FAT JOB ("||URN||"),MSGCLASS=O,                  "
A.2 = "//           NOTIFY=&SYSUID                             "
A.3 = "/*JOBPARM S=ANY,SYSAFF=ANY                              "
A.4 = "//E7441FAP EXEC E7441FAP,                               "
A.5 = "//           DSN1=E7440TS,                              "
A.6 = "//           DSN2=E7440TSH,                             "
A.7 = "//           GL0066="||CDATE||",                        "
A.8 = "//           FICHECLS=O,                                "
A.9 = "//           GT2=GT,            ** USE LE FOR XPEDIT    "
A.10 = "//          RRIND=LE,                                  "
A.11 = "//          GL0067="||LDATE||",                        "
A.12 = "//          JCLCLS='*',        ** JCL OUTPUT CLASS     "
A.13 = "//          DUMPCLS='*',       ** ABEND OUTPUT CLAS    "
A.14 = "//          RUNLOG='*',        ** RUNLOG OUTPUT CLA    "
A.15 = "//          UNIT=DELQ,                                 "
A.16 = "//          DMY=,                                      "
A.17 = "//          DMY1=,                                     "
A.18 = "//          DMY2=,                                     "
A.19 = "//          DMY3=,                                     "
A.20 = "//          DMY5=,                                     "
A.21 = "//          DMY6=,                                     "
A.22 = "//          DMY7=,                                     "
A.23 = "//          DMY8=,                                     "
A.24 = "//          DMY11=,                                    "
A.25 = "//          DMY12=,                                    "
A.26 = "//          VAN30="||DBNAME||",                        "
A.27 = "//          COND.SFAP0120=(0,LE),                      "
A.28 = "//          VDSN=E7440TT0                              "
A.29 = "//SFAP0025.DD01 DD DUMMY                               "
A.30 = "//SFAP0025.DD02 DD DUMMY                               "
A.31 = "//SFAP0025.DD03 DD DUMMY                               "
A.32 = "//SFAP0025.DD04 DD DUMMY                               "
A.33 = "//SFAP0025.DD05 DD DUMMY                               "
A.34 = "//SFAP0025.DD06 DD DUMMY                               "
A.35 = STLINE1
A.36 = STLINE2
A.37 = STLINE3
A.38 = "//SFAP0025.DD08 DD DUMMY                               "
A.39 = "//SFAP0025.DD09 DD DUMMY                               "
A.40 = "//SFAP0025.DD10 DD DUMMY                               "
A.41 = "//SFAP0025.DD11 DD DUMMY                               "
A.42 = "//SFAP0025.DD12 DD DUMMY                               "
A.43 = "//SFAP0025.DD13 DD DUMMY                               "
A.44 = "//*                                                    "
A.45 = "//SFAP0030.SORTIN DD DSN="||NEW_BATTRX1||",             "
A.46 = "//             DISP=SHR"
A.47 = "//                 DD DSN=&&PROD,DISP=SHR              "
A.48 = "//                 DD DUMMY                            "
A.49 = "//                 DD DUMMY                            "
A.50 = "//                 DD DUMMY                            "
A.51 = "//                 DD DUMMY                            "
A.52 = "//                 DD DUMMY                            "
A.53 = "//                 DD DUMMY                            "
A.54 = "//                 DD DUMMY                            "
A.55 = "//                 DD DUMMY                            "
A.56 = "//                 DD DUMMY                            "
A.57 = "//                 DD DUMMY                            "
A.58 = "//                 DD DUMMY                            "
A.59 = "//                 DD DUMMY                            "
A.60 = "//SFAP0030.SYSIN   DD *                                "
A.61 = "   SORT FIELDS=(5,3,CH,A,34,4,CH,A)                    "
A.62 = "   END                                                 "
A.63 = "/*                                                     "
A.64 = "//SFAP0055.INPUT1   DD DISP=SHR,                       "
A.65 = "//         DSN=E7440TSH.VAN15.CONTROL.BACKUP2.N090123  "
A.66 = "//************************************************     "
A.67 = "//*C ALL "||CDATE||" YYMMDD ==>CURRENT DATE*******     "
A.68 = "//*C ALL "||LDATE||" YYMMDD ==>LASTCYCLE DATE*****     "
A.69 = "//*C ALL "||DBNAME||" IM65N ==>MINIDB NAME********     "
A.70 = "//*EDIT THE BATTRIG FILE WITH ZE CUREENT DATE*****     "
A.71 = "//*REPLACE THE YOUR OWN STRIPOUT******************     "
A.72 = "//*JJ 5,2,MAXCC=004*******************************     "
A.73 = "//************************************************     "
A.74 = "//*ABCQUEUE '$$'                                       "
A.75 = "//*ABCADDRESS TSO 'SUB * END($$)'                      "
/*WRITING STEM DATA FILE*/
"EXECIO 75 DISKW OUTPUT1 (FINIS STEM A."
"FREE FI(OUTPUT1)"
RETURN;
/*****************************************************************/
/*****************************************************************/
XXT:
IN2 = "'"||PDS||"(BXXP)'"
/*ALLOCATING FILE*/
"ALLOC DA("||IN2||") FI(OUTPUT2) SHR REUSE"
/*PUTTING DATA TO STEAM*/
X.1 = "//"JOB"XXT    JOB  ("||URN||"),MSGCLASS=O,             "
X.2 = "//          NOTIFY=&SYSUID                                     "
X.3 = "/*JOBPARM S=ANY,SYSAFF=ANY"
X.4 = "//*==> C ALL "||DBNAME||" XXXXX                                "
X.5 = "//STEP01     EXEC PGM=IEFBR14                                  "
X.6 = "//DD100 DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT1,            "
X.7 = "//        DISP=(MOD,DELETE)                                    "
X.8 = "//DD200 DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT2,            "
X.9 = "//        DISP=(MOD,DELETE)                                    "
X.10 = "//DD300 DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT3,           "
X.11 = "//       DISP=(MOD,DELETE)                                    "
X.12 = "//DD400 DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT4,           "
X.13 = "//       DISP=(MOD,DELETE)                                    "
X.14 = "//DD500 DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT5,           "
X.15 = "//       DISP=(MOD,DELETE)                                    "
X.16 = "//DD600 DD DSN=E7440TS."||DBNAME||".CHKPOINT,                 "
X.17 = "//       DISP=(MOD,DELETE)                                    "
X.18 = "//STEP02    EXEC PGM=IDCAMS                                   "
X.19 = "//SYSOUT    DD   SYSOUT=(*)                                   "
X.20 = "//SYSLIST   DD   SYSOUT=(*)                                   "
X.21 = "//SYSPRINT DD    SYSOUT=(*)                                   "
X.22 = "//SYSIN     DD   *                                            "
X.23 = "       DELETE (E7440TT0."||DBNAME||".BEDELETE.FILE)           "
X.24 = "       DELETE (E7440TT0."||DBNAME||".FUNDFILE)                "
X.25 = "       SET MAXCC=0                                            "
X.26 = "       DEFINE CLUSTER(             -                          "
X.27 = "              NAME(E7440TT0."||DBNAME||".BEDELETE.FILE) -     "
X.28 = "              MODEL(E7440PS0.VAN30.BEDELETE.FILE) -           "
X.29 = "              CYLINDERS(500 50))                              "
X.30 = "       DEFINE CLUSTER(             -                          "
X.31 = "              NAME(E7440TT0."||DBNAME||".FUNDFILE) -          "
X.32 = "              MODEL(E7440PS0.VAN30.FUNDFILE) -                "
X.33 = "              CYLINDERS(500 50))                              "
X.34 = "/*                                                            "
X.35 = "//STEP03    EXEC PGM=IDCAMS                                   "
X.36 = "//SYSOUT    DD   SYSOUT=(*)                                   "
X.37 = "//SYSLIST   DD   SYSOUT=(*)                                   "
X.38 = "//SYSPRINT DD    SYSOUT=(*)                                   "
X.39 = "//INDSET    DD   DSN=E7440PS0.VAN30.BEDELETE.FILE,DISP=SHR    "
X.40 = "//OUTDSET   DD   DISP=OLD,AMP='BUFND=32',                     "
X.41 = "//          DSN=E7440TT0."||DBNAME||".BEDELETE.FILE           "
X.42 = "//INDSET1   DD   DSN=E7440PS0.VAN30.FUNDFILE,DISP=SHR         "
X.43 = "//OUTDSET1 DD    DISP=OLD,AMP='BUFND=32',                     "
X.44 = "//          DSN=E7440TT0."||DBNAME||".FUNDFILE                "
X.45 = "//SYSIN     DD   *                                            "
X.46 = "   REPRO INFILE(INDSET) OUTFILE(OUTDSET)                      "
X.47 = "   REPRO INFILE(INDSET1) OUTFILE(OUTDSET1)                    "
X.48 = "/*                                                            "
X.49 = "//STEP04A EXEC PGM=FILEMGR                                    "
X.50 = "//SYSPRINT DD SYSOUT=*                                        "
X.51 = "//DD01      DD DSN=E7440PS.VAN30.CHKPOINT.SECT1,DISP=SHR      "
X.52 = "//DD01O     DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT1,       "
X.53 = "//          DISP=(NEW,CATLG,DELETE),UNIT=DELW,                "
X.54 = "//          SPACE=(CYL,(1,1),RLSE),                           "
X.55 = "//          DCB=(DSORG=PS,RECFM=FB,LRECL=80,BLKSIZE=800)      "
X.56 = "//SYSIN     DD DISP=SHR,DSN=SYSCMN.PROD.CCLIB(E7440KO0)       "
X.57 = "//STEP04B EXEC PGM=FILEMGR                                    "
X.58 = "//SYSPRINT DD SYSOUT=*                                        "
X.59 = "//DD01      DD DSN=E7440PS.VAN30.CHKPOINT.SECT2,DISP=SHR      "
X.60 = "//DD01O     DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT2,       "
X.61 = "//          DISP=(NEW,CATLG,DELETE),UNIT=DELW,                "
X.62 = "//          SPACE=(CYL,(1,1),RLSE),                           "
X.63 = "//          DCB=(DSORG=PS,RECFM=FB,LRECL=80,BLKSIZE=800)      "
X.64 = "//SYSIN     DD DISP=SHR,DSN=SYSCMN.PROD.CCLIB(E7440KO0)       "
X.65 = "//STEP04C EXEC PGM=FILEMGR                                    "
X.66 = "//SYSPRINT DD SYSOUT=*                                        "
X.67 = "//DD01      DD DSN=E7440PS.VAN30.CHKPOINT.SECT3,DISP=SHR      "
X.68 = "//DD01O     DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT3,       "
X.69 = "//          DISP=(NEW,CATLG,DELETE),UNIT=DELW,                "
X.70 = "//          SPACE=(CYL,(1,1),RLSE),                           "
X.71 = "//          DCB=(DSORG=PS,RECFM=FB,LRECL=80,BLKSIZE=800)      "
X.72 = "//SYSIN     DD DISP=SHR,DSN=SYSCMN.PROD.CCLIB(E7440KO0)       "
X.73 = "//STEP04D EXEC PGM=FILEMGR                                    "
X.74 = "//SYSPRINT DD SYSOUT=*                                        "
X.75 = "//DD01      DD DSN=E7440PS.VAN30.CHKPOINT.SECT4,DISP=SHR      "
X.76 = "//DD01O     DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT4,       "
X.77 = "//          DISP=(NEW,CATLG,DELETE),UNIT=DELW,                "
X.78 = "//          SPACE=(CYL,(1,1),RLSE),                           "
X.79 = "//          DCB=(DSORG=PS,RECFM=FB,LRECL=80,BLKSIZE=800)      "
X.80 = "//SYSIN     DD DISP=SHR,DSN=SYSCMN.PROD.CCLIB(E7440KO0)       "
X.81 = "//STEP04E EXEC PGM=FILEMGR                                    "
X.82 = "//SYSPRINT DD SYSOUT=*                                        "
X.83 = "//DD01      DD DSN=E7440PS.VAN30.CHKPOINT.SECT5,DISP=SHR      "
X.84 = "//DD01O     DD DSN=E7440TS."||DBNAME||".CHKPOINT.SECT5,       "
X.85 = "//          DISP=(NEW,CATLG,DELETE),UNIT=DELW,                "
X.86 = "//          SPACE=(CYL,(1,1),RLSE),                           "
X.87 = "//          DCB=(DSORG=PS,RECFM=FB,LRECL=80,BLKSIZE=800)      "
X.88 = "//SYSIN     DD DISP=SHR,DSN=SYSCMN.PROD.CCLIB(E7440KO0)       "
X.89 = "//STEP04F EXEC PGM=FILEMGR                                    "
X.90 = "//SYSPRINT DD SYSOUT=*                                        "
X.91 = "//DD01      DD DSN=E7440PS.VAN30.CHKPOINT,DISP=SHR            "
X.92 = "//DD01O     DD DSN=E7440TS."||DBNAME||".CHKPOINT,             "
X.93 = "//          DISP=(NEW,CATLG,DELETE),UNIT=DELW,                "
X.94 = "//          SPACE=(CYL,(1,1),RLSE),                           "
X.95 = "//          DCB=(DSORG=PS,RECFM=FB,LRECL=80,BLKSIZE=800)      "
X.96 = "//SYSIN     DD DISP=SHR,DSN=SYSCMN.PROD.CCLIB(E7440KO0)       "
X.97 = "//*ABCQUEUE '$$'                                       "
X.98 = "//*ABCADDRESS TSO 'SUB * END($$)'                      "
/*WRITING STEM DATA FILE*/
"EXECIO 98 DISKW OUTPUT2 (FINIS STEM X."
"FREE FI(OUTPUT2)" ;
RETURN;
/*****************************************************************/
GAT:
IN3 = "'"||PDS||"(CGAP)'"
/*LOADLIB FIND*/
IF (LB = ' ') THEN
DO
LBLINE ="//*         LOADLIB='"||LB||"',                          "
END
ELSE
DO
LBLINE ="//          LOADLIB='"||LB||"',                          "
END

/*ALLOCATING FILE*/
"ALLOC DA("||IN3||") FI(OUTPUT3) SHR REUSE"
/*PUTTING DATA TO STEAM*/
C.1 = "//"JOB"G1T JOB ("||URN||"),MSGCLASS=O,TIME=(5,30),        "
C.2 = "//     LINES=999999,NOTIFY=&SYSUID                "
C.3 = "//E7441G1P EXEC E7441GAP,                                 "
C.4 = "//           GAP=E7440G1P,                                "
C.5 = "//           JOBNAME=E7440G1P,                            "
C.6 = "//           SECT=1,                                      "
C.7 = "//           HO=N,                                        "
C.8 = "//           GL0066="||CDATE||",                          "
C.9 = "//           GL0067="||LDATE||",                          "
C.10 = "//          GL0917=2"||LDATE||",                         "
C.11 = "//          DSN=E7440TS,                                 "
C.12 = "//          DSNM=E7440TS,                                "
C.13 = "//          DSND=E7440TS,                                "
C.14 = "//          COND.SGAP0250=(0,LE),                        "
C.15 = "//          COND.SGAP0300=(0,LE),                        "
C.16 = "//          DSN1=E7440TS,                                "
C.17 = "//          VDSN=E7440TT0,                               "
C.18 = "//          VAN30="||DBNAME||",                          "
C.19 = LBLINE
C.20 = "//          PARMLIB1='"||PARMLIB||"'                     "
C.21 = "//SGAP0100.INDD01 DD DISP=SHR,                           "
C.22 = "//          DSN=E7440TS."||DBNAME||".PCKTFLE1.N"||CDATE||" "
C.23 = "//SGAP0200.MATRX DD DSN=E7440PS.VAN30.MATRX1.SORTED,     "
C.24 = "//          DISP=SHR                                     "
C.25 = "//SGAP0200.ADMNTBL DD DSN=E7440PS0.VAN30.TABLES,         "
C.26 = "//          DISP=SHR                                     "
C.27 = "//***************************************************** "
C.28 = "//"JOB"G2T JOB ("||URN||"),MSGCLASS=O,TIME=(5,30),       "
C.29 = "//    LINES=999999,NOTIFY=&SYSUID                "
C.30 = "//E7441G2P EXEC E7441GAP,                                "
C.31 = "//          GAP=E7440G2P,                                "
C.32 = "//          JOBNAME=E7440G2P,                            "
C.33 = "//          SECT=2,                                      "
C.34 = "//          HO=N,                                        "
C.35 = "//          GL0066="||CDATE||",                          "
C.36 = "//          GL0067="||LDATE||",                          "
C.37 = "//          GL0917=2"||LDATE||",                         "
C.38 = "//          DSN=E7440TS,                                 "
C.39 = "//          DSNM=E7440TS,                                "
C.40 = "//          DSND=E7440TS,                                "
C.41 = "//          COND.SGAP0250=(0,LE),                        "
C.42 = "//          COND.SGAP0300=(0,LE),                        "
C.43 = "//          DSN1=E7440TS,                                "
C.44 = "//          VDSN=E7440TT0,                               "
C.45 = "//          VAN30="||DBNAME||",                          "
C.46 = LBLINE
C.47 = "//          PARMLIB1='"||PARMLIB||"'                     "
C.48 = "//SGAP0100.INDD01 DD DISP=SHR,                           "
C.49 = "//          DSN=E7440TS."||DBNAME||".PCKTFLE2.N"||CDATE||" "
C.50 = "//SGAP0200.MATRX DD DSN=E7440PS.VAN30.MATRX2.SORTED,     "
C.51 = "//          DISP=SHR                                     "
C.52 = "//SGAP0200.ADMNTBL DD DSN=E7440PS0.VAN30.TABLES,         "
C.53 = "//          DISP=SHR                                     "
C.54 = "//***************************************************** "
C.55 = "//"JOB"G3T JOB ("||URN||"),MSGCLASS=O,TIME=(5,30),       "
C.56 = "//    LINES=999999,NOTIFY=&SYSUID                "
C.57 = "//E7441G3P EXEC E7441GAP,                                "
C.58 = "//          GAP=E7440G3P,                                "
C.59 = "//          JOBNAME=E7440G3P,                            "
C.60 = "//          SECT=3,                                      "
C.61 = "//          HO=N,                                        "
C.62 = "//          GL0066="||CDATE||",                          "
C.63 = "//          GL0067="||LDATE||",                          "
C.64 = "//          GL0917=2"||LDATE||",                         "
C.65 = "//          DSN=E7440TS,                                 "
C.66 = "//          DSNM=E7440TS,                                "
C.67 = "//          DSND=E7440TS,                                "
C.68 = "//          COND.SGAP0250=(0,LE),                        "
C.69 = "//          COND.SGAP0300=(0,LE),                        "
C.70 = "//          DSN1=E7440TS,                                "
C.71 = "//          VDSN=E7440TT0,                               "
C.72 = "//          VAN30="||DBNAME||",                          "
C.73 = LBLINE
C.74 = "//          PARMLIB1='"||PARMLIB||"'                     "
C.75 = "//SGAP0100.INDD01 DD DISP=SHR,                           "
C.76 = "//          DSN=E7440TS."||DBNAME||".PCKTFLE3.N"||CDATE||" "
C.77 = "//SGAP0200.MATRX DD DSN=E7440PS.VAN30.MATRX3.SORTED,     "
C.78 = "//          DISP=SHR                                     "
C.79 = "//SGAP0200.ADMNTBL DD DSN=E7440PS0.VAN30.TABLES,         "
C.80 = "//          DISP=SHR                                     "
C.81 = "//***************************************************** "
C.82 = "//"JOB"G4T JOB ("||URN||"),MSGCLASS=O,TIME=(5,30),       "
C.83 = "//    LINES=999999,NOTIFY=&SYSUID                "
C.84 = "//E7441G4P EXEC E7441GAP,                                "
C.85 = "//          GAP=E7440G4P,                                "
C.86 = "//          JOBNAME=E7440G4P,                            "
C.87 = "//          SECT=4,                                      "
C.88 = "//          HO=N,                                        "
C.89 = "//          GL0066="||CDATE||",                          "
C.90 = "//          GL0067="||LDATE||",                          "
C.91 = "//          GL0917=2"||LDATE||",                         "
C.92 = "//          DSN=E7440TS,                                 "
C.93 = "//          DSNM=E7440TS,                                "
C.94 = "//          DSND=E7440TS,                                "
C.95 = "//          COND.SGAP0250=(0,LE),                        "
C.96 = "//          COND.SGAP0300=(0,LE),                        "
C.97 = "//          DSN1=E7440TS,                                "
C.98 = "//          VDSN=E7440TT0,                               "
C.99 = "//          VAN30="||DBNAME||",                          "
C.100 = LBLINE
C.101 = "//         PARMLIB1='"||PARMLIB||"'                     "
C.102 = "//SGAP0100.INDD01 DD DISP=SHR,                          "
C.103 = "//         DSN=E7440TS."||DBNAME||".PCKTFLE4.N"||CDATE||" "
C.104 = "//SGAP0200.MATRX DD DSN=E7440PS.VAN30.MATRX4.SORTED,    "
C.105 = "//         DISP=SHR                                     "
C.106 = "//SGAP0200.ADMNTBL DD DSN=E7440PS0.VAN30.TABLES,        "
C.107 = "//         DISP=SHR                                     "
C.108 = "//***************************************************** "
C.109 = "//"JOB"G5T JOB ("||URN||"),MSGCLASS=O,TIME=(5,30),      "
C.110 = "//   LINES=999999,NOTIFY=&SYSUID                "
C.111 = "//E7441G5P EXEC E7441GAP,                               "
C.112 = "//         GAP=E7440G5P,                                "
C.113 = "//         JOBNAME=E7440G5P,                            "
C.114 = "//         SECT=5,                                      "
C.115 = "//         HO=N,                                        "
C.116 = "//         GL0066="||CDATE||",                          "
C.117 = "//         GL0067="||LDATE||",                          "
C.118 = "//         GL0917=2"||LDATE||",                         "
C.119 = "//         DSN=E7440TS,                                 "
C.120 = "//         DSNM=E7440TS,                                "
C.121 = "//         DSND=E7440TS,                                "
C.122 = "//         COND.SGAP0250=(0,LE),                        "
C.123 = "//         COND.SGAP0300=(0,LE),                        "
C.124 = "//         DSN1=E7440TS,                                "
C.125 = "//         VDSN=E7440TT0,                               "
C.126 = "//         VAN30="||DBNAME||",                          "
C.127 = LBLINE
C.128 = "//         PARMLIB1='"||PARMLIB||"'                     "
C.129 = "//SGAP0100.INDD01 DD DISP=SHR,                          "
C.130 = "//         DSN=E7440TS."||DBNAME||".PCKTFLE5.N"||CDATE||" "
C.131 = "//SGAP0200.MATRX DD DSN=E7440PS.VAN30.MATRX5.SORTED,    "
C.132 = "//         DISP=SHR                                     "
C.133 = "//SGAP0200.ADMNTBL DD DSN=E7440PS0.VAN30.TABLES,        "
C.134 = "//         DISP=SHR                                     "
C.135 = "//***************************************************** "
C.136 = "//*ABCQUEUE '$$'                                       "
C.137 = "//*ABCADDRESS TSO 'SUB * END($$)'                      "
/*WRITING STEM DATA FILE*/
"EXECIO 137 DISKW OUTPUT3 (FINIS STEM C."
"FREE FI(OUTPUT3)"
RETURN;
/*****************************************************************/
HKT:
IN4 = "'"||PDS||"(DHKP)'"
/*ALLOCATING FILE*/
"ALLOC DA("||IN4||") FI(OUTPUT4) SHR REUSE"
/*PUTTING DATA TO STEAM*/
D.1 = "//"JOB"HKT    JOB  ('E0082AG'),TIME=(1),            "
D.2 = "//      MSGCLASS=O,NOTIFY=&SYSUID                   "
D.3 = "//*"
D.4 = "/*JOBPARM S=ANY,SYSAFF=ANY"
D.5 = "//E7441HKP    EXEC E7441HKP,                        "
D.6 = "//            GT12=GT,                              "
D.7 = "//            GT13=GT,                              "
D.8 = "//            GT14=GT,                              "
D.9 = "//            GT34=GT,                              "
D.10 = "//           GT35=GT,                              "
D.11 = "//*          GT36=GT,                              "
D.12 = "//           DSN2=E7440TS,                         "
D.13 = "//           GL0066="||CDATE||",                   "
D.14 = "//           GL0069="||CDATE||",                   "
D.15 = "//           VDSN=E7440TT0,                        "
D.16 = "//           VAN30="||DBNAME||",                   "
D.17 = "//           COND.STEP13C=(0,LE),                  "
D.18 = "//           COND.STEP13D=(0,LE),                  "
D.19 = "//           COND.STEP0=(0,LE),                    "
D.20 = "//           JCLCLS='*',                           "
D.21 = "//           DUMPCLS='*',                          "
D.22 = "//           RUNLOG='*'                            "
D.23 = "//STEP4.SYSIN     DD  *                            "
D.24 = "   MERGE FIELDS=(5,24,CH,A)                        "
D.25 = "   SUM FIELDS=NONE                                 "
D.26 = "/*                                                 "
D.27 = "//STEP5.SYSIN     DD  *                            "
D.28 = "   MERGE FIELDS=(5,24,CH,A)                        "
D.29 = "   SUM FIELDS=NONE                                 "
D.30 = "/*                                                 "
D.31 = "//STEP6.SYSIN     DD  *                            "
D.32 = "   MERGE FIELDS=(5,24,CH,A)                        "
D.33 = "   SUM FIELDS=NONE                                 "
D.34 = "/*                                                 "
D.35 = "//STEP7.SYSIN     DD  *                            "
D.36 = "   MERGE FIELDS=(5,24,CH,A)                        "
D.37 = "   SUM FIELDS=NONE                                 "
D.38 = "/*                                                 "
D.39 = "//STEP8.SYSIN     DD  *                            "
D.40 = "   MERGE FIELDS=(5,132,CH,A)                       "
D.41 = "   SUM FIELDS=NONE                                 "
D.42 = "/*                                                 "
D.43 = "//STEP9.SYSIN     DD  *                            "
D.44 = "   MERGE FIELDS=(9,49,CH,A)                        "
D.45 = "   SUM FIELDS=NONE                                 "
D.46 = "/*                                                 "
D.47 = "//STEP10.SYSIN    DD  DISP=SHR,                    "
D.48 = "// DSN=SYSCMN.PROD.CCLIB(E7440KO0)                 "
D.49 = "//STEP11.SYSIN     DD  *                           "
D.50 = "   MERGE FIELDS=(9,10,CH,A)                        "
D.51 = "   SUM FIELDS=NONE                                 "
D.52 = "/*                                                 "
D.53 = "//STEP12.SYSIN     DD  *                           "
D.54 = "   MERGE FIELDS=(5,5,CH,A)                         "
D.55 = "   SUM FIELDS=NONE                                 "
D.56 = "/*                                                 "
D.57 = "//STEP13.SYSIN     DD  *                           "
D.58 = "   MERGE FIELDS=(5,10,CH,A)                        "
D.59 = "   SUM FIELDS=NONE                                 "
D.60 = "/*                                                 "
D.61 = "//STEP14.SYSIN     DD  *                           "
D.62 = "   MERGE FIELDS=(5,10,CH,A)                        "
D.63 = "   SUM FIELDS=NONE                                 "
D.64 = "/*                                                 "
D.65 = "//STEP15.SYSIN     DD  *                           "
D.66 = "   MERGE FIELDS=(5,10,CH,A)                        "
D.67 = "   SUM FIELDS=NONE                                 "
D.68 = "/*                                                 "
D.69 = "//STEP16.SYSIN     DD  *                           "
D.70 = "   MERGE FIELDS=(5,10,CH,A)                        "
D.71 = "   SUM FIELDS=NONE                                 "
D.72 = "/*                                                 "
D.73 = "//STEP17.SYSIN     DD  *                           "
D.74 = "   MERGE FIELDS=(5,10,CH,A)                        "
D.75 = "   SUM FIELDS=NONE                                 "
D.76 = "/*                                                 "
D.77 = "//STEP18.SYSIN     DD  *                           "
D.78 = "   MERGE FIELDS=(5,10,CH,A)                        "
D.79 = "   SUM FIELDS=NONE                                 "
D.80 = "/*                                                 "
D.81 = "//STEP19.SYSIN     DD  *                           "
D.82 = "   MERGE FIELDS=(5,10,CH,A)                        "
D.83 = "   SUM FIELDS=NONE                                 "
D.84 = "/*                                                 "
D.85 = "//STEP20.SYSIN     DD  *                           "
D.86 = "   MERGE FIELDS=(5,10,CH,A)                        "
D.87 = "   SUM FIELDS=NONE                                 "
D.88 = "/*                                                 "
D.89 = "//************************************************"
D.90 = "//* CHANGE ARE GL0066 IS CURRENT DATE ,VAN30=MINID"
D.91 = "//* ==> C ALL "||CDATE||" YYMMDD                   "
D.92 = "//* ==> C ALL "||DBNAME||" XXXXX                   "
D.93 = "//* JJ=5,11=16 SUB=MAXCC004                        "
D.94 = "//*ABCQUEUE '$$'                                       "
D.95 = "//*ABCADDRESS TSO 'SUB * END($$)'                      "
/*WRITING STEM DATA FILE*/
"EXECIO 095 DISKW OUTPUT4 (FINIS STEM D."
"FREE FI(OUTPUT4)"
RETURN;
/*****************************************************************/
/*****************************************************************/
PARMLIB:
/* INPUT FILE ALLOCATION */
IN1 = "'"||PARMLIB||"(E7440G1P)'"
IN2 = "'"||PARMLIB||"(E7440G2P)'"
IN3 = "'"||PARMLIB||"(E7440G3P)'"
IN4 = "'"||PARMLIB||"(E7440G4P)'"
IN5 = "'"||PARMLIB||"(E7440G5P)'"

/*******************************************************************/
/*ALLOCATING FILE*/
"ALLOC DA("||IN1||") FI(OUTPUT1) SHR REUSE"
/*PUTTING DATA TO STEAM*/
V.1 = "   DELETE (E7440TT0."||DBNAME||".EXPLODE1) -        "
V.2 = "          CLUSTER                                   "
V.3 = "   IF LASTCC GT 4 THEN SET MAXCC=0                  "
V.4 = "   DEFINE CLUSTER -                                 "
V.5 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE1) -   "
V.6 = "          UNIQUE -                                  "
V.7 = "          SHAREOPTIONS(2 3) -                       "
V.8 = "          MGMTCLAS(D32M) -                          "
V.9 = "          VOLUMES(* * * * *) -                      "
V.10 = "          SPEED) -                                  "
V.11 = "   DATA -                                           "
V.12 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE1.DATA) - "
V.13 = "          RECORDSIZE(2000,20472) -                  "
V.14 = "          FREESPACE(0 0) -                          "
V.15 = "          CISZ(20480) -                             "
V.16 = "          CYL(10 5) -                               "
V.17 = "          KEYS(10,4) ) -                            "
V.18 = "   INDEX -                                          "
V.19 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE1.INDEX) - "
V.20 = "          CYL(10 5)  -                              "
V.21 = "          CISZ(512) )                               "
V.22 = "                                                    "
V.23 = "   DELETE (E7440TT0."||DBNAME||".ERRTRIG1) -        "
V.24 = "          CLUSTER                                   "
V.25 = "   IF LASTCC GT 4 THEN SET MAXCC=0                  "
V.26 = "                                                    "
V.27 = "   DEFINE CLUSTER -                                 "
V.28 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG1) -   "
V.29 = "          UNIQUE -                                  "
V.30 = "          SHAREOPTIONS(2 3) -                       "
V.31 = "          MGMTCLAS(D32M) -                          "
V.32 = "          VOLUMES(* * * * *) -                      "
V.33 = "          SPEED) -                                  "
V.34 = "   DATA -                                           "
V.35 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG1.DATA) - "
V.36 = "          RECORDSIZE(2000 20472) -                  "
V.37 = "          FREESPACE(0 0) -                          "
V.38 = "          CISZ(20480) -                             "
V.39 = "          CYL(10 5) -                               "
V.40 = "          KEYS(10 0) ) -                            "
V.41 = "   INDEX -                                          "
V.42 = "       (NAME(E7440TT0."||DBNAME||".ERRTRIG1.INDEX) - "
V.43 = "          CYL(10 5) -                               "
V.44 = "          CISZ(512) )                               "
V.45 = "                                                    "
V.46 = "   DELETE (E7440TT0."||DBNAME||".REAPPLY1) -        "
V.47 = "          CLUSTER                                   "
V.48 = "   IF LASTCC GT 4 THEN SET MAXCC=0                  "
V.49 = "                                                    "
V.50 = "   DEFINE CLUSTER         -                         "
V.51 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY1) -   "
V.52 = "          UNIQUE -                                  "
V.53 = "          SHAREOPTIONS(2 3) -                       "
V.54 = "          MGMTCLAS(D32M) -                          "
V.55 = "          VOLUMES(* * * * *) -                      "
V.56 = "          SPEED) -                                  "
V.57 = "   DATA -                                           "
V.58 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY1.DATA) - "
V.59 = "          RECORDSIZE(2000,20472) -                  "
V.60 = "          FREESPACE(0 0) -                          "
V.61 = "          CISZ(20480) -                             "
V.62 = "          CYL(10 5) -                               "
V.63 = "          KEYS(10,4) ) -                            "
V.64 = "   INDEX -                                          "
V.65 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY1.INDEX) - "
V.66 = "          CYL(10 5) -                               "
V.67 = "          CISZ(512) )                               "
V.68 = "                                                    "
V.69 = "   DELETE (E7440TT0."||DBNAME||".DBPBFLG1) -        "
V.70 = "          CLUSTER                                   "
V.71 = "   IF LASTCC GT 4 THEN SET MAXCC=0                  "
V.72 = "                                                    "
V.73 = "   DEFINE CLUSTER -                                 "
V.74 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG1) -   "
V.75 = "          UNIQUE -                                  "
V.76 = "          SHAREOPTIONS(2 3) -                       "
V.77 = "          MGMTCLAS(D32) -                           "
V.78 = "          VOLUMES(* * * *) -                        "
V.79 = "          SPEED) -                                  "
V.80 = "   DATA -                                           "
V.81 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG1.DATA) - "
V.82 = "          RECORDSIZE(20472 20472) -                 "
V.83 = "          FREESPACE(0 0) -                          "
V.84 = "          CISZ(20480) -                             "
V.85 = "          CYL(10 5) -                               "
V.86 = "          KEYS(5 0) ) -                             "
V.87 = "   INDEX -                                          "
V.88 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG1.INDEX) - "
V.89 = "          CYL(10 5) -                               "
V.90 = "          CISZ(512) )                               "
V.91 = "                                                    "
V.92 = "   DELETE E7440TT0."||DBNAME||".CKPTCTL1 -          "
V.93 = "          CLUSTER                                   "
V.94 = "   IF LASTCC GT 4 THEN SET MAXCC=0                  "
V.95 = "                                                    "
V.96 = "   DEFINE CLUSTER -                                 "
V.97 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL1) -   "
V.98 = "          UNIQUE -                                  "
V.99 = "          SHAREOPTIONS(2 3) -                       "
V.100 = "          MGMTCLAS(D32M) -                          "
V.101 = "          VOLUMES(* * * * *) -                      "
V.102 = "          SPEED) -                                  "
V.103 = "   DATA -                                           "
V.104 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL1.DATA) - "
V.105 = "          RECORDSIZE(1500 20472) -                  "
V.106 = "          FREESPACE(0 0) -                          "
V.107 = "          CISZ(20480) -                             "
V.108 = "          CYL(10 5) -                               "
V.109 = "          KEYS(9 0) ) -                             "
V.110 = "   INDEX -                                          "
V.111 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL1.INDEX) - "
V.112 = "          CYL(10 5) -                               "
V.113 = "          CISZ(512) )                               "
V.114 = "                                                    "
V.115 = "   DELETE (E7440TT0."||DBNAME||".GRPEXPL1) -        "
V.116 = "          CLUSTER                                   "
V.117 = "   IF LASTCC GT 4 THEN SET MAXCC=0                  "
V.118 = "                                                    "
V.119 = "   DEFINE CLUSTER -                                 "
V.120 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL1) -   "
V.121 = "          UNIQUE -                                  "
V.122 = "          SHAREOPTIONS(2 3) -                       "
V.123 = "          MGMTCLAS(D32M) -                          "
V.124 = "          VOLUMES(* * * * *) -                      "
V.125 = "          SPEED) -                                  "
V.126 = "   DATA -                                           "
V.127 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL1.DATA) - "
V.128 = "          RECORDSIZE(2000,20472) -                  "
V.129 = "          FREESPACE(0 0) -                          "
V.130 = "          CISZ(20480) -                             "
V.131 = "          CYL(10 5) -                               "
V.132 = "          KEYS(10,4) ) -                            "
V.133 = "   INDEX -                                          "
V.134 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL1.INDEX) - "
V.135 = "          CYL(10 5) -                               "
V.136 = "          CISZ(512) )                               "
V.137 = "                                                    "
V.138 = "   DELETE (E7440TT0."||DBNAME||".PCKTFLE1) -        "
V.139 = "          CLUSTER                                   "
V.140 = "   IF LASTCC GT 4 THEN SET MAXCC=0                  "
V.141 = "                                                    "
V.142 = "   DEFINE CLUSTER -                                 "
V.143 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE1) -   "
V.144 = "          UNIQUE -                                  "
V.145 = "          SHAREOPTIONS(2 3) -                       "
V.146 = "          MGMTCLAS(D32M) -                          "
V.147 = "          VOLUMES(* * * * *) -                      "
V.148 = "          SPEED) -                                  "
V.149 = "   DATA -                                           "
V.150 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE1.DATA) - "
V.151 = "          RECORDSIZE(2102 20480) -                  "
V.152 = "          FREESPACE(10 10) -                        "
V.153 = "          CISZ(20480) -                             "
V.154 = "          CYL(10 5) -                               "
V.155 = "          KEYS(71 0) ) -                            "
V.156 = "   INDEX -                                          "
V.157 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE1.INDEX) - "
V.158 = "          CYL(10 5) -                               "
V.159 = "          CISZ(512) )                               "
V.160 = "                                                    "
/*WRITING STEM DATA FILE*/
"EXECIO 160 DISKW OUTPUT1 (FINIS STEM V."
"FREE FI(OUTPUT1)" ;
/*****************************************************************/
/*ALLOCATING FILE*/
"ALLOC DA("||IN2||") FI(OUTPUT2) SHR REUSE"
/*PUTTING DATA TO STEAM*/
W.1 = "   DELETE (E7440TT0."||DBNAME||".EXPLODE2) -           "
W.2 = "          CLUSTER                                      "
W.3 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
W.4 = "   DEFINE CLUSTER -                                    "
W.5 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE2) -      "
W.6 = "          UNIQUE -                                     "
W.7 = "          SHAREOPTIONS(2 3) -                          "
W.8 = "          MGMTCLAS(D32M) -                             "
W.9 = "          VOLUMES(* * * * *) -                         "
W.10 = "          SPEED) -                                     "
W.11 = "   DATA -                                              "
W.12 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE2.DATA) - "
W.13 = "          RECORDSIZE(2000,20472) -                     "
W.14 = "          FREESPACE(0 0) -                             "
W.15 = "          CISZ(20480) -                                "
W.16 = "          CYL(10 5) -                                  "
W.17 = "          KEYS(10,4) ) -                               "
W.18 = "   INDEX -                                             "
W.19 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE2.INDEX) - "
W.20 = "          CYL(10 5)  -                                 "
W.21 = "          CISZ(512) )                                  "
W.22 = "                                                       "
W.23 = "   DELETE (E7440TT0."||DBNAME||".ERRTRIG2) -           "
W.24 = "          CLUSTER                                      "
W.25 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
W.26 = "   DEFINE CLUSTER -                                    "
W.27 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG2) -      "
W.28 = "          UNIQUE -                                     "
W.29 = "          SHAREOPTIONS(2 3) -                          "
W.30 = "          MGMTCLAS(D32M) -                             "
W.31 = "          VOLUMES(* * * * *) -                         "
W.32 = "          SPEED) -                                     "
W.33 = "   DATA -                                              "
W.34 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG2.DATA) - "
W.35 = "          RECORDSIZE(2000 20472) -                     "
W.36 = "          FREESPACE(0 0) -                             "
W.37 = "          CISZ(20480) -                                "
W.38 = "          CYL(10 5) -                                  "
W.39 = "          KEYS(10 0) ) -                               "
W.40 = "   INDEX -                                             "
W.41 = "       (NAME(E7440TT0."||DBNAME||".ERRTRIG2.INDEX) -   "
W.42 = "          CYL(10 5) -                                  "
W.43 = "          CISZ(512) )                                  "
W.44 = "                                                       "
W.45 = "   DELETE (E7440TT0."||DBNAME||".REAPPLY2) -           "
W.46 = "          CLUSTER                                      "
W.47 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
W.48 = "   DEFINE CLUSTER         -                            "
W.49 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY2) -      "
W.50 = "          UNIQUE -                                     "
W.51 = "          SHAREOPTIONS(2 3) -                          "
W.52 = "          MGMTCLAS(D32M) -                             "
W.53 = "          VOLUMES(* * * * *) -                         "
W.54 = "          SPEED) -                                     "
W.55 = "   DATA -                                              "
W.56 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY2.DATA) - "
W.57 = "          RECORDSIZE(2000,20472) -                     "
W.58 = "          FREESPACE(0 0) -                             "
W.59 = "          CISZ(20480) -                                "
W.60 = "          CYL(10 5) -                                  "
W.61 = "          KEYS(10,4) ) -                               "
W.62 = "   INDEX -                                             "
W.63 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY2.INDEX) - "
W.64 = "          CYL(10 5) -                                  "
W.65 = "          CISZ(512) )                                  "
W.66 = "                                                       "
W.67 = "   DELETE (E7440TT0."||DBNAME||".DBPBFLG2) -           "
W.68 = "          CLUSTER                                      "
W.69 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
W.70 = "   DEFINE CLUSTER -                                    "
W.71 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG2) -      "
W.72 = "          UNIQUE -                                     "
W.73 = "          SHAREOPTIONS(2 3) -                          "
W.74 = "          MGMTCLAS(D32) -                              "
W.75 = "          VOLUMES(* * * *) -                           "
W.76 = "          SPEED) -                                     "
W.77 = "   DATA -                                              "
W.78 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG2.DATA) - "
W.79 = "          RECORDSIZE(20472 20472) -                    "
W.80 = "          FREESPACE(0 0) -                             "
W.81 = "          CISZ(20480) -                                "
W.82 = "          CYL(10 5) -                                  "
W.83 = "          KEYS(5 0) ) -                                "
W.84 = "   INDEX -                                             "
W.85 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG2.INDEX) - "
W.86 = "          CYL(10 5) -                                  "
W.87 = "          CISZ(512) )                                  "
W.88 = "                                                       "
W.89 = "   DELETE E7440TT0."||DBNAME||".CKPTCTL2 -             "
W.90 = "          CLUSTER                                      "
W.91 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
W.92 = "   DEFINE CLUSTER -                                    "
W.93 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL2) -      "
W.94 = "          UNIQUE -                                     "
W.95 = "          SHAREOPTIONS(2 3) -                          "
W.96 = "          MGMTCLAS(D32M) -                             "
W.97 = "          VOLUMES(* * * * *) -                         "
W.98 = "          SPEED) -                                     "
W.99 = "   DATA -                                              "
W.100 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL2.DATA) - "
W.101 = "          RECORDSIZE(1500 20472) -                     "
W.102 = "          FREESPACE(0 0) -                             "
W.103 = "          CISZ(20480) -                                "
W.104 = "          CYL(10 5) -                                  "
W.105 = "          KEYS(9 0) ) -                                "
W.106 = "   INDEX -                                             "
W.107 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL2.INDEX) - "
W.108 = "          CYL(10 5) -                                  "
W.109 = "          CISZ(512) )                                  "
W.110 = "                                                       "
W.111 = "   DELETE (E7440TT0."||DBNAME||".GRPEXPL2) -           "
W.112 = "          CLUSTER                                      "
W.113 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
W.114 = "   DEFINE CLUSTER -                                    "
W.115 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL2) -      "
W.116 = "          UNIQUE -                                     "
W.117 = "          SHAREOPTIONS(2 3) -                          "
W.118 = "          MGMTCLAS(D32M) -                             "
W.119 = "          VOLUMES(* * * * *) -                         "
W.120 = "          SPEED) -                                     "
W.121 = "   DATA -                                              "
W.122 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL2.DATA) - "
W.123 = "          RECORDSIZE(2000,20472) -                     "
W.124 = "          FREESPACE(0 0) -                             "
W.125 = "          CISZ(20480) -                                "
W.126 = "          CYL(10 5) -                                  "
W.127 = "          KEYS(10,4) ) -                               "
W.128 = "   INDEX -                                             "
W.129 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL2.INDEX) - "
W.130 = "          CYL(10 5) -                                  "
W.131 = "          CISZ(512) )                                  "
W.132 = "                                                       "
W.133 = "   DELETE (E7440TT0."||DBNAME||".PCKTFLE2) -           "
W.134 = "          CLUSTER                                      "
W.135 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
W.136 = "   DEFINE CLUSTER -                                    "
W.137 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE2) -      "
W.138 = "          UNIQUE -                                     "
W.139 = "          SHAREOPTIONS(2 3) -                          "
W.140 = "          MGMTCLAS(D32M) -                             "
W.141 = "          VOLUMES(* * * * *) -                         "
W.142 = "          SPEED) -                                     "
W.143 = "   DATA -                                              "
W.144 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE2.DATA) - "
W.145 = "          RECORDSIZE(2102 20480) -                     "
W.146 = "          FREESPACE(10 10) -                           "
W.147 = "          CISZ(20480) -                                "
W.148 = "          CYL(10 5) -                                  "
W.149 = "          KEYS(71 0) ) -                               "
W.150 = "   INDEX -                                             "
W.151 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE2.INDEX) - "
W.152 = "          CYL(10 5) -                                  "
W.153 = "          CISZ(512) )                                  "
W.154 = "                                                       "
/*WRITING STEM DATA FILE*/
"EXECIO 154 DISKW OUTPUT2 (FINIS STEM W."
"FREE FI(OUTPUT2)" ;
/*****************************************************************/
/*ALLOCATING FILE*/
"ALLOC DA("||IN3||") FI(OUTPUT3) SHR REUSE"
/*PUTTING DATA TO STEAM*/
X.1 = "   DELETE (E7440TT0."||DBNAME||".EXPLODE3) -           "
X.2 = "          CLUSTER                                      "
X.3 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
X.4 = "   DEFINE CLUSTER -                                    "
X.5 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE3) -      "
X.6 = "          UNIQUE -                                     "
X.7 = "          SHAREOPTIONS(2 3) -                          "
X.8 = "          MGMTCLAS(D32M) -                             "
X.9 = "          VOLUMES(* * * * *) -                         "
X.10 = "          SPEED) -                                     "
X.11 = "   DATA -                                              "
X.12 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE3.DATA) - "
X.13 = "          RECORDSIZE(2000,20472) -                     "
X.14 = "          FREESPACE(0 0) -                             "
X.15 = "          CISZ(20480) -                                "
X.16 = "          CYL(10 5) -                                  "
X.17 = "          KEYS(10,4) ) -                               "
X.18 = "   INDEX -                                             "
X.19 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE3.INDEX) - "
X.20 = "          CYL(10 5)  -                                 "
X.21 = "          CISZ(512) )                                  "
X.22 = "                                                       "
X.23 = "   DELETE (E7440TT0."||DBNAME||".ERRTRIG3) -           "
X.24 = "          CLUSTER                                      "
X.25 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
X.26 = "   DEFINE CLUSTER -                                    "
X.27 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG3) -      "
X.28 = "          UNIQUE -                                     "
X.29 = "          SHAREOPTIONS(2 3) -                          "
X.30 = "          MGMTCLAS(D32M) -                             "
X.31 = "          VOLUMES(* * * * *) -                         "
X.32 = "          SPEED) -                                     "
X.33 = "   DATA -                                              "
X.34 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG3.DATA) - "
X.35 = "          RECORDSIZE(2000 20472) -                     "
X.36 = "          FREESPACE(0 0) -                             "
X.37 = "          CISZ(20480) -                                "
X.38 = "          CYL(10 5) -                                  "
X.39 = "          KEYS(10 0) ) -                               "
X.40 = "   INDEX -                                             "
X.41 = "       (NAME(E7440TT0."||DBNAME||".ERRTRIG3.INDEX) -   "
X.42 = "          CYL(10 5) -                                  "
X.43 = "          CISZ(512) )                                  "
X.44 = "                                                       "
X.45 = "   DELETE (E7440TT0."||DBNAME||".REAPPLY3) -           "
X.46 = "          CLUSTER                                      "
X.47 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
X.48 = "   DEFINE CLUSTER         -                            "
X.49 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY3) -      "
X.50 = "          UNIQUE -                                     "
X.51 = "          SHAREOPTIONS(2 3) -                          "
X.52 = "          MGMTCLAS(D32M) -                             "
X.53 = "          VOLUMES(* * * * *) -                         "
X.54 = "          SPEED) -                                     "
X.55 = "   DATA -                                              "
X.56 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY3.DATA) - "
X.57 = "          RECORDSIZE(2000,20472) -                     "
X.58 = "          FREESPACE(0 0) -                             "
X.59 = "          CISZ(20480) -                                "
X.60 = "          CYL(10 5) -                                  "
X.61 = "          KEYS(10,4) ) -                               "
X.62 = "   INDEX -                                             "
X.63 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY3.INDEX) - "
X.64 = "          CYL(10 5) -                                  "
X.65 = "          CISZ(512) )                                  "
X.66 = "                                                       "
X.67 = "   DELETE (E7440TT0."||DBNAME||".DBPBFLG3) -           "
X.68 = "          CLUSTER                                      "
X.69 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
X.70 = "   DEFINE CLUSTER -                                    "
X.71 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG3) -      "
X.72 = "          UNIQUE -                                     "
X.73 = "          SHAREOPTIONS(2 3) -                          "
X.74 = "          MGMTCLAS(D32) -                              "
X.75 = "          VOLUMES(* * * *) -                           "
X.76 = "          SPEED) -                                     "
X.77 = "   DATA -                                              "
X.78 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG3.DATA) - "
X.79 = "          RECORDSIZE(20472 20472) -                    "
X.80 = "          FREESPACE(0 0) -                             "
X.81 = "          CISZ(20480) -                                "
X.82 = "          CYL(10 5) -                                  "
X.83 = "          KEYS(5 0) ) -                                "
X.84 = "   INDEX -                                             "
X.85 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG3.INDEX) - "
X.86 = "          CYL(10 5) -                                  "
X.87 = "          CISZ(512) )                                  "
X.88 = "                                                       "
X.89 = "   DELETE E7440TT0."||DBNAME||".CKPTCTL3 -             "
X.90 = "          CLUSTER                                      "
X.91 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
X.92 = "   DEFINE CLUSTER -                                    "
X.93 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL3) -      "
X.94 = "          UNIQUE -                                     "
X.95 = "          SHAREOPTIONS(2 3) -                          "
X.96 = "          MGMTCLAS(D32M) -                             "
X.97 = "          VOLUMES(* * * * *) -                         "
X.98 = "          SPEED) -                                     "
X.99 = "   DATA -                                              "
X.100 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL3.DATA) - "
X.101 = "          RECORDSIZE(1500 20472) -                     "
X.102 = "          FREESPACE(0 0) -                             "
X.103 = "          CISZ(20480) -                                "
X.104 = "          CYL(10 5) -                                  "
X.105 = "          KEYS(9 0) ) -                                "
X.106 = "   INDEX -                                             "
X.107 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL3.INDEX) - "
X.108 = "          CYL(10 5) -                                  "
X.109 = "          CISZ(512) )                                  "
X.110 = "                                                       "
X.111 = "   DELETE (E7440TT0."||DBNAME||".GRPEXPL3) -           "
X.112 = "          CLUSTER                                      "
X.113 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
X.114 = "   DEFINE CLUSTER -                                    "
X.115 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL3) -      "
X.116 = "          UNIQUE -                                     "
X.117 = "          SHAREOPTIONS(2 3) -                          "
X.118 = "          MGMTCLAS(D32M) -                             "
X.119 = "          VOLUMES(* * * * *) -                         "
X.120 = "          SPEED) -                                     "
X.121 = "   DATA -                                              "
X.122 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL3.DATA) - "
X.123 = "          RECORDSIZE(2000,20472) -                     "
X.124 = "          FREESPACE(0 0) -                             "
X.125 = "          CISZ(20480) -                                "
X.126 = "          CYL(10 5) -                                  "
X.127 = "          KEYS(10,4) ) -                               "
X.128 = "   INDEX -                                             "
X.129 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL3.INDEX) - "
X.130 = "          CYL(10 5) -                                  "
X.131 = "          CISZ(512) )                                  "
X.132 = "                                                       "
X.133 = "   DELETE (E7440TT0."||DBNAME||".PCKTFLE3) -           "
X.134 = "          CLUSTER                                      "
X.135 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
X.136 = "   DEFINE CLUSTER -                                    "
X.137 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE3) -      "
X.138 = "          UNIQUE -                                     "
X.139 = "          SHAREOPTIONS(2 3) -                          "
X.140 = "          MGMTCLAS(D32M) -                             "
X.141 = "          VOLUMES(* * * * *) -                         "
X.142 = "          SPEED) -                                     "
X.143 = "   DATA -                                              "
X.144 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE3.DATA) - "
X.145 = "          RECORDSIZE(2102 20480) -                     "
X.146 = "          FREESPACE(10 10) -                           "
X.147 = "          CISZ(20480) -                                "
X.148 = "          CYL(10 5) -                                  "
X.149 = "          KEYS(71 0) ) -                               "
X.150 = "   INDEX -                                             "
X.151 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE3.INDEX) - "
X.152 = "          CYL(10 5) -                                  "
X.153 = "          CISZ(512) )                                  "
X.154 = "                                                       "
/*WRITING STEM DATA FILE*/
"EXECIO 154 DISKW OUTPUT3 (FINIS STEM X."
"FREE FI(OUTPUT3)" ;
/*****************************************************************/
/*ALLOCATING FILE*/
"ALLOC DA("||IN4||") FI(OUTPUT4) SHR REUSE"
/*PUTTING DATA TO STEAM*/
Y.1 = "   DELETE (E7440TT0."||DBNAME||".EXPLODE4) -           "
Y.2 = "          CLUSTER                                      "
Y.3 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Y.4 = "   DEFINE CLUSTER -                                    "
Y.5 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE4) -      "
Y.6 = "          UNIQUE -                                     "
Y.7 = "          SHAREOPTIONS(2 3) -                          "
Y.8 = "          MGMTCLAS(D32M) -                             "
Y.9 = "          VOLUMES(* * * * *) -                         "
Y.10 = "          SPEED) -                                     "
Y.11 = "   DATA -                                              "
Y.12 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE4.DATA) - "
Y.13 = "          RECORDSIZE(2000,20472) -                     "
Y.14 = "          FREESPACE(0 0) -                             "
Y.15 = "          CISZ(20480) -                                "
Y.16 = "          CYL(10 5) -                                  "
Y.17 = "          KEYS(10,4) ) -                               "
Y.18 = "   INDEX -                                             "
Y.19 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE4.INDEX) - "
Y.20 = "          CYL(10 5)  -                                 "
Y.21 = "          CISZ(512) )                                  "
Y.22 = "                                                       "
Y.23 = "   DELETE (E7440TT0."||DBNAME||".ERRTRIG4) -           "
Y.24 = "          CLUSTER                                      "
Y.25 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Y.26 = "   DEFINE CLUSTER -                                    "
Y.27 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG4) -      "
Y.28 = "          UNIQUE -                                     "
Y.29 = "          SHAREOPTIONS(2 3) -                          "
Y.30 = "          MGMTCLAS(D32M) -                             "
Y.31 = "          VOLUMES(* * * * *) -                         "
Y.32 = "          SPEED) -                                     "
Y.33 = "   DATA -                                              "
Y.34 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG4.DATA) - "
Y.35 = "          RECORDSIZE(2000 20472) -                     "
Y.36 = "          FREESPACE(0 0) -                             "
Y.37 = "          CISZ(20480) -                                "
Y.38 = "          CYL(10 5) -                                  "
Y.39 = "          KEYS(10 0) ) -                               "
Y.40 = "   INDEX -                                             "
Y.41 = "       (NAME(E7440TT0."||DBNAME||".ERRTRIG4.INDEX) -   "
Y.42 = "          CYL(10 5) -                                  "
Y.43 = "          CISZ(512) )                                  "
Y.44 = "                                                       "
Y.45 = "   DELETE (E7440TT0."||DBNAME||".REAPPLY4) -           "
Y.46 = "          CLUSTER                                      "
Y.47 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Y.48 = "   DEFINE CLUSTER         -                            "
Y.49 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY4) -      "
Y.50 = "          UNIQUE -                                     "
Y.51 = "          SHAREOPTIONS(2 3) -                          "
Y.52 = "          MGMTCLAS(D32M) -                             "
Y.53 = "          VOLUMES(* * * * *) -                         "
Y.54 = "          SPEED) -                                     "
Y.55 = "   DATA -                                              "
Y.56 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY4.DATA) - "
Y.57 = "          RECORDSIZE(2000,20472) -                     "
Y.58 = "          FREESPACE(0 0) -                             "
Y.59 = "          CISZ(20480) -                                "
Y.60 = "          CYL(10 5) -                                  "
Y.61 = "          KEYS(10,4) ) -                               "
Y.62 = "   INDEX -                                             "
Y.63 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY4.INDEX) - "
Y.64 = "          CYL(10 5) -                                  "
Y.65 = "          CISZ(512) )                                  "
Y.66 = "                                                       "
Y.67 = "   DELETE (E7440TT0."||DBNAME||".DBPBFLG4) -           "
Y.68 = "          CLUSTER                                      "
Y.69 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Y.70 = "   DEFINE CLUSTER -                                    "
Y.71 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG4) -      "
Y.72 = "          UNIQUE -                                     "
Y.73 = "          SHAREOPTIONS(2 3) -                          "
Y.74 = "          MGMTCLAS(D32) -                              "
Y.75 = "          VOLUMES(* * * *) -                           "
Y.76 = "          SPEED) -                                     "
Y.77 = "   DATA -                                              "
Y.78 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG4.DATA) - "
Y.79 = "          RECORDSIZE(20472 20472) -                    "
Y.80 = "          FREESPACE(0 0) -                             "
Y.81 = "          CISZ(20480) -                                "
Y.82 = "          CYL(10 5) -                                  "
Y.83 = "          KEYS(5 0) ) -                                "
Y.84 = "   INDEX -                                             "
Y.85 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG4.INDEX) - "
Y.86 = "          CYL(10 5) -                                  "
Y.87 = "          CISZ(512) )                                  "
Y.88 = "                                                       "
Y.89 = "   DELETE E7440TT0."||DBNAME||".CKPTCTL4 -             "
Y.90 = "          CLUSTER                                      "
Y.91 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Y.92 = "   DEFINE CLUSTER -                                    "
Y.93 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL4) -      "
Y.94 = "          UNIQUE -                                     "
Y.95 = "          SHAREOPTIONS(2 3) -                          "
Y.96 = "          MGMTCLAS(D32M) -                             "
Y.97 = "          VOLUMES(* * * * *) -                         "
Y.98 = "          SPEED) -                                     "
Y.99 = "   DATA -                                              "
Y.100 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL4.DATA) - "
Y.101 = "          RECORDSIZE(1500 20472) -                     "
Y.102 = "          FREESPACE(0 0) -                             "
Y.103 = "          CISZ(20480) -                                "
Y.104 = "          CYL(10 5) -                                  "
Y.105 = "          KEYS(9 0) ) -                                "
Y.106 = "   INDEX -                                             "
Y.107 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL4.INDEX) - "
Y.108 = "          CYL(10 5) -                                  "
Y.109 = "          CISZ(512) )                                  "
Y.110 = "                                                       "
Y.111 = "   DELETE (E7440TT0."||DBNAME||".GRPEXPL4) -           "
Y.112 = "          CLUSTER                                      "
Y.113 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Y.114 = "   DEFINE CLUSTER -                                    "
Y.115 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL4) -      "
Y.116 = "          UNIQUE -                                     "
Y.117 = "          SHAREOPTIONS(2 3) -                          "
Y.118 = "          MGMTCLAS(D32M) -                             "
Y.119 = "          VOLUMES(* * * * *) -                         "
Y.120 = "          SPEED) -                                     "
Y.121 = "   DATA -                                              "
Y.122 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL4.DATA) - "
Y.123 = "          RECORDSIZE(2000,20472) -                     "
Y.124 = "          FREESPACE(0 0) -                             "
Y.125 = "          CISZ(20480) -                                "
Y.126 = "          CYL(10 5) -                                  "
Y.127 = "          KEYS(10,4) ) -                               "
Y.128 = "   INDEX -                                             "
Y.129 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL4.INDEX) - "
Y.130 = "          CYL(10 5) -                                  "
Y.131 = "          CISZ(512) )                                  "
Y.132 = "                                                       "
Y.133 = "   DELETE (E7440TT0."||DBNAME||".PCKTFLE4) -           "
Y.134 = "          CLUSTER                                      "
Y.135 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Y.136 = "   DEFINE CLUSTER -                                    "
Y.137 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE4) -      "
Y.138 = "          UNIQUE -                                     "
Y.139 = "          SHAREOPTIONS(2 3) -                          "
Y.140 = "          MGMTCLAS(D32M) -                             "
Y.141 = "          VOLUMES(* * * * *) -                         "
Y.142 = "          SPEED) -                                     "
Y.143 = "   DATA -                                              "
Y.144 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE4.DATA) - "
Y.145 = "          RECORDSIZE(2102 20480) -                     "
Y.146 = "          FREESPACE(10 10) -                           "
Y.147 = "          CISZ(20480) -                                "
Y.148 = "          CYL(10 5) -                                  "
Y.149 = "          KEYS(71 0) ) -                               "
Y.150 = "   INDEX -                                             "
Y.151 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE4.INDEX) - "
Y.152 = "          CYL(10 5) -                                  "
Y.153 = "          CISZ(512) )                                  "
Y.154 = "                                                       "
/*WRITING STEM DATA FILE*/
"EXECIO 154 DISKW OUTPUT4 (FINIS STEM Y."
"FREE FI(OUTPUT4)" ;
/*****************************************************************/
/*****************************************************************/
/*ALLOCATING FILE*/
"ALLOC DA("||IN5||") FI(OUTPUT5) SHR REUSE"
/*PUTTING DATA TO STEAM*/
Z.1 = "   DELETE (E7440TT0."||DBNAME||".EXPLODE5) -           "
Z.2 = "          CLUSTER                                      "
Z.3 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Z.4 = "   DEFINE CLUSTER -                                    "
Z.5 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE5) -      "
Z.6 = "          UNIQUE -                                     "
Z.7 = "          SHAREOPTIONS(2 3) -                          "
Z.8 = "          MGMTCLAS(D32M) -                             "
Z.9 = "          VOLUMES(* * * * *) -                         "
Z.10 = "          SPEED) -                                     "
Z.11 = "   DATA -                                              "
Z.12 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE5.DATA) - "
Z.13 = "          RECORDSIZE(2000,20472) -                     "
Z.14 = "          FREESPACE(0 0) -                             "
Z.15 = "          CISZ(20480) -                                "
Z.16 = "          CYL(10 5) -                                  "
Z.17 = "          KEYS(10,4) ) -                               "
Z.18 = "   INDEX -                                             "
Z.19 = "          (NAME(E7440TT0."||DBNAME||".EXPLODE5.INDEX) - "
Z.20 = "          CYL(10 5)  -                                 "
Z.21 = "          CISZ(512) )                                  "
Z.22 = "                                                       "
Z.23 = "   DELETE (E7440TT0."||DBNAME||".ERRTRIG5) -           "
Z.24 = "          CLUSTER                                      "
Z.25 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Z.26 = "   DEFINE CLUSTER -                                    "
Z.27 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG5) -      "
Z.28 = "          UNIQUE -                                     "
Z.29 = "          SHAREOPTIONS(2 3) -                          "
Z.30 = "          MGMTCLAS(D32M) -                             "
Z.31 = "          VOLUMES(* * * * *) -                         "
Z.32 = "          SPEED) -                                     "
Z.33 = "   DATA -                                              "
Z.34 = "          (NAME(E7440TT0."||DBNAME||".ERRTRIG5.DATA) - "
Z.35 = "          RECORDSIZE(2000 20472) -                     "
Z.36 = "          FREESPACE(0 0) -                             "
Z.37 = "          CISZ(20480) -                                "
Z.38 = "          CYL(10 5) -                                  "
Z.39 = "          KEYS(10 0) ) -                               "
Z.40 = "   INDEX -                                             "
Z.41 = "       (NAME(E7440TT0."||DBNAME||".ERRTRIG5.INDEX) -   "
Z.42 = "          CYL(10 5) -                                  "
Z.43 = "          CISZ(512) )                                  "
Z.44 = "                                                       "
Z.45 = "   DELETE (E7440TT0."||DBNAME||".REAPPLY5) -           "
Z.46 = "          CLUSTER                                      "
Z.47 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Z.48 = "   DEFINE CLUSTER         -                            "
Z.49 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY5) -      "
Z.50 = "          UNIQUE -                                     "
Z.51 = "          SHAREOPTIONS(2 3) -                          "
Z.52 = "          MGMTCLAS(D32M) -                             "
Z.53 = "          VOLUMES(* * * * *) -                         "
Z.54 = "          SPEED) -                                     "
Z.55 = "   DATA -                                              "
Z.56 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY5.DATA) - "
Z.57 = "          RECORDSIZE(2000,20472) -                     "
Z.58 = "          FREESPACE(0 0) -                             "
Z.59 = "          CISZ(20480) -                                "
Z.60 = "          CYL(10 5) -                                  "
Z.61 = "          KEYS(10,4) ) -                               "
Z.62 = "   INDEX -                                             "
Z.63 = "          (NAME(E7440TT0."||DBNAME||".REAPPLY5.INDEX) - "
Z.64 = "          CYL(10 5) -                                  "
Z.65 = "          CISZ(512) )                                  "
Z.66 = "                                                       "
Z.67 = "   DELETE (E7440TT0."||DBNAME||".DBPBFLG5) -           "
Z.68 = "          CLUSTER                                      "
Z.69 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Z.70 = "   DEFINE CLUSTER -                                    "
Z.71 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG5) -      "
Z.72 = "          UNIQUE -                                     "
Z.73 = "          SHAREOPTIONS(2 3) -                          "
Z.74 = "          MGMTCLAS(D32) -                              "
Z.75 = "          VOLUMES(* * * *) -                           "
Z.76 = "          SPEED) -                                     "
Z.77 = "   DATA -                                              "
Z.78 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG5.DATA) - "
Z.79 = "          RECORDSIZE(20472 20472) -                    "
Z.80 = "          FREESPACE(0 0) -                             "
Z.81 = "          CISZ(20480) -                                "
Z.82 = "          CYL(10 5) -                                  "
Z.83 = "          KEYS(5 0) ) -                                "
Z.84 = "   INDEX -                                             "
Z.85 = "          (NAME(E7440TT0."||DBNAME||".DBPBFLG5.INDEX) - "
Z.86 = "          CYL(10 5) -                                  "
Z.87 = "          CISZ(512) )                                  "
Z.88 = "                                                       "
Z.89 = "   DELETE E7440TT0."||DBNAME||".CKPTCTL5 -             "
Z.90 = "          CLUSTER                                      "
Z.91 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Z.92 = "   DEFINE CLUSTER -                                    "
Z.93 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL5) -      "
Z.94 = "          UNIQUE -                                     "
Z.95 = "          SHAREOPTIONS(2 3) -                          "
Z.96 = "          MGMTCLAS(D32M) -                             "
Z.97 = "          VOLUMES(* * * * *) -                         "
Z.98 = "          SPEED) -                                     "
Z.99 = "   DATA -                                              "
Z.100 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL5.DATA) - "
Z.101 = "          RECORDSIZE(1500 20472) -                     "
Z.102 = "          FREESPACE(0 0) -                             "
Z.103 = "          CISZ(20480) -                                "
Z.104 = "          CYL(10 5) -                                  "
Z.105 = "          KEYS(9 0) ) -                                "
Z.106 = "   INDEX -                                             "
Z.107 = "          (NAME(E7440TT0."||DBNAME||".CKPTCTL5.INDEX) - "
Z.108 = "          CYL(10 5) -                                  "
Z.109 = "          CISZ(512) )                                  "
Z.110 = "                                                       "
Z.111 = "   DELETE (E7440TT0."||DBNAME||".GRPEXPL5) -           "
Z.112 = "          CLUSTER                                      "
Z.113 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Z.114 = "   DEFINE CLUSTER -                                    "
Z.115 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL5) -      "
Z.116 = "          UNIQUE -                                     "
Z.117 = "          SHAREOPTIONS(2 3) -                          "
Z.118 = "          MGMTCLAS(D32M) -                             "
Z.119 = "          VOLUMES(* * * * *) -                         "
Z.120 = "          SPEED) -                                     "
Z.121 = "   DATA -                                              "
Z.122 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL5.DATA) - "
Z.123 = "          RECORDSIZE(2000,20472) -                     "
Z.124 = "          FREESPACE(0 0) -                             "
Z.125 = "          CISZ(20480) -                                "
Z.126 = "          CYL(10 5) -                                  "
Z.127 = "          KEYS(10,4) ) -                               "
Z.128 = "   INDEX -                                             "
Z.129 = "          (NAME(E7440TT0."||DBNAME||".GRPEXPL5.INDEX) - "
Z.130 = "          CYL(10 5) -                                  "
Z.131 = "          CISZ(512) )                                  "
Z.132 = "                                                       "
Z.133 = "   DELETE (E7440TT0."||DBNAME||".PCKTFLE5) -           "
Z.134 = "          CLUSTER                                      "
Z.135 = "   IF LASTCC GT 4 THEN SET MAXCC=0                     "
Z.136 = "   DEFINE CLUSTER -                                    "
Z.137 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE5) -      "
Z.138 = "          UNIQUE -                                     "
Z.139 = "          SHAREOPTIONS(2 3) -                          "
Z.140 = "          MGMTCLAS(D32M) -                             "
Z.141 = "          VOLUMES(* * * * *) -                         "
Z.142 = "          SPEED) -                                     "
Z.143 = "   DATA -                                              "
Z.144 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE5.DATA) - "
Z.145 = "          RECORDSIZE(2102 20480) -                     "
Z.146 = "          FREESPACE(10 10) -                           "
Z.147 = "          CISZ(20480) -                                "
Z.148 = "          CYL(10 5) -                                  "
Z.149 = "          KEYS(71 0) ) -                               "
Z.150 = "   INDEX -                                             "
Z.151 = "          (NAME(E7440TT0."||DBNAME||".PCKTFLE5.INDEX) - "
Z.152 = "          CYL(10 5) -                                  "
Z.153 = "          CISZ(512) )                                  "
Z.154 = "                                                       "
/*WRITING STEM DATA FILE*/
"EXECIO 154 DISKW OUTPUT5 (FINIS STEM Z."
"FREE FI(OUTPUT5)" ;
/*****************************************************************/
RETURN;
/*****************************************************************/
BATTRX_FILE:
/*YOUR BATTRX OLD AND NEW FILE NAME*/
MASTER_BATTRX="'E7440TS.SSSSS.BATTRX.N444444'"
NEW_BATTRX ="'E7440TS."||URN||".BATTRX.N123456'"
/**BATTRX FILE CREATION*/
ADDRESS TSO "DEL "NEW_BATTRX""
"ALLOC FI(OUTDD) DA("NEW_BATTRX") SHR REUSE",
"NEW SPACE (100,200) DSORG(PS) RECFM(F B) LRECL(20476) BLKSIZE(20476)"
"FREE FI(OUTDD)"
ADDRESS TSO
"ALLOC F(INFILE) DSN("MASTER_BATTRX") SHR REUSE"
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
I=1
DO WHILE I <= MYFILE.0
MF.I = SUBSTR(MYFILE.I,01,25)||CDATE||,
     SUBSTR(MYFILE.I,32,08)||CDATE||SUBSTR(MYFILE.I,46,19885)||,
     CDATE||SUBSTR(MYFILE.I,19937,540)
"ALLOC DA("NEW_BATTRX") FI(OUTPUT) SHR REUSE"
  /*PUTTING DATA TO STEAM*/
  MYSTEM.I = MF.I
  /*WRITING STEM DATA FILE*/
  "EXECIO * DISKW OUTPUT (FINIS STEM MYSTEM."
  "FREE FI(OUTPUT)"
   I = I + 1
END
NEW_BATTRX1="E7440TS."||URN||".BATTRX.N123456"
RETURN ;
/******************************/
DELALL:
DF1 = "'"||PDS||"(AFAP)'"
DF2 = "'"||PDS||"(BXXP)'"
DF3 = "'"||PDS||"(CGAP)'"
DF4 = "'"||PDS||"(DHKP)'"
DF5 = "'"||PDS||"(TEMPF)'"
DF6 = "'"||PDS||"(TEMPL)'"
DF7 = "'"||PDS||"(TFAP)'"
DF8 = "'"||PDS||"(TXXP)'"
DF9 = "'"||PDS||"(TGAP)'"
DF10= "'"||PDS||"(THKP)'"
DF11= "'"||PDS||"(RFAP)'"
DF12= "'"||PDS||"(RXXP)'"
DF13= "'"||PDS||"(RGAP)'"
DF14= "'"||PDS||"(RHKP)'"
CF1 = SYSDSN(DF1) /='OK'
CF2 = SYSDSN(DF2) /='OK'
CF3 = SYSDSN(DF3) /='OK'
CF4 = SYSDSN(DF4) /='OK'
CF5 = SYSDSN(DF5) /='OK'
CF6 = SYSDSN(DF6) /='OK'
CF7 = SYSDSN(DF7) /='OK'
CF8 = SYSDSN(DF8) /='OK'
CF9 = SYSDSN(DF9) /='OK'
CF10 = SYSDSN(DF10) /='OK'
CF11 = SYSDSN(DF11) /='OK'
CF12 = SYSDSN(DF12) /='OK'
CF13 = SYSDSN(DF13) /='OK'
CF14 = SYSDSN(DF14) /='OK'
SAY "TEMP FILES ARE DELETING........"
IF CF1  =0 THEN;DO;ADDRESS TSO "DEL "||DF1||"";END ;
IF CF2  =0 THEN;DO;ADDRESS TSO "DEL "||DF2||"";END ;
IF CF3  =0 THEN;DO;ADDRESS TSO "DEL "||DF3||"";END ;
IF CF4  =0 THEN;DO;ADDRESS TSO "DEL "||DF4||"";END ;
IF CF5  =0 THEN;DO;ADDRESS TSO "DEL "||DF5||"";END ;
IF CF6  =0 THEN;DO;ADDRESS TSO "DEL "||DF6||"";END ;
IF CF7  =0 THEN;DO;ADDRESS TSO "DEL "||DF7||"";END ;
IF CF8  =0 THEN;DO;ADDRESS TSO "DEL "||DF8||"";END ;
IF CF9  =0 THEN;DO;ADDRESS TSO "DEL "||DF9||"";END ;
IF CF10 =0 THEN;DO;ADDRESS TSO "DEL "||DF10||"";END;
IF CF11 =0 THEN;DO;ADDRESS TSO "DEL "||DF11||"";END;
IF CF12 =0 THEN;DO;ADDRESS TSO "DEL "||DF12||"";END;
IF CF13 =0 THEN;DO;ADDRESS TSO "DEL "||DF13||"";END;
IF CF14 =0 THEN;DO;ADDRESS TSO "DEL "||DF14||"";END;
SAY "TEMP FILES ARE DELETED!!!!!!!!!"
RETURN ;
/*********************************************************************/
CONTROL_FILES:
VSAM_FILE="'E7440TT0."||DBNAME||".CONTROL'"
SEQ_FILE ="'E7440TS."||URN||".CONTROL'"
VSAM_C1="'E7440TT0."||DBNAME||".CONTROL1'"
VSAM_C2="'E7440TT0."||DBNAME||".CONTROL2'"
VSAM_C3="'E7440TT0."||DBNAME||".CONTROL3'"
VSAM_C4="'E7440TT0."||DBNAME||".CONTROL4'"
VSAM_C5="'E7440TT0."||DBNAME||".CONTROL5'"
ADDRESS TSO "DEL "SEQ_FILE""
ADDRESS TSO
"ALLOC FI(INDD) DA("VSAM_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("SEQ_FILE") SHR REUSE",
"NEW SPACE (100,200) DSORG(PS) RECFM(V B) LRECL(4092) BLKSIZE(8184)"
"REPRO INFILE(INDD) OUTFILE(OUTDD) COUNT(1)"
"FREE FI(INDD)"
"FREE FI(OUTDD)"
/****************/
ADDRESS TSO
"ALLOC FI(INDD) DA("SEQ_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("VSAM_C1") SHR REUSE"
"REPRO INFILE(INDD) OUTFILE(OUTDD) REPLACE"
"FREE FI(INDD)"
"FREE FI(OUTDD)"
/****************/
ADDRESS TSO
"ALLOC FI(INDD) DA("SEQ_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("VSAM_C2") SHR REUSE"
"REPRO INFILE(INDD) OUTFILE(OUTDD) REPLACE"
"FREE FI(INDD)"
"FREE FI(OUTDD)"
/****************/
ADDRESS TSO
"ALLOC FI(INDD) DA("SEQ_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("VSAM_C3") SHR REUSE"
"REPRO INFILE(INDD) OUTFILE(OUTDD) REPLACE"
"FREE FI(INDD)"
"FREE FI(OUTDD)"
/****************/
ADDRESS TSO
"ALLOC FI(INDD) DA("SEQ_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("VSAM_C4") SHR REUSE"
"REPRO INFILE(INDD) OUTFILE(OUTDD) REPLACE"
"FREE FI(INDD)"
"FREE FI(OUTDD)"
/****************/
ADDRESS TSO
"ALLOC FI(INDD) DA("SEQ_FILE") SHR REUSE"
"ALLOC FI(OUTDD) DA("VSAM_C5") SHR REUSE"
"REPRO INFILE(INDD) OUTFILE(OUTDD) REPLACE"
"FREE FI(INDD)"
"FREE FI(OUTDD)"
/****************/
RETURN ;
/*********************************************************************/
JCL2REXX:
TEMPF="'"||PDS||"(TEMPF)'"
TEMPL="'"||PDS||"(TEMPL)'"
JCL1="'"||PDS||"(AFAP)'"
TEMPA="'"||PDS||"(TFAP)'"
REXXA="'"||PDS||"(RFAP)'"
JCL2="'"||PDS||"(BXXP)'"
TEMPB="'"||PDS||"(TXXP)'"
REXXB="'"||PDS||"(RXXP)'"
JCL3="'"||PDS||"(CGAP)'"
TEMPC="'"||PDS||"(TGAP)'"
REXXC="'"||PDS||"(RGAP)'"
JCL4="'"||PDS||"(DHKP)'"
TEMPD="'"||PDS||"(THKP)'"
REXXD="'"||PDS||"(RHKP)'"
/**************************************************************/
/**TEMP FIRST AND LAST**/
ADDRESS TSO "ALLOC DA("TEMPF") FI(OUTPUT) SHR REUSE"
  MYSTEM.1 = "/*REXX*/"
"EXECIO 1 DISKW OUTPUT (FINIS STEM MYSTEM."
"FREE FI(OUTPUT)"
ADDRESS TSO "ALLOC DA("TEMPL") FI(OUTPUT) SHR REUSE"
  MYSTEM.1 = "QUEUE '$$'"
  MYSTEM.2 = "ADDRESS TSO 'SUB * END($$)'"
"EXECIO 2 DISKW OUTPUT (FINIS STEM MYSTEM."
"FREE FI(OUTPUT)"
/**************************************************************/
ADDRESS TSO "ALLOC F(INFILE) DSN("JCL1") SHR REUSE"
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
I=1
DO WHILE I<=MYFILE.0
MF.I="QUEUE "||'"'||SUBSTR(MYFILE.I,1,72)||'"' ;
ADDRESS TSO "ALLOC DA("TEMPA") FI(OUTPUT) SHR REUSE"
  MYSTEM.I = MF.I
  "EXECIO * DISKW OUTPUT (FINIS STEM MYSTEM."
  "FREE FI(OUTPUT)"
   I = I + 1
END
ADDRESS TSO
"ALLOC F(INFILE) DSN("TEMPF","TEMPA","TEMPL") SHR REUSE "
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
"ALLOC DA("REXXA") FI(OUTPUT) SHR REUSE"
  "EXECIO * DISKW OUTPUT (FINIS STEM MYFILE."
  "FREE FI(OUTPUT)"
/**************************************************************/
ADDRESS TSO "ALLOC F(INFILE) DSN("JCL2") SHR REUSE"
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
I=1
DO WHILE I<=MYFILE.0
MF.I="QUEUE "||'"'||SUBSTR(MYFILE.I,1,72)||'"' ;
ADDRESS TSO "ALLOC DA("TEMPB") FI(OUTPUT) SHR REUSE"
  MYSTEM.I = MF.I
  "EXECIO * DISKW OUTPUT (FINIS STEM MYSTEM."
  "FREE FI(OUTPUT)"
   I = I + 1
END
ADDRESS TSO
"ALLOC F(INFILE) DSN("TEMPF","TEMPB","TEMPL") SHR REUSE "
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
"ALLOC DA("REXXB") FI(OUTPUT) SHR REUSE"
  "EXECIO * DISKW OUTPUT (FINIS STEM MYFILE."
  "FREE FI(OUTPUT)"
/**************************************************************/
ADDRESS TSO "ALLOC F(INFILE) DSN("JCL3") SHR REUSE"
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
I=1
DO WHILE I<=MYFILE.0
MF.I="QUEUE "||'"'||SUBSTR(MYFILE.I,1,72)||'"' ;
ADDRESS TSO "ALLOC DA("TEMPC") FI(OUTPUT) SHR REUSE"
  MYSTEM.I = MF.I
  "EXECIO * DISKW OUTPUT (FINIS STEM MYSTEM."
  "FREE FI(OUTPUT)"
   I = I + 1
END
ADDRESS TSO
"ALLOC F(INFILE) DSN("TEMPF","TEMPC","TEMPL") SHR REUSE "
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
"ALLOC DA("REXXC") FI(OUTPUT) SHR REUSE"
  "EXECIO * DISKW OUTPUT (FINIS STEM MYFILE."
  "FREE FI(OUTPUT)"
/**************************************************************/
ADDRESS TSO "ALLOC F(INFILE) DSN("JCL4") SHR REUSE"
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
I=1
DO WHILE I<=MYFILE.0
MF.I="QUEUE "||'"'||SUBSTR(MYFILE.I,1,72)||'"' ;
ADDRESS TSO "ALLOC DA("TEMPD") FI(OUTPUT) SHR REUSE"
  MYSTEM.I = MF.I
  "EXECIO 95 DISKW OUTPUT (FINIS STEM MYSTEM."
  "FREE FI(OUTPUT)"
   I = I + 1
END
ADDRESS TSO
"ALLOC F(INFILE) DSN("TEMPF","TEMPD","TEMPL") SHR REUSE "
"EXECIO * DISKR INFILE( FINIS STEM MYFILE."
"FREE F(INFILE)"
"ALLOC DA("REXXD") FI(OUTPUT) SHR REUSE"
  "EXECIO 98 DISKW OUTPUT (FINIS STEM MYFILE."
  "FREE FI(OUTPUT)"
RETURN ;
/*********************************************************************/
